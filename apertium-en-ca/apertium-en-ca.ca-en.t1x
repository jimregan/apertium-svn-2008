<?xml version="1.0" encoding="ISO-8859-1"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/><!--Falten els altres np (antroponims) que tenen gen i nbr, revisar regles.-->
      <cat-item tags="np.loc.*"/>
    </def-cat>

     <def-cat n="ant">
      <cat-item tags="np.ant.*"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>
    <def-cat n="det"><!--Determinants i predeterminants, van anteposats en català -->
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <!-- <cat-item tags="num.*"/> -->
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="prpers">
      <cat-item lemma="prpers" tags="prn.*"/>
    </def-cat>

    <def-cat n="tn_itg_pos"><!--Aquí no hi entren els pronoms personals, caldrà fer-ne un xunc a part. -->
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.pos.*"/>
    </def-cat>
    
    <def-cat n="enc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="pro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="verbnm_inf_ger"><!--verb no modal, infinitiu i gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.pron.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.pron.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbser.pron.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbhaver.pron.ger"/>
    </def-cat>

    <def-cat n="verbnm_imp"><!--verb no modal, imperatiu -->
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pron.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pron.imp.*"/>
    </def-cat>

    <def-cat n="verbm"><!--verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbm_inf_ger"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="haver">
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="caldre">
      <cat-item lemma="caldre" tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbcj">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/><!--ATENCIÓ: CANVI -->
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>


    <def-cat n="anar">
      <cat-item lemma="anar" tags="vblex.pri.*"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>

    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="i" tags="cnjcoo"/>
      <cat-item lemma="o" tags="cnjcoo"/>
      <cat-item lemma="però" tags="cnjcoo"/>
    </def-cat>

     <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="per">
      <cat-item lemma="per" tags="pr"/>
    </def-cat>

    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>

    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>

  </section-def-cats>
  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">          
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
    </def-attr>  


    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>

    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
    </def-attr>
    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>  
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="prs"/>
      <attr-item tags="pp"/><!-- ? -->
      <attr-item tags="ger"/><!-- ? -->
      <attr-item tags="inf"/><!-- ? -->
    </def-attr>



    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>  

  </section-def-attrs>
  <section-def-vars>
    <def-var n="nombre"/>
    <def-var n="genere"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/> 
    <def-var n="lema"/>
    <def-var n="EOS"/>
    <def-var n="paraula1"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
  </section-def-vars>

  <section-def-lists>

    <def-list n="det_canviant">
      <list-item v="un"/>
      <list-item v="un altre"/>
      <list-item v="poc"/>
      <list-item v="quant"/>
      <list-item v="menys"/>
      <list-item v="gaire"/>
      <list-item v="tant"/>
      <list-item v="massa"/>
    </def-list>
  </section-def-lists>


  <section-def-macros>
    

    <def-macro n="f_bcond" npar="1"><!--Per mirar si el blanc conté o no format. Cal posar aquesta funció en les regles en què desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conté format cal conservar-la, si no en conté cal eliminar-la perquè no apareguin dos espais seguits. -->
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<b pos="1"/>
		<lit v=" "/>
	      </equal>
	    </not>
	  </test>
	  <out>
	    <b pos="1"/>
	  </out>
	</when>     	    
      </choose>
    </def-macro>


    <def-macro n="nombre_nom" npar="1">
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="pl_slsg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="sg_slpl"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</otherwise>
      </choose> 
    </def-macro>

    <def-macro n="firstWord" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="a_np_acr"/>
	      <lit v=""/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal> 
		  <var n="EOS"/>
		  <lit v="true"/>
		</equal> 
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	      <let>
		<var n="caseFirstWord"/>
		<lit v="Aa"/>
	      </let>
	    </when>
	  </choose>
	</when>
	<otherwise>
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="aa"/>
	  </let>
	</otherwise>
      </choose>
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>


    <def-macro n="canvia_det" npar="2">
      <choose>
	<when>
	  <test>
	    <in caseless="yes">
	      <clip pos="1" side="sl" part="lem"/>
	      <list n="det_canviant"/>
	    </in>
	  </test>
	  <choose>
	    <when>
	      <test>
		<or>
		  <equal>
		    <var n="nombre"/>
		    <lit-tag v="sg_slpl"/>
		  </equal>
		  <and><!--perquè no doni error en casos (errors original) com 'uns arbre' -->
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="pl"/>
		    </equal>
		  </and>
		</or>
	      </test>
	      <choose>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="some"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="a"/>
		    </get-case-from>
		  </let>
		  <let>
		    <clip pos="1" side="tl" part="a_det"/>
		    <lit-tag v="det.ind"/>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="other"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="another"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="few"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="little"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="how many"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="how much"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="fewer"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="less"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="many"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="much"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="so many"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="so much"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="too many"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="too much"/>
		    </get-case-from>
		  </let>
		</when>
	      </choose>
	    </when>

	    <when>
	      <test>
		<or>
		  <equal>
		    <var n="nombre"/>
		    <lit-tag v="pl_slsg"/>
		  </equal>
		  <and><!--perquè no doni error en casos com 'un Cases' -->
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="pl"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</or>
	      </test>
	      <choose>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="a"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="some"/>
		    </get-case-from>
		  </let>
		  <let>
		    <clip pos="1" side="tl" part="a_det"/>
		    <lit-tag v="det.qnt"/>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="another"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="other"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="little"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="few"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="how much"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="how many"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="less"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="fewer"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="much"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="many"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="so much"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="so many"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal caseless="yes">
		      <clip pos="1" side="tl" part="lem"/>
		      <lit v="too much"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="too many"/>
		    </get-case-from>
		  </let>
		</when>
	      </choose>
	    </when>

	    <when>
	      <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="menys"/>
		</equal>
	      </test>
	      <choose>
		<when>
		  <test>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="less"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="pl"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="fewer"/>
		    </get-case-from>
		  </let>
		</when>
	      </choose>
	    </when>
	    <when>
	      <test>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>
		  <lit v="massa"/>
		</equal>
	      </test>
	      <choose>
		<when>
		  <test>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="too much"/>
		    </get-case-from>
		  </let>
		</when>
		<when>
		  <test>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="pl"/>
		    </equal>
		  </test>
		  <let>
		    <clip pos="1" side="tl" part="lem"/>
		    <get-case-from pos="1">
		      <lit v="too many"/>
		    </get-case-from>
		  </let>
		</when>
	      </choose>
	    </when>
	  </choose>
	</when>

      </choose>
    </def-macro>

  </section-def-macros> 

  <section-rules>




    <!--*************************************** REGLES DE SN ******************************************** -->

    <rule comment="REGLA: NOM (per a col·locar la cua en les multiparaules amb g">
      <pattern>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: ANTROPÒNIM">
      <pattern>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="1" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ANTROPÒNIM (La Maria - Maria)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="REGLA: DET NOM">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="tags"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="REGLA: NOM ADJ">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ ADJ">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<out> 
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    


    <rule comment="REGLA: DET NOM ADJ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="REGLA: NUM NOM ADJ">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lem"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>       
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>  
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: DET NOM ADV ADJ">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: NUM NOM ADV ADJ">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<out>  
	  <chunk name="num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>   
	      <clip pos="4" side="tl" part="lem"/> 
	      <clip pos="4" side="tl" part="a_adj"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>         
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
	</out>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="REGLA: NOM ADJ conj ADJ NOM (aspecte fràgil i tímida aparença -> fragile look and shy appearance. Regla creada perquè no entrin frases que no toquen en la regla següent">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="4" side="sl" part="gen"/>
		  <clip pos="5" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="4" side="sl" part="nbr"/>
		  <clip pos="5" side="sl" part="nbr"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="nom_adj_coo_adj_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="1" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		</lu> 
		<b pos="1"/>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/>  
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		</lu> 
		<b pos="4"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/> 
		  <clip pos="5" side="tl" part="a_nom"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <clip pos="5" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out> 
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="1" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		</lu> 
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/> 
		</lu>
		<b pos="2"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		</lu> 
		<b pos="3"/>
		<lu>       
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/>  
		</lu>
	      </chunk>	      
	      <b pos="4"/>
	    </out>
	    <call-macro n="nombre_nom">
	      <with-param pos="5"/>
	    </call-macro>
	    <out>
	      <chunk name="nom">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="5" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/> 
		  <clip pos="5" side="tl" part="a_nom"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <clip pos="5" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ conj ADJ (aspecte fràgil i tímid -> fragile and shy look">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action><!--Pot haver-hi errors per lo de mf perquè pot ser que un sigui m i l'altra f perquè el tagger s'hagi equivocat (noia bonica i interessant). No donarà error en frases com "aspecte fràgil i tímida aparença" perquè entraran per la regla anterior. -->
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
<!--	<choose>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <clip pos="4" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <clip pos="4" side="sl" part="nbr"/>
		</equal>
	      </and>
	    </test> -->
	    <out> 
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="1" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		</lu> 
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/> 
		</lu>
		<b pos="2"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		</lu> 
		<b pos="3"/>
		<lu>       
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
	<!--  </when>
	  <otherwise>
	    <out>
	      <chunk name="nom_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="1" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		</lu> 
		<b pos="1"/>
		<lu>       
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_nom"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/>  
		</lu>
	      </chunk>	       
	      <b pos="2"/>
	      <chunk name="coo_adj">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="4" side="sl" part="gen"/></tag>
		  <tag><clip pos="4" side="sl" part="nbr"/></tag>
		</tags>		 
		<lu>
		  <clip pos="3" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_adj"/>
		</lu>
	      </chunk>
	    </out>	 
	  </otherwise>
	</choose>      --> 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: DET NOM ADJ conj ADJ NOM (un aspecte fràgil i tímida aparença -> a fragile look and shy appearance. Regla creada perquè no entrin frases que no toquen en la regla següent)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="5" side="sl" part="gen"/>
		  <clip pos="6" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="5" side="sl" part="nbr"/>
		  <clip pos="6" side="sl" part="nbr"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="det_nom_adj_coo_adj_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>

		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="2" side="tl" part="nbr"/>
		</lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="4"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		</lu> 
		<b pos="5"/>
		<lu>
		  <clip pos="6" side="tl" part="lemh"/> 
		  <clip pos="6" side="tl" part="a_nom"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <clip pos="6" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out> 
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="2" side="tl" part="nbr"/>
		</lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		</lu> 
		<b pos="4"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	      <b pos="5"/>
	    </out>	    
	    <call-macro n="nombre_nom">
	      <with-param pos="6"/>
	    </call-macro>
	    <out>
	      <chunk name="nom">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="6" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>
		  <clip pos="6" side="tl" part="lemh"/> 
		  <clip pos="6" side="tl" part="a_nom"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <clip pos="6" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>       
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: DET NOM ADJ conj ADJ (un aspecte fràgil i tímid -> a fragile and shy look">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
<!--	<choose>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <clip pos="5" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <clip pos="5" side="sl" part="nbr"/>
		</equal>
	      </and>		
	    </test> -->
	    <out> 
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="2" side="tl" part="nbr"/>
		</lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="3"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		</lu> 
		<b pos="4"/>
		<lu>       
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>
	    </out>
<!--	  </when>
	  <otherwise>	      
	    <out>
	      <chunk name="det_nom_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="2" side="tl" part="nbr"/>
		</lu>
		<b pos="1"/>
		<lu>   
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_adj"/>
		</lu> 
		<b pos="2"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/>  
		</lu>
	      </chunk>	       
	      <b pos="3"/>
	      <chunk name="coo_adj">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="5" side="sl" part="gen"/></tag>
		  <tag><clip pos="5" side="sl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="4" side="tl" part="whole"/> 
		</lu>
		<b pos="4"/>
		<lu>   
		  <clip pos="5" side="tl" part="lem"/> 
		  <clip pos="5" side="tl" part="a_adj"/>
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>
	</choose>     -->  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda)">
      <pattern>
	<pattern-item n="adj"/>
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


    <rule comment="REGLA: ADV ADJECTIU (per a fer comparatius i superlatius: 'més llarg - longer')">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/> 
		  <lit v="més"/>
		</equal>
		<equal>
		  <clip pos="2" side="tl" part="a_adj"/> 
		  <lit-tag v="adj.sint"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
		</tags>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		  <lit-tag v="comp"/>
		</lu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>	 
	    <out>
	      <chunk name="adv_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="whole"/> 
		</lu> 
		<b pos="1"/>
		<lu>   
		  <clip pos="2" side="tl" part="lem"/> 
		  <clip pos="2" side="tl" part="a_adj"/>
		</lu>
	      </chunk>
	    </out>
	  </otherwise>
	</choose>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 


    <rule comment="REGLA: DETERMINANT (perquè no doni error si va davant de desconegudes i no es pot assignar nombre)">
      <pattern>
	<pattern-item n="det"/>
      </pattern>
      <action>        	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>  
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <!-- *************************************** REGLES DE SV *********************************************** -->


    <rule comment="REGLA: CALDRE">
      <pattern>
	<pattern-item n="caldre"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when><!--Si és en sg, envia el pronom subjecte 'it'. En plural caldria fer transformacions al t2x (calen 3 persones - 3 persons are necessary) -->
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="prpers" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><lit-tag  v="subj"/></tag>
		  <tag><lit-tag  v="p3"/></tag>
		  <tag><lit-tag  v="nt"/></tag>
		  <tag><lit-tag  v="sg"/></tag>
		</tags>
		<lu>   
		  <lit v="prpers"/>  
		  <lit-tag v="prn"/>  
		  <lit-tag v="2"/> 
		  <lit-tag v="p3"/>
		  <lit-tag v="nt"/>
		  <lit-tag v="sg"/>
		</lu> 
	      </chunk>
	      <b/>
	    </out>  
	  </when>
	</choose>	  
	<choose>
	  <when>
	    <test>
	      <and>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="ifi"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="pii"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="pis"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="prs"/>
		  </equal>
		</or>		
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="past"/>
	    </let>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  
	  <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
	    <choose>
	      <when>
		<test> 
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_verb" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/> 
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>  
	      <when>
		<test>		 
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>	
		<out>
		  <chunk name="aux_verb" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/> 
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="prs"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="ifi"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pii"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pis"/>
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>	 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: VERB conjugat">
      <pattern>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test><!--Si és verb 'ser' p1 o p3 en present o passat (o subjuntiu) té una conjugació pròpia en anglès. Inclou 'ser' i 'estar', tots dos són 'vbser' en anglès (to be) -->
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="ifi"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="pii"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="pis"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="prs"/>
		  </equal>
		</or>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="past"/>
	    </let>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when> 
	    <test><!--La resta de verbs tenen també prs i nbr per a p3 sg, excepte auxiliars (can). -->
	      <and>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="pers"/>
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
		<not>
		  <equal caseless="yes">
		    <clip pos="1" side="sl" part="lem"/> 
		    <lit v="poder"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
	    <choose>
	      <when>
		<test> 
		  <and>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		    <not>
		      <equal caseless="yes">
			<clip pos="1" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </not>
		  </and>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_verb" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/> 
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test> 
		  <and>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		    <equal caseless="yes">
		      <clip pos="1" side="sl" part="lem"/> 
		      <lit v="poder"/>
		    </equal>
		  </and>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>

	      <when>
		<test>		 
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<choose>
		  <when>
		    <test>
		      <equal caseless="yes">
			<clip pos="1" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </test>
		    <let>		     
		      <clip pos="1" side="tl" part="lem"/>
		      <get-case-from pos="1">
			<lit v="be able to"/>
		      </get-case-from>
		    </let>
		    <let>		     
		      <clip pos="1" side="tl" part="a_verb"/>
		      <lit-tag v="vbmod"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="aux_verb" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>

	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/> 
		      <lit-tag v="pri"/><!--dic -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="prs"/><!--digui -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="ifi"/><!--digué -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pii"/><!--deia -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pis"/><!--digués -->
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>	 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="ANAR + INF (vaig venir - came)">
      <pattern>
	<pattern-item n="anar"/> 
	<pattern-item n="inf"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	<let>
	  <clip pos="2" side="tl" part="temps"/>		     
	  <lit-tag v="past"/>
	</let>
	<choose>
	  <when>
	    <test><!--Si és verb 'ser' p1 o p3  té una conjugació pròpia en anglès -->
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>          
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="lemq"/>                  
		</lu> 
	      </chunk>
	    </out>  
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
	</call-macro>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="ANAR + INF +enc (vaig comprar-los - bought them)">
      <pattern>
	<pattern-item n="anar"/> 
	<pattern-item n="inf"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	<let>
	  <clip pos="2" side="tl" part="temps"/>		     
	  <lit-tag v="past"/>
	</let>
	<choose>      
	  <when>
	    <!-- si el verb és separable i no és pronominal, posa el clític entre el verb i la cua (vaig treure'l -> took it out)-->
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="sep"/>
		  <lit-tag v="sep"/>	
		</equal>
		<not>
		  <equal>
		    <clip pos="2" side="sl" part="pron"/>
		    <lit-tag v="pron"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags> 
		<mlu>
		  <lu>
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <clip pos="2" side="tl" part="sep"/>
		    <clip pos="2" side="tl" part="temps" link-to="3"/> 
		  </lu>  
		  <lu>
		    <clip pos="3" side="tl" part="lem"/>
		    <clip pos="3" side="tl" part="a_prn"/>
		    <clip pos="3" side="tl" part="tipus_prn"/>
		    <clip pos="3" side="tl" part="pers"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <clip pos="3" side="tl" part="nbr"/>		           
		    <clip pos="2" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond"> <!-- si cal, enviem els blancs -->
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="f_bcond"> 
	      <with-param pos="2"/>
	    </call-macro>
	  </when>
	  <otherwise> <!--si no és un verb separable...-->
	    <choose>
	      <when>
		<test><!--mirem si és el verb "ser" -->
		  <and>
		    <equal>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <lit-tag v="vbser"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="1" side="sl" part="pers"/>
			<lit-tag v="p1"/>
		      </equal>
		      <equal>
			<clip pos="1" side="sl" part="pers"/>
			<lit-tag v="p3"/>
		      </equal>
		    </or>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="pers"/>
		      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <otherwise> <!-- si no és el verb ser, l'enviem sense pers ni nbr-->
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>          
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/>                  
		    </lu> 
		  </chunk>
		</out>  
	      </otherwise>
	    </choose>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>  
	    <choose><!--I ara que ja hem imprès el verb, mirem els proclítics -->
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="3" side="sl" part="pers"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="3" side="sl" part="nbr"/>
		      </equal>
		      <equal>
			<clip pos="3" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </or>
		  </and>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="2"/>
		</call-macro>
	      </when>
	      <otherwise>
		
		<out>
		  <b pos="2"/>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>  
	  </otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
	 
    <rule comment="pro ANAR + INF (els vaig comprar - bought them)">
      <pattern>
	<pattern-item n="pro"/> 
	<pattern-item n="anar"/> 
	<pattern-item n="inf"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	<let>
	  <clip pos="3" side="tl" part="temps"/>		     
	  <lit-tag v="past"/>
	</let>
	<choose>    <!--Mira si és 'haver-hi' (hi vaig anar) -->
	  <when>
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>		     
		  <lit v="hi"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="lem"/>		     
		  <lit v="haver"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="pers"/>		     
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>		     
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="be"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="vbser"/>
	    </let>
	    <out>
	      <chunk name="haverhi" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags>
		<lu>
		  <lit v="there"/> 
		  <lit-tag v="adv"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lem"/> 
		  <clip pos="3" side="tl" part="a_verb"/> 
		  <clip pos="3" side="tl" part="temps"/> 
		  <clip pos="2" side="tl" part="pers"/> 		 
		  <lit-tag v="5"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>

	  <when>
	    <!-- si el verb és separable i no és pronominal, posa el clític entre el verb i la cua (vaig treure'l -> took it out)-->
	    <test>
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="sep"/>
		  <lit-tag v="sep"/>	
		</equal>
		<not>
		  <equal>
		    <clip pos="3" side="sl" part="pron"/>
		    <lit-tag v="pron"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags> 
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>
		    <clip pos="3" side="tl" part="a_verb"/>
		    <clip pos="3" side="tl" part="sep"/>
		    <clip pos="3" side="tl" part="temps" link-to="3"/> 
		  </lu>  
		  <lu>
		    <clip pos="1" side="tl" part="lem"/>
		    <clip pos="1" side="tl" part="a_prn"/>
		    <clip pos="1" side="tl" part="tipus_prn"/>
		    <clip pos="1" side="tl" part="pers"/>
		    <clip pos="1" side="tl" part="gen"/>
		    <clip pos="1" side="tl" part="nbr"/>		           
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond"> <!-- si cal, enviem els blancs -->
	      <with-param pos="1"/>
	    </call-macro>
	    <call-macro n="f_bcond"> 
	      <with-param pos="2"/>
	    </call-macro>
	  </when>
	  <otherwise> <!--si no és un verb separable...-->
	    <choose>
	      <when>
		<test><!--mirem si és el verb "ser" -->
		  <and>
		    <equal>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <lit-tag v="vbser"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="2" side="sl" part="pers"/>
			<lit-tag v="p1"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="pers"/>
			<lit-tag v="p3"/>
		      </equal>
		    </or>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="pers"/>
		      <clip pos="2" side="tl" part="nbr"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <otherwise> <!-- si no és el verb ser, l'enviem sense pers ni nbr-->
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>          
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/>
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/>                  
		    </lu> 
		  </chunk>
		</out>  
	      </otherwise>
	    </choose>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>  
	    <choose><!--I ara que ja hem imprès el verb, mirem els proclítics -->
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="3" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="2" side="sl" part="pers"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="2" side="sl" part="nbr"/>
		      </equal>
		      <equal>
			<clip pos="1" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </or>
		  </and>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="2"/>
		</call-macro>
	      </when>
	      <otherwise>
		
		<out>
		  <b pos="2"/>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>  
	  </otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    

    <rule comment="HAVER + PP (han vist - have seen)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="pp"/> 
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="sl" part="lem"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/> 
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="2" side="tl" part="a_pp"/> 
	      <lit-tag v="vbmod.pp"/>
	    </let>
	  </when>
	</choose>
	<choose>		  
	  <when> 
	    <test><!--tenen prs i nbr per a p3 sg. -->
	      <and>
		<equal>
		  <clip pos="1" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="pers"/>
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="haver_pp" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/> 
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/>
		  <clip pos="1" side="tl" part="pers"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="tl" part="lemq"/> 
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_pp"/>
		  <clip pos="2" side="tl" part="lemq"/>    
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
	    <choose>
	      <when>
		<test> 
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="cni"/>
		  </equal>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/> 
		      <clip pos="1" side="tl" part="sep"/>
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_pp"/>
		      <clip pos="2" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>		 
		  <equal>
		    <clip pos="1" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>		   
		<out>
		  <chunk name="aux_haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_pp"/>
		      <clip pos="2" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/> 
		      <lit-tag v="pri"/><!--dic -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="prs"/><!--digui -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/> 
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_pp"/>
		      <clip pos="2" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="ifi"/><!--digué -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pii"/><!--deia -->
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="temps"/>
		      <lit-tag v="pis"/><!--digués -->
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="1" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_pp"/>
		      <clip pos="2" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--les formes no personals (inf i ger) -->
		<out>
		  <chunk name="haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/> 
		      <clip pos="1" side="tl" part="a_verb"/> 
		      <clip pos="1" side="tl" part="sep"/> 
		      <clip pos="1" side="tl" part="temps"/>
		      <clip pos="1" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_pp"/>
		      <clip pos="2" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </otherwise>
	</choose>	 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="pro HAVER + PP (l'han vist - have seen it)">
      <pattern>
	<pattern-item n="pro"/> 
	<pattern-item n="haver"/> 
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<choose>
	  <when><!--Mira si és 'haver-hi' -->
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>		     
		  <lit v="hi"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="lem"/>		     
		  <lit v="haver"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="pers"/>		     
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>		     
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="be"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="vbser"/>
	    </let>
	    <choose>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="prs"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>
		  <lit-tag v="pri"/>
		</let>
		<out>
		  <chunk name="haverhi_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lem"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="temps"/> 
		      <clip pos="2" side="tl" part="pers"/> 		 
		      <lit-tag v="5"/> 
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_pp"/>
		    </lu> 		  
		  </chunk>
		</out>
	      </when>
	       <when>
		 <test>
		   <or>
		     <equal>
		       <clip pos="2" side="sl" part="temps"/>
		       <lit-tag v="ifi"/>
		     </equal>
		     <equal>
		       <clip pos="2" side="sl" part="temps"/>
		       <lit-tag v="pii"/>
		     </equal>
		     <equal>
		       <clip pos="2" side="sl" part="temps"/>
		       <lit-tag v="pis"/>
		     </equal>
		   </or>
		 </test>		   
		 <let>
		   <clip pos="2" side="tl" part="temps"/>		     
		   <lit-tag v="past"/>
		 </let>
		 <out>
		  <chunk name="haverhi_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lem"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="temps"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_pp"/>
		    </lu> 		  
		  </chunk>
		</out>
	       </when>
	      <otherwise>
		<choose>
		  <when>
		    <test>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		  <when>
		    <test>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="fti"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="haverhi_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <var n="auxiliar"/>
		      <clip pos="2" side="tl" part="lem"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="temps"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_pp"/>
		    </lu> 		  
		  </chunk>
		</out>
		<let>
		  <var n="auxiliar"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise><!--Si no és 'haver-hi' -->
	    <choose>

	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="sl" part="lem"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/> 
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="a_pp"/> 
	      <lit-tag v="vbmod.pp"/>
	    </let>
	  </when>
	</choose>
	<!-- aquí s'ha de mirar la separabilitat-->
	<choose>
	  <when>
	    <!-- si el verb és separable i no és pronominal, posa el clític entre el verb i la cua (l'he tret -> have taken it out)-->
	    <test>
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="sep"/>
		  <lit-tag v="sep"/>	
		</equal>
		<not>
		  <equal>
		    <clip pos="3" side="sl" part="pron"/>
		    <lit-tag v="pron"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <choose>	
	      <when> 
		<test><!--tenen prs i nbr per a p3 sg. -->
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="pers"/>
		      <lit-tag v="p3"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="haver_pp_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="pers"/>
		      <clip pos="2" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="1"/>
		    <mlu>
		      <lu>
			<clip pos="3" side="tl" part="lemh"/> 
			<clip pos="3" side="tl" part="a_pp"/>
		      </lu> 
		      <lu>
			<clip pos="1" side="tl" part="lem"/>
			<clip pos="1" side="tl" part="a_prn"/>
			<clip pos="1" side="tl" part="tipus_prn"/>
			<clip pos="1" side="tl" part="pers"/>
			<clip pos="1" side="tl" part="gen"/>
			<clip pos="1" side="tl" part="nbr"/>		           
			<clip pos="3" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
		<choose>
		  <when>
		    <test> 
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		    <out>
		      <chunk name="aux_haver_pp_enc" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <lit v="would"/>
			  <lit-tag v="vaux.inf"/>
			</lu>
			<b pos="1"/>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/> 
			  <clip pos="2" side="tl" part="sep"/>
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
			<b/>
			<mlu>
			  <lu>
			    <clip pos="3" side="tl" part="lemh"/> 
			    <clip pos="3" side="tl" part="a_pp"/>
			  </lu> 
			  <lu>
			    <clip pos="1" side="tl" part="lem"/>
			    <clip pos="1" side="tl" part="a_prn"/>
			    <clip pos="1" side="tl" part="tipus_prn"/>
			    <clip pos="1" side="tl" part="pers"/>
			    <clip pos="1" side="tl" part="gen"/>
			    <clip pos="1" side="tl" part="nbr"/>		           
			    <clip pos="3" side="tl" part="lemq"/>
			  </lu> 
			</mlu>
		      </chunk>
		    </out>
		  </when>
		  <otherwise>
		    <choose>
		      <when>
			<test>		 
			  <equal>
			    <clip pos="2" side="sl" part="temps"/>
			    <lit-tag v="fti"/>
			  </equal>
			</test>
			<let>
			  <clip pos="2" side="tl" part="temps"/>		     
			  <lit-tag v="inf"/>
			</let>		   
			<out>
			  <chunk name="aux_haver_pp" case="caseFirstWord">
			    <tags>
			      <tag><lit-tag v="SV"/></tag>
			      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="2" side="sl" part="temps"/></tag>
			      <tag><clip pos="2" side="tl" part="pers"/></tag>
			      <tag><clip pos="2" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <lit v="will"/>
			      <lit-tag v="vaux.inf"/>
			    </lu>
			    <b pos="1"/>
			    <lu>
			      <clip pos="2" side="tl" part="lemh"/> 
			      <clip pos="2" side="tl" part="a_verb"/>
			      <clip pos="2" side="tl" part="sep"/> 
			      <clip pos="2" side="tl" part="temps"/>
			      <clip pos="2" side="tl" part="lemq"/> 
			    </lu>
			    <b/>
			    <mlu>
			      <lu>
				<clip pos="3" side="tl" part="lemh"/> 
				<clip pos="3" side="tl" part="a_pp"/>
			      </lu> 
			      <lu>
				<clip pos="1" side="tl" part="lem"/>
				<clip pos="1" side="tl" part="a_prn"/>
				<clip pos="1" side="tl" part="tipus_prn"/>
				<clip pos="1" side="tl" part="pers"/>
				<clip pos="1" side="tl" part="gen"/>
				<clip pos="1" side="tl" part="nbr"/>		           
				<clip pos="3" side="tl" part="lemq"/>
			      </lu> 
			    </mlu>
			  </chunk>
			</out>
		      </when>
		      <otherwise>
			<choose>
			  <when>
			    <test>
			      <or>
				<equal>
				  <clip pos="2" side="sl" part="temps"/> 
				  <lit-tag v="pri"/><!--dic -->
				</equal>
				<equal>
				  <clip pos="2" side="sl" part="temps"/>
				  <lit-tag v="prs"/><!--digui -->
				</equal>
				<equal>
				  <clip pos="2" side="sl" part="temps"/>
				  <lit-tag v="imp"/>
				</equal>
			      </or>
			    </test>
			    <let>
			      <clip pos="2" side="tl" part="temps"/>		     
			      <lit-tag v="pres"/>
			    </let>
			  </when>
			  <otherwise>
			    <choose>
			      <when>
				<test>
				  <or>
				    <equal>
				      <clip pos="2" side="sl" part="temps"/>
				      <lit-tag v="ifi"/><!--digué -->
				    </equal>
				    <equal>
				      <clip pos="2" side="sl" part="temps"/>
				      <lit-tag v="pii"/><!--deia -->
				    </equal>
				    <equal>
				      <clip pos="2" side="sl" part="temps"/>
				      <lit-tag v="pis"/><!--digués -->
				    </equal>
				  </or>
				</test>		   
				<let>
				  <clip pos="2" side="tl" part="temps"/>		     
				  <lit-tag v="past"/>
				</let>
			      </when>
			    </choose>
			  </otherwise>
			</choose>
			<out>
			  <chunk name="haver_pp_enc" case="caseFirstWord">
			    <tags>
			      <tag><lit-tag v="SV"/></tag>
			      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="2" side="sl" part="temps"/></tag>
			      <tag><clip pos="2" side="tl" part="pers"/></tag>
			      <tag><clip pos="2" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <clip pos="2" side="tl" part="lemh"/> 
			      <clip pos="2" side="tl" part="a_verb"/>
			      <clip pos="2" side="tl" part="sep"/> 
			      <clip pos="2" side="tl" part="temps"/>
			      <clip pos="2" side="tl" part="lemq"/> 
			    </lu>
			    <b pos="1"/>
			    <mlu>
			      <lu>
				<clip pos="3" side="tl" part="lemh"/> 
				<clip pos="3" side="tl" part="a_pp"/>
			      </lu> 
			      <lu>
				<clip pos="1" side="tl" part="lem"/>
				<clip pos="1" side="tl" part="a_prn"/>
				<clip pos="1" side="tl" part="tipus_prn"/>
				<clip pos="1" side="tl" part="pers"/>
				<clip pos="1" side="tl" part="gen"/>
				<clip pos="1" side="tl" part="nbr"/>		           
				<clip pos="3" side="tl" part="lemq"/>
			      </lu> 
			    </mlu>
			  </chunk>
			</out>
		      </otherwise>
		    </choose>
		  </otherwise>
		</choose>
	      </otherwise>
	    </choose>	 <!-- ... i després enviem el prn (si cal)-->
	  </when>
	  <otherwise> <!-- si no és separable: -->
	    <choose>	<!-- primer arreglem i enviem el verb -->
	      <when> 
		<test><!--tenen prs i nbr per a p3 sg. -->
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="pers"/>
		      <lit-tag v="p3"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="pers"/>
		      <clip pos="2" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_pp"/>
		      <clip pos="3" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
		<choose>
		  <when>
		    <test> 
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		    <out>
		      <chunk name="aux_haver_pp" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <lit v="would"/>
			  <lit-tag v="vaux.inf"/>
			</lu>
			<b pos="1"/>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/> 
			  <clip pos="2" side="tl" part="sep"/>
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
			<b/>
			<lu>
			  <clip pos="3" side="tl" part="lemh"/> 
			  <clip pos="3" side="tl" part="a_pp"/>
			  <clip pos="3" side="tl" part="lemq"/>    
			</lu> 
		      </chunk>
		    </out>
		  </when>
		  <otherwise>
		    <choose>
		      <when>
			<test>		 
			  <equal>
			    <clip pos="2" side="sl" part="temps"/>
			    <lit-tag v="fti"/>
			  </equal>
			</test>
			<let>
			  <clip pos="2" side="tl" part="temps"/>		     
			  <lit-tag v="inf"/>
			</let>		   
			<out>
			  <chunk name="aux_haver_pp" case="caseFirstWord">
			    <tags>
			      <tag><lit-tag v="SV"/></tag>
			      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="2" side="sl" part="temps"/></tag>
			      <tag><clip pos="2" side="tl" part="pers"/></tag>
			      <tag><clip pos="2" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <lit v="will"/>
			      <lit-tag v="vaux.inf"/>
			    </lu>
			    <b pos="1"/>
			    <lu>
			      <clip pos="2" side="tl" part="lemh"/> 
			      <clip pos="2" side="tl" part="a_verb"/>
			      <clip pos="2" side="tl" part="sep"/> 
			      <clip pos="2" side="tl" part="temps"/>
			      <clip pos="2" side="tl" part="lemq"/> 
			    </lu>
			    <b/>
			    <lu>
			      <clip pos="3" side="tl" part="lemh"/> 
			      <clip pos="3" side="tl" part="a_pp"/>
			      <clip pos="3" side="tl" part="lemq"/>    
			    </lu> 
			  </chunk>
			</out>
		      </when>
		      <otherwise>
			<choose>
			  <when>
			    <test>
			      <or>
				<equal>
				  <clip pos="2" side="sl" part="temps"/> 
				  <lit-tag v="pri"/><!--dic -->
				</equal>
				<equal>
				  <clip pos="2" side="sl" part="temps"/>
				  <lit-tag v="prs"/><!--digui -->
				</equal>
				<equal>
				  <clip pos="2" side="sl" part="temps"/>
				  <lit-tag v="imp"/>
				</equal>
			      </or>
			    </test>
			    <let>
			      <clip pos="2" side="tl" part="temps"/>		     
			      <lit-tag v="pres"/>
			    </let>
			  </when>
			  <otherwise>
			    <choose>
			      <when>
				<test>
				  <or>
				    <equal>
				      <clip pos="2" side="sl" part="temps"/>
				      <lit-tag v="ifi"/><!--digué -->
				    </equal>
				    <equal>
				      <clip pos="2" side="sl" part="temps"/>
				      <lit-tag v="pii"/><!--deia -->
				    </equal>
				    <equal>
				      <clip pos="2" side="sl" part="temps"/>
				      <lit-tag v="pis"/><!--digués -->
				    </equal>
				  </or>
				</test>		   
				<let>
				  <clip pos="2" side="tl" part="temps"/>		     
				  <lit-tag v="past"/>
				</let>
			      </when>
			    </choose>
			  </otherwise>
			</choose>
			<out>
			  <chunk name="haver_pp" case="caseFirstWord">
			    <tags>
			      <tag><lit-tag v="SV"/></tag>
			      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="2" side="sl" part="temps"/></tag>
			      <tag><clip pos="2" side="tl" part="pers"/></tag>
			      <tag><clip pos="2" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <clip pos="2" side="tl" part="lemh"/> 
			      <clip pos="2" side="tl" part="a_verb"/>
			      <clip pos="2" side="tl" part="sep"/> 
			      <clip pos="2" side="tl" part="temps"/>
			      <clip pos="2" side="tl" part="lemq"/> 
			    </lu>
			    <b pos="1"/>
			    <lu>
			      <clip pos="3" side="tl" part="lemh"/> 
			      <clip pos="3" side="tl" part="a_pp"/>
			      <clip pos="3" side="tl" part="lemq"/>    
			    </lu> 
			  </chunk>
			</out>
		      </otherwise>
		    </choose>
		  </otherwise>
		</choose>
	      </otherwise>
	    </choose>	 <!-- ... i després enviem el prn (si cal)-->
	    <choose>
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="3" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="2" side="sl" part="pers"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="2" side="sl" part="nbr"/>
		      </equal>
		      <equal>
			<clip pos="1" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </or>
		  </and>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="2"/>
		</call-macro>
	      </when>
	      <otherwise>
		<out>
		  <b pos="2"/>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>  
	  </otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </otherwise>
	</choose>
      </action>
    </rule>
	 
	 


    <rule comment="PER + INF (per ajudar - to help (en general; cal estudiar quan hi va gerundi)">
      <pattern>
	<pattern-item n="per"/> 
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<out>
	  <chunk name="to" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="to"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>          
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="sep"/>
	      <clip pos="2" side="tl" part="temps" link-to="3"/>
	      <clip pos="2" side="tl" part="lemq"/>                  
	    </lu>  
	  </chunk>
	</out>   
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: PROCLÍTIC VERB conjugat">
      <pattern>
	<pattern-item n="pro"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when><!--Mira si és 'haver-hi' -->
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="1" side="sl" part="lem"/>		     
		  <lit v="hi"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="lem"/>		     
		  <lit v="haver"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="pers"/>		     
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>		     
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit v="be"/>
	    </let>
	    <let>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="vbser"/>
	    </let>
	    <choose>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="prs"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="pri"/>
		</let>
		<out>
		  <chunk name="haverhi" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lem"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="temps"/> 
		      <clip pos="2" side="tl" part="pers"/> 		 
		      <lit-tag v="5"/> 
		    </lu>		  
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="ifi"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pii"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pis"/>
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="haverhi" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lem"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="temps"/> 
		      <clip pos="2" side="tl" part="pers"/> 		 
		      <lit-tag v="5"/> 
		    </lu>		  
		  </chunk>
		</out>
	      </when>		

	      <otherwise>
		<choose>
		  <when>
		    <test>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		  <when>
		    <test>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="fti"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="haverhi" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <var n="auxiliar"/>
		      <clip pos="2" side="tl" part="lem"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="temps"/>
		    </lu>		  
		  </chunk>
		</out>	
		<let>
		  <var n="auxiliar"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>
	  </when>

	  <otherwise><!--Si no és 'haver-hi-->
	    <choose>
	      <when>
		<test><!--Si és verb 'ser' p1 o p3 en present o passat (o subjuntiu) té una conjugació pròpia en anglès -->
		  <and>
		    <equal>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <lit-tag v="vbser"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="ifi"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="pii"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="pis"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="prs"/>
		      </equal>
		    </or>
		    <or>
		      <equal>
			<clip pos="2" side="sl" part="pers"/>
			<lit-tag v="p1"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="pers"/>
			<lit-tag v="p3"/>
		      </equal>
		    </or>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="pers"/>
		      <clip pos="2" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <lit-tag v="vbser"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="2" side="sl" part="pers"/>
			<lit-tag v="p1"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="pers"/>
			<lit-tag v="p3"/>
		      </equal>
		    </or>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="pers"/>
		      <clip pos="2" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when> 
		<test><!--La resta de verbs tenen també prs i nbr per a p3 sg, excepte auxiliars (can). -->
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="pers"/>
		      <lit-tag v="p3"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		    <not>
		      <equal caseless="yes">
			<clip pos="2" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </not>
		  </and>
		</test>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="pers"/>
		      <clip pos="2" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
		<choose>
		  <when>
		    <test> 
		      <and>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="cni"/>
			</equal>
			<not>
			  <equal caseless="yes">
			    <clip pos="2" side="sl" part="lem"/> 
			    <lit v="poder"/>
			  </equal>
			</not>
		      </and>
		    </test>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		    <out>
		      <chunk name="aux_verb" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <lit v="would"/>
			  <lit-tag v="vaux.inf"/>
			</lu>
			<b/>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/>
			  <clip pos="2" side="tl" part="sep"/> 
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
		      </chunk>
		    </out>
		  </when>
		  <when>
		    <test> 
		      <and>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="cni"/>
			</equal>
			<equal caseless="yes">
			  <clip pos="2" side="sl" part="lem"/> 
			  <lit v="poder"/>
			</equal>
		      </and>
		    </test>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="past"/>
		    </let>
		    <out>
		      <chunk name="verbcj" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/>
			  <clip pos="2" side="tl" part="sep"/> 
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
		      </chunk>
		    </out>
		  </when>

		  <when>
		    <test>		 
		      <equal>
			<clip pos="2" side="sl" part="temps"/>
			<lit-tag v="fti"/>
		      </equal>
		    </test>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		    <choose>
		      <when>
			<test>
			  <equal caseless="yes">
			    <clip pos="2" side="sl" part="lem"/> 
			    <lit v="poder"/>
			  </equal>
			</test>
			<let>		     
			  <clip pos="2" side="tl" part="lem"/>
			  <get-case-from pos="2">
			    <lit v="be able to"/>
			  </get-case-from>
			</let>
			<let>		     
			  <clip pos="2" side="tl" part="a_verb"/>
			  <lit-tag v="vbmod"/>
			</let>
		      </when>
		    </choose>
		    <out>
		      <chunk name="aux_verb" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <lit v="will"/>
			  <lit-tag v="vaux.inf"/>
			</lu>
			<b/>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/>
			  <clip pos="2" side="tl" part="sep"/> 
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
		      </chunk>
		    </out>
		  </when>

		  <when>
		    <test>
		      <or>
			<equal>
			  <clip pos="2" side="sl" part="temps"/> 
			  <lit-tag v="pri"/><!--dic -->
			</equal>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="prs"/><!--digui -->
			</equal>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="imp"/>
			</equal>
		      </or>
		    </test>
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="pres"/>
		    </let>
		    <out>
		      <chunk name="verbcj" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/>
			  <clip pos="2" side="tl" part="sep"/> 
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
		      </chunk>
		    </out>
		  </when>
		  <when>
		    <test>
		      <or>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="ifi"/><!--digué -->
			</equal>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="pii"/><!--deia -->
			</equal>
			<equal>
			  <clip pos="2" side="sl" part="temps"/>
			  <lit-tag v="pis"/><!--digués -->
			</equal>
		      </or>
		    </test>		   
		    <let>
		      <clip pos="2" side="tl" part="temps"/>		     
		      <lit-tag v="past"/>
		    </let>
		    <out>
		      <chunk name="verbcj" case="caseFirstWord">
			<tags>
			  <tag><lit-tag v="SV"/></tag>
			  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="2" side="sl" part="temps"/></tag>
			  <tag><clip pos="2" side="tl" part="pers"/></tag>
			  <tag><clip pos="2" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <clip pos="2" side="tl" part="lemh"/> 
			  <clip pos="2" side="tl" part="a_verb"/> 
			  <clip pos="2" side="tl" part="sep"/> 
			  <clip pos="2" side="tl" part="temps"/>
			  <clip pos="2" side="tl" part="lemq"/> 
			</lu>
		      </chunk>
		    </out>
		  </when>
		</choose>
	      </otherwise>
	    </choose>
	    <choose><!--I ara que ja hem imprès el verb, mirem els proclítics -->
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="2" side="sl" part="pers"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="2" side="sl" part="nbr"/>
		      </equal>
		      <equal>
			<clip pos="1" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </or>
		  </and>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="1"/>
		</call-macro>
	      </when>
	      <otherwise>
		
		<out>
		  <b pos="1"/>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
		
	      </otherwise>
	    </choose>  
	  </otherwise>
	</choose>
	    <let>
	      <var n="caseFirstWord"/>
	      <lit v="aa"/>
	    </let>
	  </action>
	</rule>



    <rule comment="VERB + ENCL (ajudar-me - help me)">
      <pattern>
	<pattern-item n="verbnm_inf_ger"/>
	<pattern-item n="enc"/> 
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	
	<choose>      
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="sep"/>
		<lit-tag v="sep"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="verb_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		</tags> 
		<mlu>
		  <lu>
		    <clip pos="1" side="tl" part="lemh"/>
		    <clip pos="1" side="tl" part="a_verb"/>
		    <clip pos="1" side="tl" part="sep"/>
		    <clip pos="1" side="tl" part="temps" link-to="3"/> 
		  </lu>  
		  <lu>
		    <clip pos="2" side="tl" part="lem"/>
		    <clip pos="2" side="tl" part="a_prn"/>
		    <clip pos="2" side="tl" part="tipus_prn"/>
		    <clip pos="2" side="tl" part="pers"/>
		    <clip pos="2" side="tl" part="gen"/>
		    <clip pos="2" side="tl" part="nbr"/>		           
		    <clip pos="1" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="verb_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="sl" part="temps"/></tag>
		</tags> 
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps" link-to="3"/> 	           
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>   
		<b/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>	
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>	   
	</choose>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="VERB + ENCL (ajuda'm - help me)">
      <pattern>
	<pattern-item n="verbnm_imp"/>
	<pattern-item n="enc"/> 
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<let>
	  <clip pos="1" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<choose>  
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="sl" part="pron"/>
		  <lit-tag v="pron"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="pers"/>
		  <clip pos="2" side="sl" part="pers"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <clip pos="2" side="sl" part="nbr"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="es"/><!--és 'sp' -->
		  </equal>
		</or>
	      </and>
	    </test>
	    <let><!--esborra el pronom quan coincideix en pers i nbr amb el verb pronominal -->
	      <clip pos="2" side="tl" part="whole"/>
	      <lit v=""/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="sep"/>
		<lit-tag v="sep"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="imp_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="sl" part="temps"/></tag>
		  <tag><clip pos="1" side="sl" part="pers"/></tag>
		  <tag><clip pos="1" side="sl" part="nbr"/></tag>
		</tags> 
		<mlu>
		  <lu>
		    <clip pos="1" side="tl" part="lemh"/>
		    <clip pos="1" side="tl" part="a_verb"/>
		    <clip pos="1" side="tl" part="sep"/>
		    <clip pos="1" side="tl" part="temps"/> 
		  </lu>  
		  <lu>
		    <clip pos="2" side="tl" part="lem"/>
		    <clip pos="2" side="tl" part="a_prn"/>
		    <clip pos="2" side="tl" part="tipus_prn"/>
		    <clip pos="2" side="tl" part="pers"/>
		    <clip pos="2" side="tl" part="gen"/>
		    <clip pos="2" side="tl" part="nbr"/>		           
		    <clip pos="1" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="imp_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="sl" part="temps"/></tag>
		  <tag><clip pos="1" side="sl" part="pers"/></tag>
		  <tag><clip pos="1" side="sl" part="nbr"/></tag>
		</tags> 
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="sep"/>
		  <clip pos="1" side="tl" part="temps"/> 	           
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>   
		<b/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>	
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>	   
	</choose>	  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERB + ENCL + ENCL (portar-me'ls - bring them to me)">
      <pattern>
	<pattern-item n="verbnm_inf_ger"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>           	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>     
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="whole"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    	
		<out>
		  <chunk name="verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="tl" part="temps"/></tag>
		    </tags> 
		    <mlu>
		      <lu>
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<clip pos="1" side="tl" part="sep"/>
			<clip pos="1" side="tl" part="temps" link-to="3"/> 
		      </lu>  
		      <lu>
			<clip pos="2" side="tl" part="lem"/>
			<clip pos="2" side="tl" part="a_prn"/>
			<clip pos="2" side="tl" part="tipus_prn"/>
			<clip pos="2" side="tl" part="pers"/>
			<clip pos="2" side="tl" part="gen"/>
			<clip pos="2" side="tl" part="nbr"/>		           
			<clip pos="1" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		    </tags> 
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/>
		      <clip pos="1" side="tl" part="temps" link-to="3"/>	           
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>   
		    <b/>   
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    	
		<out>
		  <chunk name="verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="tl" part="temps"/></tag>
		    </tags> 
		    <mlu>
		      <lu>
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<clip pos="1" side="tl" part="sep"/>
			<clip pos="1" side="tl" part="temps" link-to="3"/> 
		      </lu>  
		      <lu>
			<clip pos="3" side="tl" part="lem"/>
			<clip pos="3" side="tl" part="a_prn"/>
			<clip pos="3" side="tl" part="tipus_prn"/>
			<clip pos="3" side="tl" part="pers"/>
			<clip pos="3" side="tl" part="gen"/>
			<clip pos="3" side="tl" part="nbr"/>		           
			<clip pos="1" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		    </tags> 
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/>
		      <clip pos="1" side="tl" part="temps" link-to="3"/>	           
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>   
		    <b/>   
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="whole"/>
		      <lit v=""/>
		    </equal>
		  </not>
		</test>
		<out>
		  <b/>
		  <chunk name="to_prn">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>		 
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="VERB + ENCL + ENCL (porta-me'ls - bring them to me)">
      <pattern>
	<pattern-item n="verbnm_imp"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>           	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<let>
	  <clip pos="1" side="tl" part="temps"/>
	  <lit-tag v="inf"/>
	</let>
	<choose>  
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="sl" part="pron"/>
		  <lit-tag v="pron"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="pers"/>
		  <clip pos="2" side="sl" part="pers"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <clip pos="2" side="sl" part="nbr"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="es"/><!--és 'sp' -->
		  </equal>
		</or>
	      </and>
	    </test>
	    <let><!--esborra el pronom quan coincideix en pers i nbr amb el verb pronominal -->
	      <clip pos="2" side="tl" part="whole"/>
	      <lit v=""/>
	    </let>
	  </when>
	</choose>
	
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="whole"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    	
		<out>
		  <chunk name="imp_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags> 
		    <mlu>
		      <lu>
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<clip pos="1" side="tl" part="sep"/>
			<clip pos="1" side="tl" part="temps"/> 
		      </lu>  
		      <lu>
			<clip pos="2" side="tl" part="lem"/>
			<clip pos="2" side="tl" part="a_prn"/>
			<clip pos="2" side="tl" part="tipus_prn"/>
			<clip pos="2" side="tl" part="pers"/>
			<clip pos="2" side="tl" part="gen"/>
			<clip pos="2" side="tl" part="nbr"/>		           
			<clip pos="1" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="imp_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/>
		      <clip pos="1" side="tl" part="temps"/>	           
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>   
		    <b/>   
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="1" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    	
		<out>
		  <chunk name="imp_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <mlu>
		      <lu>
			<clip pos="1" side="tl" part="lemh"/>
			<clip pos="1" side="tl" part="a_verb"/>
			<clip pos="1" side="tl" part="sep"/>
			<clip pos="1" side="tl" part="temps"/> 
		      </lu>  
		      <lu>
			<clip pos="3" side="tl" part="lem"/>
			<clip pos="3" side="tl" part="a_prn"/>
			<clip pos="3" side="tl" part="tipus_prn"/>
			<clip pos="3" side="tl" part="pers"/>
			<clip pos="3" side="tl" part="gen"/>
			<clip pos="3" side="tl" part="nbr"/>		           
			<clip pos="1" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="imp_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="sl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="sep"/>
		      <clip pos="1" side="tl" part="temps"/>	           
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>   
		    <b/>   
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="whole"/>
		      <lit v=""/>
		    </equal>
		  </not>
		</test>
		<out>
		  <b/> 
		  <chunk name="to_prn">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="VERBMOD + ENCL + INF (poder-ho fer - be able to do it)(no he fet res per a pronominals, difícil fer la concordança de persona en frases que no són de 3a persona ('es'): per poder-te enamorar...">
      <pattern>
	<pattern-item n="verbm"/> <!-- aquí tb separaria entre inf/ger i imperatiu, per poder fer enllaços coherents en 'temps' i poder deixar temps 'sl' en imperatiu i 'tl' en inf i ger.-->
	<pattern-item n="enc"/> 
	<pattern-item n="inf"/>
      </pattern>
      <action>               	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <get-case-from pos="1">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="sep"/>
		<lit-tag v="sep"/>
	      </equal>
	    </test>   
	    <out>
	      <chunk name="mod_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="sl" part="pers"/></tag>
		  <tag><clip pos="1" side="sl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="temps" link-to="3"/>      
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>  
		<b pos="2"/>
		<mlu>
		  <lu>
		    <clip pos="3" side="tl" part="lemh"/>      
		    <clip pos="3" side="tl" part="a_verb"/>    
		    <clip pos="3" side="tl" part="sep"/>
		    <clip pos="3" side="tl" part="temps"/>
		  </lu>
		  <lu>
		    <clip pos="2" side="tl" part="lem"/>
		    <clip pos="2" side="tl" part="a_prn"/>
		    <clip pos="2" side="tl" part="tipus_prn"/>
		    <clip pos="2" side="tl" part="pers"/>
		    <clip pos="2" side="tl" part="gen"/>
		    <clip pos="2" side="tl" part="nbr"/>      
		    <clip pos="3" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>  
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="mod_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="1" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="sl" part="pers"/></tag>
		  <tag><clip pos="1" side="sl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_verb"/>
		  <clip pos="1" side="tl" part="temps" link-to="3"/>      
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>  
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>      
		  <clip pos="3" side="tl" part="a_verb"/>    
		  <clip pos="3" side="tl" part="sep"/>
		  <clip pos="3" side="tl" part="temps"/>      
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu> 
	      </chunk>
	    </out>  
	  </otherwise>
	</choose>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="VERBMOD + ENCL + ENCL + INF (poder-los-ho explicar -> be able to explain it to them)">
      <pattern>
	<pattern-item n="verbm"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="inf"/>
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <get-case-from pos="1">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>		     
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="whole"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="4" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>  
		<out>
		  <chunk name="mod_inf_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="temps" link-to="3"/>
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>
		    <b pos="3"/>
		    <mlu>
		      <lu>
			<clip pos="4" side="tl" part="lemh"/>      
			<clip pos="4" side="tl" part="a_verb"/>    
			<clip pos="4" side="tl" part="sep"/>
			<clip pos="4" side="tl" part="temps"/> 
		      </lu>
		      <lu>
			<clip pos="2" side="tl" part="lem"/>
			<clip pos="2" side="tl" part="a_prn"/>
			<clip pos="2" side="tl" part="tipus_prn"/>
			<clip pos="2" side="tl" part="pers"/>
			<clip pos="2" side="tl" part="gen"/>
			<clip pos="2" side="tl" part="nbr"/>     
			<clip pos="4" side="tl" part="lemq"/>
		      </lu>
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="mod_inf_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="temps" link-to="3"/>
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>
		    <b pos="3"/>
		    <lu>
		      <clip pos="4" side="tl" part="lemh"/>      
		      <clip pos="4" side="tl" part="a_verb"/>    
		      <clip pos="4" side="tl" part="sep"/>
		      <clip pos="4" side="tl" part="temps"/>      
		      <clip pos="4" side="tl" part="lemq"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="4" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    
		<out>
		  <chunk name="mod_inf_enc_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="temps" link-to="3"/>
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>
		    <b pos="3"/>
		    <mlu>
		      <lu>
			<clip pos="4" side="tl" part="lemh"/>      
			<clip pos="4" side="tl" part="a_verb"/>     
			<clip pos="4" side="tl" part="sep"/>
			<clip pos="4" side="tl" part="temps"/> 
		      </lu>
		      <lu>
			<clip pos="3" side="tl" part="lem"/>
			<clip pos="3" side="tl" part="a_prn"/>
			<clip pos="3" side="tl" part="tipus_prn"/>
			<clip pos="3" side="tl" part="pers"/>
			<clip pos="3" side="tl" part="gen"/>
			<clip pos="3" side="tl" part="nbr"/>     
			<clip pos="4" side="tl" part="lemq"/>
		      </lu>
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="mod_inf_enc_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="1" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="1" side="tl" part="lemh"/>
		      <clip pos="1" side="tl" part="a_verb"/>
		      <clip pos="1" side="tl" part="temps" link-to="3"/>
		      <clip pos="1" side="tl" part="lemq"/>
		    </lu>
		    <b pos="3"/>
		    <lu>
		      <clip pos="4" side="tl" part="lemh"/>      
		      <clip pos="4" side="tl" part="a_verb"/>
		      <clip pos="4" side="tl" part="temps"/>    
		      <clip pos="4" side="tl" part="lemq"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="whole"/>
		      <lit v=""/>
		    </equal>
		  </not>
		</test>
		<out>
		  <b/> 
		  <chunk name="to_prn">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBMOD + ENCL (per quan va davant desconegudes, perquè almenys no peti: poder-ho xxx - be able to it xxx)">
      <pattern>
	<pattern-item n="verbm"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>	  
	      <get-case-from pos="1">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>		     
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="mod_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>      
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	  
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule><!--VERBMOD + ENCL + ENCL (per quan va davant desconegudes, perquè almenys no peti: poder-los-ho xxx - be able to them it xxx)-->
      <pattern>
	<pattern-item n="verbm"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="temps"/>
	      <lit-tag v="inf"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>	  
	      <get-case-from pos="1">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>		     
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="mod_enc_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu> 
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>      
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>




    <rule comment="REGLA: PARTICIPI (perquè no enviï gènere ni nombre quan va sol (per tal que no doni error). Caldrà posar-lo tb en les regles d'adjectiu">
      <pattern>
	<pattern-item n="pp"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="sl" part="lem"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/> 
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="a_pp"/> 
	      <lit-tag v="vbmod.pp"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_pp"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: VERB no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="inf"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>     
	<out>
	  <chunk name="inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="sep"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERB no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="ger"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lemh"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>	    
	<out>
	  <chunk name="ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="sl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="sep"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <!--**************************** SV precedits d'adverbi (negacions i altres) -->


<!--
    NO FUNCIONA LA COLOCACIÓ DEL 'NO' EN T3X PER ARA
    <rule comment="REGLA: ADV CALDRE (no calia - it was not necessary)">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="caldre"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test><!-*-hauria de fer també una llista d'adverbis que van entre aux i verb (It is always necessary) -*->
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="negatiu"/>
	      <lit-tag v="NEG"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="negatiu"/>
	      <lit v=""/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose>

	<choose>
	  <when><!-*-Si és en sg, envia el pronom subjecte 'it'. En plural caldria fer transformacions al t2x (calen 3 persones - 3 persons are necessary) -*->
	    <test>
	      <equal>
		<clip pos="2" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="prpers" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><lit-tag  v="subj"/></tag>
		  <tag><lit-tag  v="p3"/></tag>
		  <tag><lit-tag  v="nt"/></tag>
		  <tag><lit-tag  v="sg"/></tag>
		</tags>
		<lu>   
		  <lit v="prpers"/>  
		  <lit-tag v="prn"/>  
		  <lit-tag v="2"/> 
		  <lit-tag v="p3"/>
		  <lit-tag v="nt"/>
		  <lit-tag v="sg"/>
		</lu> 
	      </chunk>
	      <b/>
	    </out>  
	  </when>
	</choose>	  
	<choose>
	  <when>
	    <test>
	      <and>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="ifi"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="pii"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="pis"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="prs"/>
		  </equal>
		</or>		
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="temps"/>
	      <lit-tag v="past"/>
	    </let>
	    <out>
	      <chunk name="be_adj">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="negatiu"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="be_adj">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><var n="negatiu"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  
	  <otherwise><!-*-la resta de formes verbals no tenen pers i nbr en anglès -*->
	    <choose>
	      <when>
		<test> 
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_verb">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="negatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>  
	      <when>
		<test>		 
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>	
		<out>
		  <chunk name="aux_verb">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="negatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/> 
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="prs"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="be_adj">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="negatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="ifi"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pii"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pis"/>
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="be_adj">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><var n="negatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>	 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
-->

    <rule comment="REGLA: ADV VERB conjugat (no volia)">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test><!--hauria de fer també una llista d'adverbis que van entre aux i verb (I've always liked it) -->
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SVneg"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SV"/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose>
	<choose>
	  <when>
	    <test><!--Si és verb 'ser' p1 o p3 en present o passat (o subjuntiu) té una conjugació pròpia en anglès -->
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="ifi"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="pii"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="pis"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="prs"/>
		  </equal>
		</or>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="temps"/>
	      <lit-tag v="past"/>
	    </let>
	    <out>
	      <chunk name="verbcj">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when> 
	    <test><!--La resta de verbs tenen també prs i nbr per a p3 sg, excepte auxiliars (can). -->
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="pers"/>
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
		<not>
		  <equal caseless="yes">
		    <clip pos="2" side="sl" part="lem"/> 
		    <lit v="poder"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
	    <choose>
	      <when>
		<test> 
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		    <not>
		      <equal caseless="yes">
			<clip pos="2" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </not>
		  </and>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_verb">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/><!--pingui-->
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test> 
		  <and>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		    <equal caseless="yes">
		      <clip pos="2" side="sl" part="lem"/> 
		      <lit v="poder"/>
		    </equal>
		  </and>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>

	      <when>
		<test>		 
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<choose>
		  <when>
		    <test>
		      <equal caseless="yes">
			<clip pos="2" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </test>
		    <let>		     
		      <clip pos="2" side="tl" part="lem"/>
		      <get-case-from pos="2">
			<lit v="be able to"/>
		      </get-case-from>
		    </let>
		    <let>		     
		      <clip pos="2" side="tl" part="a_verb"/>
		      <lit-tag v="vbmod"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="aux_verb">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>

	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/> 
		      <lit-tag v="pri"/><!--dic -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="prs"/><!--digui -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="verbcj">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="ifi"/><!--digué -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pii"/><!--deia -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pis"/><!--digués -->
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>	 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="ADV ANAR + INF (no vaig venir)">
      <pattern>
	<pattern-item n="adv"/> 
	<pattern-item n="anar"/>
	<pattern-item n="inf"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SVneg"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SV"/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose>  
	<let>
	  <clip pos="3" side="tl" part="temps"/>		     
	  <lit-tag v="past"/>
	</let>
	<choose>
	  <when>
	    <test><!--Si és verb 'ser' p1 o p3  té una conjugació pròpia en anglès -->
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="verbcj">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>          
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="sep"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="3" side="tl" part="lemq"/>                  
		</lu> 
	      </chunk>
	    </out>  
	  </otherwise>
	</choose>
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	</call-macro>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

   <rule comment="ADV pro ANAR + INF (no els vaig comprar - did not buy them)">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="pro"/> 
	<pattern-item n="anar"/> 
	<pattern-item n="inf"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SVneg"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SV"/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose>  
 
	<let>
	  <clip pos="4" side="tl" part="temps"/>		     
	  <lit-tag v="past"/>
	</let>
	<choose>    <!--Mira si és 'haver-hi' (hi vaig anar) -->
	  <when>
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="2" side="sl" part="lem"/>		     
		  <lit v="hi"/>
		</equal>
		<equal>
		  <clip pos="4" side="sl" part="lem"/>		     
		  <lit v="haver"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="pers"/>		     
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>		     
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="lem"/>
	      <lit v="be"/>
	    </let>
	    <let>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="vbser"/>
	    </let>
	    <out>
	      <chunk name="haverhi" case="caseFirstWord">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="4" side="tl" part="temps"/></tag>
		  <tag><clip pos="3" side="tl" part="pers"/></tag>
		  <tag><lit-tag v="ND"/></tag>
		</tags>
		<lu>
		  <lit v="there"/> 
		  <lit-tag v="adv"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="lem"/> 
		  <clip pos="4" side="tl" part="a_verb"/> 
		  <clip pos="4" side="tl" part="temps"/> 
		  <clip pos="3" side="tl" part="pers"/> 		 
		  <lit-tag v="5"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>

	  <when>
	    <!-- si el verb és separable i no és pronominal, posa el clític entre el verb i la cua (vaig treure'l -> took it out)-->
	    <test>
	      <and>
		<equal>
		  <clip pos="4" side="tl" part="sep"/>
		  <lit-tag v="sep"/>	
		</equal>
		<not>
		  <equal>
		    <clip pos="4" side="sl" part="pron"/>
		    <lit-tag v="pron"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj_enc" case="caseFirstWord">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="4" side="tl" part="temps"/></tag>
		  <tag><clip pos="3" side="tl" part="pers"/></tag>
		  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		</tags> 
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>
		    <clip pos="4" side="tl" part="a_verb"/>
		    <clip pos="4" side="tl" part="sep"/>
		    <clip pos="4" side="tl" part="temps" link-to="3"/> 
		  </lu>  
		  <lu>
		    <clip pos="2" side="tl" part="lem"/>
		    <clip pos="2" side="tl" part="a_prn"/>
		    <clip pos="2" side="tl" part="tipus_prn"/>
		    <clip pos="2" side="tl" part="pers"/>
		    <clip pos="2" side="tl" part="gen"/>
		    <clip pos="2" side="tl" part="nbr"/>		           
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>
	    <call-macro n="f_bcond"> <!-- si cal, enviem els blancs -->
	      <with-param pos="2"/>
	    </call-macro>
	    <call-macro n="f_bcond"> 
	      <with-param pos="3"/>
	    </call-macro>
	  </when>
	  <otherwise> <!--si no és un verb separable...-->
	    <choose>
	      <when>
		<test><!--mirem si és el verb "ser" -->
		  <and>
		    <equal>
		      <clip pos="4" side="tl" part="a_verb"/>
		      <lit-tag v="vbser"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="3" side="sl" part="pers"/>
			<lit-tag v="p1"/>
		      </equal>
		      <equal>
			<clip pos="3" side="sl" part="pers"/>
			<lit-tag v="p3"/>
		      </equal>
		    </or>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="4" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="4" side="tl" part="lemh"/> 
		      <clip pos="4" side="tl" part="a_verb"/>
		      <clip pos="4" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="pers"/>
		      <clip pos="3" side="tl" part="nbr"/>
		      <clip pos="4" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <otherwise> <!-- si no és el verb ser, l'enviem sense pers ni nbr-->
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="4" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>          
		      <clip pos="4" side="tl" part="lemh"/>
		      <clip pos="4" side="tl" part="a_verb"/>
		      <clip pos="4" side="tl" part="sep"/>
		      <clip pos="4" side="tl" part="temps"/>
		      <clip pos="4" side="tl" part="lemq"/>                  
		    </lu> 
		  </chunk>
		</out>  
	      </otherwise>
	    </choose>
	    <call-macro n="f_bcond">
	      <with-param pos="2"/>
	    </call-macro>  
	    <choose><!--I ara que ja hem imprès el verb, mirem els proclítics -->
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="4" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="3" side="sl" part="pers"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="2" side="sl" part="nbr"/>
			<clip pos="3" side="sl" part="nbr"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </or>
		  </and>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="3"/>
		</call-macro>
	      </when>
	      <otherwise>
		
		<out>
		  <b pos="3"/>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>  
	  </otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="ADV HAVER + PP (no han vist - have  seen)">
      <pattern>
	<pattern-item n="adv"/> 
	<pattern-item n="haver"/>
	<pattern-item n="pp"/> 
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro> 
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SVneg"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SV"/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose>  
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="sl" part="lem"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/> 
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="a_pp"/> 
	      <lit-tag v="vbmod.pp"/>
	    </let>
	  </when>
	</choose>
	<choose>		  
	  <when> 
	    <test><!--tenen prs i nbr per a p3 sg. -->
	      <and>
		<equal>
		  <clip pos="2" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="pers"/>
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="haver_pp">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="tl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="pers"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <clip pos="2" side="tl" part="lemq"/> 
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_pp"/>
		  <clip pos="3" side="tl" part="lemq"/>    
		</lu> 
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
	    <choose>
	      <when>
		<test> 
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="cni"/>
		  </equal>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_haver_pp">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_pp"/>
		      <clip pos="3" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>		 
		  <equal>
		    <clip pos="2" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>		   
		<out>
		  <chunk name="aux_haver_pp">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_pp"/>
		      <clip pos="3" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/> 
		      <lit-tag v="pri"/><!--dic -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="prs"/><!--digui -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="haver_pp">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_pp"/>
		      <clip pos="3" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="ifi"/><!--digué -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pii"/><!--deia -->
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="temps"/>
		      <lit-tag v="pis"/><!--digués -->
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="2" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="haver_pp">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_pp"/>
		      <clip pos="3" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--les formes no personals (inf i ger) -->
		<out>
		  <chunk name="haver_pp">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		      <tag><clip pos="2" side="tl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/> 
		      <clip pos="2" side="tl" part="a_verb"/> 
		      <clip pos="2" side="tl" part="sep"/> 
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_pp"/>
		      <clip pos="3" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </otherwise>
	</choose>	 
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="ADV pro HAVER + PP (no els han vist - have not seen them)">
      <pattern>
	<pattern-item n="adv"/> 
	<pattern-item n="pro"/> 
	<pattern-item n="haver"/> 
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SVneg"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SV"/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose> 
	<choose>
	  <when><!--Mira si és 'haver-hi' -->
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="2" side="sl" part="lem"/>		     
		  <lit v="hi"/>
		</equal>
		<equal>
		  <clip pos="4" side="sl" part="lem"/>		     
		  <lit v="haver"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="pers"/>		     
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>		     
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="lem"/>
	      <lit v="be"/>
	    </let>
	    <let>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <lit-tag v="vbser"/>
	    </let>
	    <choose>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="prs"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="3" side="tl" part="temps"/>
		  <lit-tag v="pri"/>
		</let>
		<out>
		  <chunk name="haverhi_pp" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="temps"/> 
		      <clip pos="3" side="tl" part="pers"/> 		 
		      <lit-tag v="5"/> 
		    </lu>
		    <b pos="3"/>
		    <lu>
		      <clip pos="4" side="tl" part="lem"/>
		      <clip pos="4" side="tl" part="a_pp"/>
		    </lu> 		  
		  </chunk>
		</out>
	      </when>
	       <when>
		 <test>
		   <or>
		     <equal>
		       <clip pos="3" side="sl" part="temps"/>
		       <lit-tag v="ifi"/>
		     </equal>
		     <equal>
		       <clip pos="3" side="sl" part="temps"/>
		       <lit-tag v="pii"/>
		     </equal>
		     <equal>
		       <clip pos="3" side="sl" part="temps"/>
		       <lit-tag v="pis"/>
		     </equal>
		   </or>
		 </test>		   
		 <let>
		   <clip pos="3" side="tl" part="temps"/>		     
		   <lit-tag v="past"/>
		 </let>
		 <out>
		  <chunk name="haverhi_pp" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="temps"/> 
		    </lu>
		    <b pos="3"/>
		    <lu>
		      <clip pos="4" side="tl" part="lem"/>
		      <clip pos="4" side="tl" part="a_pp"/>
		    </lu> 		  
		  </chunk>
		</out>
	       </when>
	      <otherwise>
		<choose>
		  <when>
		    <test>
		      <equal>
			<clip pos="3" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="3" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		  <when>
		    <test>
		      <equal>
			<clip pos="3" side="sl" part="temps"/>
			<lit-tag v="fti"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="3" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="haverhi_pp" case="caseFirstWord">
		    <tags>
		       <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <var n="auxiliar"/>
		      <clip pos="3" side="tl" part="lem"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="temps"/>
		    </lu>
		    <b pos="3"/>
		    <lu>
		      <clip pos="4" side="tl" part="lem"/>
		      <clip pos="4" side="tl" part="a_pp"/>
		    </lu> 		  
		  </chunk>
		</out>	
		<let>
		  <var n="auxiliar"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise><!--Si no és 'haver-hi' -->
	    <choose>

	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="sl" part="lem"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="lem"/> 
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="4" side="tl" part="a_pp"/> 
	      <lit-tag v="vbmod.pp"/>
	    </let>
	  </when>
	</choose>
	<!-- aquí s'ha de mirar la separabilitat-->
	<choose>
	  <when>
	    <!-- si el verb és separable i no és pronominal, posa el clític entre el verb i la cua (l'he tret -> have taken it out)-->
	    <test>
	      <and>
		<equal>
		  <clip pos="4" side="tl" part="sep"/>
		  <lit-tag v="sep"/>	
		</equal>
		<not>
		  <equal>
		    <clip pos="4" side="sl" part="pron"/>
		    <lit-tag v="pron"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <choose>	
	      <when> 
		<test><!--tenen prs i nbr per a p3 sg. -->
		  <and>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="pers"/>
		      <lit-tag v="p3"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="haver_pp_enc" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/>
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="pers"/>
		      <clip pos="3" side="tl" part="nbr"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="2"/>
		    <mlu>
		      <lu>
			<clip pos="4" side="tl" part="lemh"/> 
			<clip pos="4" side="tl" part="a_pp"/>
		      </lu> 
		      <lu>
			<clip pos="2" side="tl" part="lem"/>
			<clip pos="2" side="tl" part="a_prn"/>
			<clip pos="2" side="tl" part="tipus_prn"/>
			<clip pos="2" side="tl" part="pers"/>
			<clip pos="2" side="tl" part="gen"/>
			<clip pos="2" side="tl" part="nbr"/>		           
			<clip pos="4" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
		<choose>
		  <when>
		    <test> 
		      <equal>
			<clip pos="3" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <let>
		      <clip pos="3" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		    <out>
		      <chunk name="aux_haver_pp_enc" case="caseFirstWord">
			<tags>
			  <tag><var n="SVnegatiu"/></tag>
			  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="3" side="sl" part="temps"/></tag>
			  <tag><clip pos="3" side="tl" part="pers"/></tag>
			  <tag><clip pos="3" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <lit v="would"/>
			  <lit-tag v="vaux.inf"/>
			</lu>
			<b pos="2"/>
			<lu>
			  <clip pos="3" side="tl" part="lemh"/> 
			  <clip pos="3" side="tl" part="a_verb"/> 
			  <clip pos="3" side="tl" part="sep"/>
			  <clip pos="3" side="tl" part="temps"/>
			  <clip pos="3" side="tl" part="lemq"/> 
			</lu>
			<b/>
			<mlu>
			  <lu>
			    <clip pos="4" side="tl" part="lemh"/> 
			    <clip pos="4" side="tl" part="a_pp"/>
			  </lu> 
			  <lu>
			    <clip pos="2" side="tl" part="lem"/>
			    <clip pos="2" side="tl" part="a_prn"/>
			    <clip pos="2" side="tl" part="tipus_prn"/>
			    <clip pos="2" side="tl" part="pers"/>
			    <clip pos="2" side="tl" part="gen"/>
			    <clip pos="2" side="tl" part="nbr"/>		           
			    <clip pos="4" side="tl" part="lemq"/>
			  </lu> 
			</mlu>
		      </chunk>
		    </out>
		  </when>
		  <otherwise>
		    <choose>
		      <when>
			<test>		 
			  <equal>
			    <clip pos="3" side="sl" part="temps"/>
			    <lit-tag v="fti"/>
			  </equal>
			</test>
			<let>
			  <clip pos="3" side="tl" part="temps"/>		     
			  <lit-tag v="inf"/>
			</let>		   
			<out>
			  <chunk name="aux_haver_pp" case="caseFirstWord">
			    <tags>
			       <tag><var n="SVnegatiu"/></tag>
			      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="3" side="sl" part="temps"/></tag>
			      <tag><clip pos="3" side="tl" part="pers"/></tag>
			      <tag><clip pos="3" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <lit v="will"/>
			      <lit-tag v="vaux.inf"/>
			    </lu>
			    <b pos="2"/>
			    <lu>
			      <clip pos="3" side="tl" part="lemh"/> 
			      <clip pos="3" side="tl" part="a_verb"/>
			      <clip pos="3" side="tl" part="sep"/> 
			      <clip pos="3" side="tl" part="temps"/>
			      <clip pos="3" side="tl" part="lemq"/> 
			    </lu>
			    <b/>
			    <mlu>
			      <lu>
				<clip pos="4" side="tl" part="lemh"/> 
				<clip pos="4" side="tl" part="a_pp"/>
			      </lu> 
			      <lu>
				<clip pos="2" side="tl" part="lem"/>
				<clip pos="2" side="tl" part="a_prn"/>
				<clip pos="2" side="tl" part="tipus_prn"/>
				<clip pos="2" side="tl" part="pers"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>		           
				<clip pos="4" side="tl" part="lemq"/>
			      </lu> 
			    </mlu>
			  </chunk>
			</out>
		      </when>
		      <otherwise>
			<choose>
			  <when>
			    <test>
			      <or>
				<equal>
				  <clip pos="3" side="sl" part="temps"/> 
				  <lit-tag v="pri"/><!--dic -->
				</equal>
				<equal>
				  <clip pos="3" side="sl" part="temps"/>
				  <lit-tag v="prs"/><!--digui -->
				</equal>
				<equal>
				  <clip pos="3" side="sl" part="temps"/>
				  <lit-tag v="imp"/>
				</equal>
			      </or>
			    </test>
			    <let>
			      <clip pos="3" side="tl" part="temps"/>		     
			      <lit-tag v="pres"/>
			    </let>
			  </when>
			  <otherwise>
			    <choose>
			      <when>
				<test>
				  <or>
				    <equal>
				      <clip pos="3" side="sl" part="temps"/>
				      <lit-tag v="ifi"/><!--digué -->
				    </equal>
				    <equal>
				      <clip pos="3" side="sl" part="temps"/>
				      <lit-tag v="pii"/><!--deia -->
				    </equal>
				    <equal>
				      <clip pos="3" side="sl" part="temps"/>
				      <lit-tag v="pis"/><!--digués -->
				    </equal>
				  </or>
				</test>		   
				<let>
				  <clip pos="3" side="tl" part="temps"/>		     
				  <lit-tag v="past"/>
				</let>
			      </when>
			    </choose>
			  </otherwise>
			</choose>
			<out>
			  <chunk name="haver_pp_enc" case="caseFirstWord">
			    <tags>
			      <tag><var n="SVnegatiu"/></tag>
			      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="3" side="sl" part="temps"/></tag>
			      <tag><clip pos="3" side="tl" part="pers"/></tag>
			      <tag><clip pos="3" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <clip pos="3" side="tl" part="lemh"/> 
			      <clip pos="3" side="tl" part="a_verb"/>
			      <clip pos="3" side="tl" part="sep"/> 
			      <clip pos="3" side="tl" part="temps"/>
			      <clip pos="3" side="tl" part="lemq"/> 
			    </lu>
			    <b pos="2"/>
			    <mlu>
			      <lu>
				<clip pos="4" side="tl" part="lemh"/> 
				<clip pos="4" side="tl" part="a_pp"/>
			      </lu> 
			      <lu>
				<clip pos="2" side="tl" part="lem"/>
				<clip pos="2" side="tl" part="a_prn"/>
				<clip pos="2" side="tl" part="tipus_prn"/>
				<clip pos="2" side="tl" part="pers"/>
				<clip pos="2" side="tl" part="gen"/>
				<clip pos="2" side="tl" part="nbr"/>		           
				<clip pos="4" side="tl" part="lemq"/>
			      </lu> 
			    </mlu>
			  </chunk>
			</out>
		      </otherwise>
		    </choose>
		  </otherwise>
		</choose>
	      </otherwise>
	    </choose>	 <!-- ... i després enviem el prn (si cal)-->
	  </when>
	  <otherwise> <!-- si no és separable: -->
	    <choose>	<!-- primer arreglem i enviem el verb -->
	      <when> 
		<test><!--tenen prs i nbr per a p3 sg. -->
		  <and>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="pers"/>
		      <lit-tag v="p3"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <lit-tag v="sg"/>
		    </equal>
		  </and>
		</test>
		<out>
		  <chunk name="haver_pp" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/>
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="pers"/>
		      <clip pos="3" side="tl" part="nbr"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="4" side="tl" part="lemh"/> 
		      <clip pos="4" side="tl" part="a_pp"/>
		      <clip pos="4" side="tl" part="lemq"/>    
		    </lu> 
		  </chunk>
		</out>
	      </when>
	      <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
		<choose>
		  <when>
		    <test> 
		      <equal>
			<clip pos="3" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <let>
		      <clip pos="3" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		    <out>
		      <chunk name="aux_haver_pp" case="caseFirstWord">
			<tags>
			   <tag><var n="SVnegatiu"/></tag>
			  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
			  <tag><clip pos="3" side="sl" part="temps"/></tag>
			  <tag><clip pos="3" side="tl" part="pers"/></tag>
			  <tag><clip pos="3" side="tl" part="nbr"/></tag>
			</tags>
			<lu>
			  <lit v="would"/>
			  <lit-tag v="vaux.inf"/>
			</lu>
			<b pos="2"/>
			<lu>
			  <clip pos="3" side="tl" part="lemh"/> 
			  <clip pos="3" side="tl" part="a_verb"/> 
			  <clip pos="3" side="tl" part="sep"/>
			  <clip pos="3" side="tl" part="temps"/>
			  <clip pos="3" side="tl" part="lemq"/> 
			</lu>
			<b/>
			<lu>
			  <clip pos="4" side="tl" part="lemh"/> 
			  <clip pos="4" side="tl" part="a_pp"/>
			  <clip pos="4" side="tl" part="lemq"/>    
			</lu> 
		      </chunk>
		    </out>
		  </when>
		  <otherwise>
		    <choose>
		      <when>
			<test>		 
			  <equal>
			    <clip pos="3" side="sl" part="temps"/>
			    <lit-tag v="fti"/>
			  </equal>
			</test>
			<let>
			  <clip pos="3" side="tl" part="temps"/>		     
			  <lit-tag v="inf"/>
			</let>		   
			<out>
			  <chunk name="aux_haver_pp" case="caseFirstWord">
			    <tags>
			      <tag><var n="SVnegatiu"/></tag>
			      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="3" side="sl" part="temps"/></tag>
			      <tag><clip pos="3" side="tl" part="pers"/></tag>
			      <tag><clip pos="3" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <lit v="will"/>
			      <lit-tag v="vaux.inf"/>
			    </lu>
			    <b pos="2"/>
			    <lu>
			      <clip pos="3" side="tl" part="lemh"/> 
			      <clip pos="3" side="tl" part="a_verb"/>
			      <clip pos="3" side="tl" part="sep"/> 
			      <clip pos="3" side="tl" part="temps"/>
			      <clip pos="3" side="tl" part="lemq"/> 
			    </lu>
			    <b/>
			    <lu>
			      <clip pos="4" side="tl" part="lemh"/> 
			      <clip pos="4" side="tl" part="a_pp"/>
			      <clip pos="4" side="tl" part="lemq"/>    
			    </lu> 
			  </chunk>
			</out>
		      </when>
		      <otherwise>
			<choose>
			  <when>
			    <test>
			      <or>
				<equal>
				  <clip pos="3" side="sl" part="temps"/> 
				  <lit-tag v="pri"/><!--dic -->
				</equal>
				<equal>
				  <clip pos="3" side="sl" part="temps"/>
				  <lit-tag v="prs"/><!--digui -->
				</equal>
				<equal>
				  <clip pos="3" side="sl" part="temps"/>
				  <lit-tag v="imp"/>
				</equal>
			      </or>
			    </test>
			    <let>
			      <clip pos="3" side="tl" part="temps"/>		     
			      <lit-tag v="pres"/>
			    </let>
			  </when>
			  <otherwise>
			    <choose>
			      <when>
				<test>
				  <or>
				    <equal>
				      <clip pos="3" side="sl" part="temps"/>
				      <lit-tag v="ifi"/><!--digué -->
				    </equal>
				    <equal>
				      <clip pos="3" side="sl" part="temps"/>
				      <lit-tag v="pii"/><!--deia -->
				    </equal>
				    <equal>
				      <clip pos="3" side="sl" part="temps"/>
				      <lit-tag v="pis"/><!--digués -->
				    </equal>
				  </or>
				</test>		   
				<let>
				  <clip pos="3" side="tl" part="temps"/>		     
				  <lit-tag v="past"/>
				</let>
			      </when>
			    </choose>
			  </otherwise>
			</choose>
			<out>
			  <chunk name="haver_pp" case="caseFirstWord">
			    <tags>
			      <tag><var n="SVnegatiu"/></tag>
			      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
			      <tag><clip pos="3" side="sl" part="temps"/></tag>
			      <tag><clip pos="3" side="tl" part="pers"/></tag>
			      <tag><clip pos="3" side="tl" part="nbr"/></tag>
			    </tags>
			    <lu>
			      <clip pos="3" side="tl" part="lemh"/> 
			      <clip pos="3" side="tl" part="a_verb"/>
			      <clip pos="3" side="tl" part="sep"/> 
			      <clip pos="3" side="tl" part="temps"/>
			      <clip pos="3" side="tl" part="lemq"/> 
			    </lu>
			    <b pos="2"/>
			    <lu>
			      <clip pos="4" side="tl" part="lemh"/> 
			      <clip pos="4" side="tl" part="a_pp"/>
			      <clip pos="4" side="tl" part="lemq"/>    
			    </lu> 
			  </chunk>
			</out>
		      </otherwise>
		    </choose>
		  </otherwise>
		</choose>
	      </otherwise>
	    </choose>	 <!-- ... i després enviem el prn (si cal)-->
	    <choose>
	      <when>
		<test>
		  <and>
		    <equal>
		      <clip pos="4" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="3" side="sl" part="pers"/>
		    </equal>
		    <or>
		      <equal>
			<clip pos="2" side="sl" part="nbr"/>
			<clip pos="3" side="sl" part="nbr"/>
		      </equal>
		      <equal>
			<clip pos="2" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </or>
		  </and>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="3"/>
		</call-macro>
	      </when>
	      <otherwise>
		<out>
		  <b pos="3"/>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>  
	  </otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="PER + INF (per no oblidar - not to forget">
      <pattern>
	<pattern-item n="per"/> 
	<pattern-item n="no"/> 
	<pattern-item n="inf"/> 
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>    
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="adv.NEG"/></tag>
	    </tags>
	    <lu>
	      <lit v="not"/>
	      <clip pos="2" side="tl" part="tags"/>
	    </lu>
	  </chunk>
	  <b pos="1"/>
	  <chunk name="to">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <lit v="to"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	  </chunk>
	  <b pos="2"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="3" side="sl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="sep"/>
	      <clip pos="3" side="tl" part="temps" link-to="3"/>
	      <clip pos="3" side="tl" part="lemq"/>               
	    </lu>  
	  </chunk>
	</out>   
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: ADV PROCLÍTIC VERB conjugat (no el veig)">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="pro"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SVneg"/>
	    </let>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
	    </call-macro>
	  </when>
	  <otherwise>
	    <let>
	      <var n="SVnegatiu"/>
	      <lit-tag v="SV"/>
	    </let>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><clip pos="1" side="tl" part="a_adv"/></tag>		
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>		 
	      </chunk>
	      <b pos="1"/>
	    </out>
	  </otherwise>
	</choose>  

	<choose>
	  <when><!--Mira si és 'haver-hi' -->
	    <test>
	      <and>
		<equal caseless="yes">
		  <clip pos="2" side="sl" part="lem"/>		     
		  <lit v="hi"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="lem"/>		     
		  <lit v="haver"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="pers"/>		     
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>		     
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit v="be"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <lit-tag v="vbser"/>
	    </let>
	    <choose>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pri"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="prs"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="pri"/>
		</let>
		<out>
		  <chunk name="haverhi" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="temps"/> 
		      <clip pos="3" side="tl" part="pers"/> 		 
		      <lit-tag v="5"/> 
		    </lu>		  
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="ifi"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pii"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pis"/>
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="haverhi" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="tl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><lit-tag v="ND"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <clip pos="3" side="tl" part="lem"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="temps"/> 
		      <clip pos="3" side="tl" part="pers"/> 		 
		      <lit-tag v="5"/> 
		    </lu>		  
		  </chunk>
		</out>
	      </when>		

	      <otherwise>
		<choose>
		  <when>
		    <test>
		      <equal>
			<clip pos="3" side="sl" part="temps"/>
			<lit-tag v="cni"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="3" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		  <when>
		    <test>
		      <equal>
			<clip pos="3" side="sl" part="temps"/>
			<lit-tag v="fti"/>
		      </equal>
		    </test>
		    <append n="auxiliar">
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		      <lit v="$ ^"/>
		    </append>
		    <let>
		      <clip pos="3" side="tl" part="temps"/>		     
		      <lit-tag v="inf"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="haverhi" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="there"/> 
		      <lit-tag v="adv"/>
		    </lu>
		    <b pos="2"/>
		    <lu>
		      <var n="auxiliar"/>
		      <clip pos="3" side="tl" part="lem"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="temps"/>
		    </lu>		  
		  </chunk>
		</out>	
		<let>
		  <var n="auxiliar"/>
		  <lit v=""/>
		</let>
	      </otherwise>
	    </choose>
	  </when>

	  <otherwise><!--Si no és 'haver-hi-->
	    <choose>

	  <when>
	    <test><!--Si és verb 'ser' p1 o p3 en present o passat (o subjuntiu) té una conjugació pròpia en anglès -->
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="3" side="sl" part="temps"/>
		    <lit-tag v="ifi"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="sl" part="temps"/>
		    <lit-tag v="pii"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="sl" part="temps"/>
		    <lit-tag v="pis"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="sl" part="temps"/>
		    <lit-tag v="prs"/>
		  </equal>
		</or>
		<or>
		  <equal>
		    <clip pos="3" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="temps"/>
	      <lit-tag v="past"/>
	    </let>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="3" side="tl" part="pers"/></tag>
		  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="sep"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <lit-tag v="vbser"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="3" side="sl" part="pers"/>
		    <lit-tag v="p1"/>
		  </equal>
		  <equal>
		    <clip pos="3" side="sl" part="pers"/>
		    <lit-tag v="p3"/>
		  </equal>
		</or>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="3" side="tl" part="pers"/></tag>
		  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="sep"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <when> 
	    <test><!--La resta de verbs tenen també prs i nbr per a p3 sg, excepte auxiliars (can). -->
	      <and>
		<equal>
		  <clip pos="3" side="sl" part="temps"/>
		  <lit-tag v="pri"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="pers"/>
		  <lit-tag v="p3"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sg"/>
		</equal>
		<not>
		  <equal caseless="yes">
		    <clip pos="3" side="sl" part="lem"/> 
		    <lit v="poder"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <out>
	      <chunk name="verbcj" case="caseFirstWord">
		<tags>
		  <tag><var n="SVnegatiu"/></tag>
		  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="3" side="tl" part="temps"/></tag>
		  <tag><clip pos="3" side="tl" part="pers"/></tag>
		  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/> 
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="sep"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/> 
		</lu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
	    <choose>
	      <when>
		<test> 
		  <and>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		    <not>
		      <equal caseless="yes">
			<clip pos="3" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </not>
		  </and>
		</test>
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<out>
		  <chunk name="aux_verb" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="would"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/> 
		      <clip pos="3" side="tl" part="sep"/> 
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test> 
		  <and>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="cni"/>
		    </equal>
		    <equal caseless="yes">
		      <clip pos="3" side="sl" part="lem"/> 
		      <lit v="poder"/>
		    </equal>
		  </and>
		</test>
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/> 
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>

	      <when>
		<test>		 
		  <equal>
		    <clip pos="3" side="sl" part="temps"/>
		    <lit-tag v="fti"/>
		  </equal>
		</test>
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="inf"/>
		</let>
		<choose>
		  <when>
		    <test>
		      <equal caseless="yes">
			<clip pos="3" side="sl" part="lem"/> 
			<lit v="poder"/>
		      </equal>
		    </test>
		    <let>		     
		      <clip pos="3" side="tl" part="lem"/>
		      <get-case-from pos="3">
			<lit v="be able to"/>
		      </get-case-from>
		    </let>
		    <let>		     
		      <clip pos="3" side="tl" part="a_verb"/>
		      <lit-tag v="vbmod"/>
		    </let>
		  </when>
		</choose>
		<out>
		  <chunk name="aux_verb" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="will"/>
		      <lit-tag v="vaux.inf"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/> 
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>

	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/> 
		      <lit-tag v="pri"/><!--dic -->
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="prs"/><!--digui -->
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="imp"/>
		    </equal>
		  </or>
		</test>
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="pres"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/> 
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="ifi"/><!--digué -->
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pii"/><!--deia -->
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="temps"/>
		      <lit-tag v="pis"/><!--digués -->
		    </equal>
		  </or>
		</test>		   
		<let>
		  <clip pos="3" side="tl" part="temps"/>		     
		  <lit-tag v="past"/>
		</let>
		<out>
		  <chunk name="verbcj" case="caseFirstWord">
		    <tags>
		      <tag><var n="SVnegatiu"/></tag>
		      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="3" side="sl" part="temps"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/> 
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/> 
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/> 
		    </lu>
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>
	<choose><!--I ara que ja hem imprès el verb, mirem els proclítics -->
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="3" side="sl" part="pron"/>
		  <lit-tag v="pron"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="pers"/>
		  <clip pos="3" side="sl" part="pers"/>
		</equal>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="nbr"/>
		    <clip pos="3" side="sl" part="nbr"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="lem"/>
		    <lit v="es"/><!--és 'sp' -->
		  </equal>
		</or>
	      </and>
	    </test>	
	    <call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
	      <with-param pos="2"/>
	    </call-macro>
	  </when>
	  <otherwise>	
	    <out>
	      <b pos="2"/>
	      <chunk name="pro" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		  <tag><clip pos="2" side="sl" part="pers"/></tag>
		  <tag><clip pos="2" side="tl" part="gen"/></tag>
		  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
	      </chunk>
	    </out>	
	  </otherwise>
	</choose>  
      </otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="NO VERB + ENCL (no ajudar-me - not to help me) (posar-ho en gerundi en anglès?)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbnm_inf_ger"/>
	<pattern-item n="enc"/> 
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>      
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="sep"/>
		<lit-tag v="sep"/>
	      </equal>
	    </test>
	    <out>
	      <chunk name="to_verb_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		</tags> 
		<lu>
		  <lit v="not"/>
		  <clip pos="1" side="tl" part="tags"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <lit v="to"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<mlu>
		  <lu>
		    <clip pos="2" side="tl" part="lemh"/>
		    <clip pos="2" side="tl" part="a_verb"/>
		    <clip pos="2" side="tl" part="sep"/>
		    <clip pos="2" side="tl" part="temps" link-to="3"/> 
		  </lu>  
		  <lu>
		    <clip pos="3" side="tl" part="lem"/>
		    <clip pos="3" side="tl" part="a_prn"/>
		    <clip pos="3" side="tl" part="tipus_prn"/>
		    <clip pos="3" side="tl" part="pers"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <clip pos="3" side="tl" part="nbr"/>		           
		    <clip pos="2" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="to_verb_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="sl" part="temps"/></tag>
		</tags> 
		<lu>
		  <lit v="not"/>
		  <clip pos="1" side="tl" part="tags"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <lit v="to"/>
		  <lit-tag v="pr"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps" link-to="3"/> 	           
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>   
		<b/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>	
		</lu> 
	      </chunk>
	    </out>
	  </otherwise>	   
	</choose>	   
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="NO VERB + ENCL + ENCL (no portar-me'ls - not to bring them to me)(en gerundi?)">
      <pattern>
	<pattern-item n="no"/> 
	<pattern-item n="verbnm_inf_ger"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>           	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>     
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="whole"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="2" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    	
		<out>
		  <chunk name="to_verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		    </tags> 
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <mlu>
		      <lu>
			<clip pos="2" side="tl" part="lemh"/>
			<clip pos="2" side="tl" part="a_verb"/>
			<clip pos="2" side="tl" part="sep"/>
			<clip pos="2" side="tl" part="temps" link-to="3"/> 
		      </lu>  
		      <lu>
			<clip pos="3" side="tl" part="lem"/>
			<clip pos="3" side="tl" part="a_prn"/>
			<clip pos="3" side="tl" part="tipus_prn"/>
			<clip pos="3" side="tl" part="pers"/>
			<clip pos="3" side="tl" part="gen"/>
			<clip pos="3" side="tl" part="nbr"/>		           
			<clip pos="2" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="to_verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		    </tags> 
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps" link-to="3"/>	           
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>   
		    <b/>   
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="2" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    	
		<out>
		  <chunk name="to_verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		    </tags> 
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <mlu>
		      <lu>
			<clip pos="2" side="tl" part="lemh"/>
			<clip pos="2" side="tl" part="a_verb"/>
			<clip pos="2" side="tl" part="sep"/>
			<clip pos="2" side="tl" part="temps" link-to="3"/> 
		      </lu>  
		      <lu>
			<clip pos="4" side="tl" part="lem"/>
			<clip pos="4" side="tl" part="a_prn"/>
			<clip pos="4" side="tl" part="tipus_prn"/>
			<clip pos="4" side="tl" part="pers"/>
			<clip pos="4" side="tl" part="gen"/>
			<clip pos="4" side="tl" part="nbr"/>		           
			<clip pos="2" side="tl" part="lemq"/>
		      </lu> 
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="to_verb_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="sl" part="temps"/></tag>
		    </tags> 
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps" link-to="3"/>	           
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>   
		    <b/>   
		    <lu>
		      <clip pos="4" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="whole"/>
		      <lit v=""/>
		    </equal>
		  </not>
		</test>
		<out>
		  <b/>
		  <chunk name="to_prn">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>		 
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>    
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="NO + VERBMOD + ENCL + INF (no poder-ho fer - not being able to do it)(aquí ho he posat en gerundi, en els altres casos d'infinitiu negat no, revisar)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbm_inf_ger"/>
	<pattern-item n="enc"/> 
	<pattern-item n="inf"/>
      </pattern>
      <action>               	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro> 
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="ger"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <get-case-from pos="2">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="sep"/>
		<lit-tag v="sep"/>
	      </equal>
	    </test>   
	    <out>
	      <chunk name="no_mod_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="sl" part="pers"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
		</tags>
		<lu>
		  <lit v="not"/>
		  <clip pos="1" side="tl" part="tags"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps" link-to="3"/>      
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>  
		<b pos="3"/>
		<mlu>
		  <lu>
		    <clip pos="4" side="tl" part="lemh"/>      
		    <clip pos="4" side="tl" part="a_verb"/>    
		    <clip pos="4" side="tl" part="sep"/>
		    <clip pos="4" side="tl" part="temps"/>
		  </lu>
		  <lu>
		    <clip pos="3" side="tl" part="lem"/>
		    <clip pos="3" side="tl" part="a_prn"/>
		    <clip pos="3" side="tl" part="tipus_prn"/>
		    <clip pos="3" side="tl" part="pers"/>
		    <clip pos="3" side="tl" part="gen"/>
		    <clip pos="3" side="tl" part="nbr"/>      
		    <clip pos="4" side="tl" part="lemq"/>
		  </lu> 
		</mlu>
	      </chunk>
	    </out>  
	  </when>
	  <otherwise>
	    <out>
	      <chunk name="no_mod_inf_enc" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="2" side="sl" part="pers"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
		</tags>
		<lu>
		  <lit v="not"/>
		  <clip pos="1" side="tl" part="tags"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="temps" link-to="3"/>      
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>  
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>      
		  <clip pos="4" side="tl" part="a_verb"/>    
		  <clip pos="4" side="tl" part="sep"/>
		  <clip pos="4" side="tl" part="temps"/>      
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu> 
	      </chunk>
	    </out>  
	  </otherwise>
	</choose>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="NO + VERBMOD + ENCL + ENCL + INF (no poder-los-ho explicar -> not being able to explain it to them)">
      <pattern>
	<pattern-item n="no"/> 
	<pattern-item n="verbm_inf_ger"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
	<pattern-item n="inf"/>
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="ger"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>
	      <get-case-from pos="2">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>		     
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="whole"/>
		<lit v=""/>
	      </equal>
	    </test>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="5" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>  
		<out>
		  <chunk name="no_mod_inf_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="temps" link-to="3"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		    <b pos="4"/>
		    <mlu>
		      <lu>
			<clip pos="5" side="tl" part="lemh"/>      
			<clip pos="5" side="tl" part="a_verb"/>   
			<clip pos="5" side="tl" part="sep"/>
			<clip pos="5" side="tl" part="temps"/> 
		      </lu>
		      <lu>
			<clip pos="3" side="tl" part="lem"/>
			<clip pos="3" side="tl" part="a_prn"/>
			<clip pos="3" side="tl" part="tipus_prn"/>
			<clip pos="3" side="tl" part="pers"/>
			<clip pos="3" side="tl" part="gen"/>
			<clip pos="3" side="tl" part="nbr"/>     
			<clip pos="5" side="tl" part="lemq"/>
		      </lu>
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="no_mod_inf_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="temps" link-to="3"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		    <b pos="4"/>
		    <lu>
		      <clip pos="5" side="tl" part="lemh"/>      
		      <clip pos="5" side="tl" part="a_verb"/>     
		      <clip pos="5" side="tl" part="sep"/>
		      <clip pos="5" side="tl" part="temps"/>      
		      <clip pos="5" side="tl" part="lemq"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	  </when>
	  <otherwise>
	    <choose>
	      <when>
		<test>
		  <equal>
		    <clip pos="5" side="tl" part="sep"/>
		    <lit-tag v="sep"/>
		  </equal>
		</test>    
		<out>
		  <chunk name="no_mod_inf_enc_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="temps" link-to="3"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		    <b pos="4"/>
		    <mlu>
		      <lu>
			<clip pos="5" side="tl" part="lemh"/>      
			<clip pos="5" side="tl" part="a_verb"/>    
			<clip pos="5" side="tl" part="sep"/>
			<clip pos="5" side="tl" part="temps"/> 
		      </lu>
		      <lu>
			<clip pos="4" side="tl" part="lem"/>
			<clip pos="4" side="tl" part="a_prn"/>
			<clip pos="4" side="tl" part="tipus_prn"/>
			<clip pos="4" side="tl" part="pers"/>
			<clip pos="4" side="tl" part="gen"/>
			<clip pos="4" side="tl" part="nbr"/>     
			<clip pos="5" side="tl" part="lemq"/>
		      </lu>
		    </mlu>
		  </chunk>
		</out>
	      </when>
	      <otherwise>
		<out>
		  <chunk name="no_mod_inf_enc_enc" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="sl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="not"/>
		      <clip pos="1" side="tl" part="tags"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="temps" link-to="3"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		    <b pos="4"/>
		    <lu>
		      <clip pos="5" side="tl" part="lemh"/>      
		      <clip pos="5" side="tl" part="a_verb"/>    
		      <clip pos="5" side="tl" part="sep"/>
		      <clip pos="5" side="tl" part="temps"/>    
		      <clip pos="5" side="tl" part="lemq"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="4" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
	    </choose>
	    <choose>
	      <when>
		<test>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="whole"/>
		      <lit v=""/>
		    </equal>
		  </not>
		</test>
		<out>
		  <b/> 
		  <chunk name="to_prn">
		    <tags>
		      <tag><lit-tag v="SP"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="tl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="to"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b/>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu> 
		  </chunk>
		</out>
	      </when>
	    </choose>
	  </otherwise>
	</choose>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NO + VERBMOD + ENCL (per quan va davant desconegudes, perquè almenys no peti: no poder-ho xxx - not being able to it xxx)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbm_inf_ger"/>
	<pattern-item n="enc"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>  
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="ger"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>	  
	      <get-case-from pos="2">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>		     
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="no_mod_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	      <tag><clip pos="2" side="sl" part="pers"/></tag>
	      <tag><clip pos="2" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <lit v="not"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps" link-to="3"/>      
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>	  
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NO + VERBMOD + ENCL + ENCL (per quan va davant desconegudes, perquè almenys no peti: no poder-los-ho xxx - not being able to them it xxx)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbm_inf_ger"/>
	<pattern-item n="enc"/> 
	<pattern-item n="enc"/> 
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="ger"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lem"/>	  
	      <get-case-from pos="2">
		<lit v="be able to"/>
	      </get-case-from>
	    </let>
	    <let>		     
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="no_mod_enc_enc_x" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	      <tag><clip pos="2" side="sl" part="pers"/></tag>
	      <tag><clip pos="2" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <lit v="not"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps" link-to="3"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu> 
	  </chunk>
	</out>      
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>




    <rule comment="REGLA: NO + INF (no jugar - not playing)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="inf"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	<let>
	  <clip pos="2" side="tl" part="temps"/>
	  <lit-tag v="ger"/>
	</let>
	<out>
	  <chunk name="no_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <lit v="not"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="sep"/>
	      <clip pos="2" side="tl" part="temps" link-to="3"/>
	      <clip pos="2" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: NO + GER (no fent - not doing)">
      <pattern>
	<pattern-item n="no"/> 
	<pattern-item n="ger"/> 
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <equal caseless="yes">
		<clip pos="2" side="sl" part="lemh"/> 
		<lit v="poder"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="lemh"/>
	      <lit v="be able to"/>
	    </let>
	    <let>
	      <clip pos="2" side="tl" part="a_verb"/>
	      <lit-tag v="vbmod"/>
	    </let>
	  </when>
	</choose>	    
	<out>
	  <chunk name="no_ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="2" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <lit v="not"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="sep"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="lemq"/>    
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <!--************************************ ALTRES ************************************************ -->

    <rule comment="ADV">
      <pattern>
	<pattern-item n="adv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test><!--hauria de fer també una llista d'adverbis que van entre aux i verb (I've always liked it) -->
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="no"/>
	      </equal>
	    </test>
	    <let>
	      <var n="paraula1"/>
	      <clip pos="1" side="tl" part="whole"/>
	    </let>
	    <append n="paraula1">
	      <lit-tag v="NEG"/>
	    </append>
	    <let>
	      <clip pos="1" side="tl" part="whole"/>
	      <var n="paraula1"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="1" side="tl" part="neg"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="ADV ITG">
      <pattern>
	<pattern-item n="advitg"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>	
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="PRONOM tònic/interrogatiu/possessiu"> 
      <pattern>
	<pattern-item n="tn_itg_pos"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="prn" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="gen" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr" link-to="4"/>
	    </lu> 
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="PRN personal">
      <pattern>
	<pattern-item n="prpers"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="prpers" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>  
	      <clip pos="1" side="tl" part="a_prn"/>  
	      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/> 
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu> 
	  </chunk>
	</out>  
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
    

 <rule comment="CNJ">
      <pattern>
	<pattern-item n="cnj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="cnj" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="tags"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

 <rule comment="de">
      <pattern>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="de" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="PREP">
      <pattern>
	<pattern-item n="prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pr" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule> <!-- REGLA: reset variables-->
      <pattern>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<let>
	  <var n="nombre"/>
	  <lit-tag v="sg"/>
	</let>
	<let>
	  <var n="genere"/>
	  <lit-tag v="m"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=";"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=":"/>
		  </equal>
		</or>
	      </not>
	    </test>	      
	    <let>
	      <var n="EOS"/>
	      <lit v="true"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="punt">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    

  </section-rules>
</transfer>
