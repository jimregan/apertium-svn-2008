<?xml version="1.0" encoding="ISO-8859-1"?> <!-- -*- nxml -*- -->
<transfer>
<section-def-cats>
     <def-cat n="nom">
	  <cat-item tags="n.*"/>
     </def-cat>

     <def-cat n="npant">
	  <cat-item tags="np.ant"/>
     </def-cat>

     <def-cat n="nploc">
	  <cat-item tags="np.loc"/>
     </def-cat>        

     <def-cat n="det">          
	  <cat-item tags="det.*"/>
	  <cat-item tags="predet.*"/>
      </def-cat>

      <def-cat n="detdef">
	  <cat-item tags="det.def.*"/>
      </def-cat>
      
      <def-cat n="predet">
          <cat-item tags="predet.*"/>
      </def-cat>

      <def-cat n="adjec">          
	  <cat-item tags="adj.*"/>
	  <cat-item tags="vblex.pp.*"/>
      </def-cat>

      <def-cat n="adj">          
	  <cat-item tags="adj.*"/>
      </def-cat>

	<def-cat n="adv">
		<cat-item tags="adv"/>
		<cat-item tags="preadv"/>
	</def-cat>

	<def-cat n="prep">
		<cat-item tags="pr"/>
	</def-cat>    
     
	<def-cat n="relat">
		<cat-item tags="rel.*"/>
	</def-cat>

	<def-cat n="prn">          	  	  
		<cat-item tags="prn.tn.*"/>
		<cat-item tags="prn.itg.*"/>	 	 	
	</def-cat>

	<def-cat n="prnenc">   	  	  
		<cat-item tags="prn.enc.*"/>
	</def-cat>     

	<def-cat n="prnpro">   	  	  
		<cat-item tags="prn.pro.*"/>
	</def-cat>

	<def-cat n="prnproref">   	  	  
		<cat-item lemma="em" tags="prn.pro.p1.mf.sg"/>
		<cat-item lemma="et" tags="prn.pro.p2.mf.sg"/>
		<cat-item lemma="es" tags="prn.pro.ref.p3.mf.sp"/>
		<cat-item lemma="ens" tags="prn.pro.p1.mf.pl"/>
		<cat-item lemma="us" tags="prn.pro.p2.mf.pl"/>
	</def-cat>

	<def-cat n="verb">
		<cat-item tags="vblex.*"/>
		<cat-item tags="vbser.*"/>
		<cat-item tags="vbhaver.*"/>
		<cat-item tags="vbmod.*"/>
	</def-cat>

	<def-cat n="inf">
		<cat-item tags="vblex.inf"/>
		<cat-item tags="vbser.inf"/>
		<cat-item tags="vbhaver.inf"/>
		<cat-item tags="vbmod.inf"/>
	</def-cat>
	<def-cat n="gerundi">
		<cat-item tags="vblex.ger"/>
		<cat-item tags="vbser.ger"/>
		<cat-item tags="vbhaver.ger"/>
		<cat-item tags="vbmod.ger"/>
	</def-cat>

	<def-cat n="pp">
		<cat-item tags="vblex.pp.*"/>
		<cat-item tags="vbser.pp.*"/>
		<cat-item tags="vbhaver.pp.*"/>
		<cat-item tags="vbmod.pp.*"/>
	</def-cat>
	
	<def-cat n="num">
		<cat-item tags="num.*"/>
	</def-cat>

	<def-cat n="anar">
		<cat-item lemma="anar" tags="vblex.pri.*"/>
	</def-cat>
	 
	<def-cat n="estar">
		<cat-item lemma="estar" tags="vblex.pri.*"/>
	</def-cat>

	<def-cat n="en">
		<cat-item lemma="en" tags="pr"/>
	</def-cat>

	<def-cat n="a">
		<cat-item lemma="a" tags="pr"/>
	</def-cat>

	<def-cat n="per">
		<cat-item lemma="per" tags="pr"/>
	</def-cat>

	<def-cat n="haver">
		<cat-item lemma="haver" tags="vbhaver.*"/>
	</def-cat>
	<def-cat n="nosaltres">
		<cat-item lemma="nosaltres" tags="prn.tn.*"/>
		<cat-item lemma="vosaltres" tags="prn.tn.*"/>
	</def-cat>

	<def-cat n="sent">
		<cat-item tags="sent"/>
	</def-cat>

	  <def-cat n="nloc">
		  <cat-item lemma="món" tags="n.*"/>
		  <cat-item lemma="ascensor" tags="n.*"/>
		  <cat-item lemma="carrer" tags="n.*"/>
		  <cat-item lemma="plaça" tags="n.*"/>
		  <cat-item lemma="mercat" tags="n.*"/>
		  <cat-item lemma="zona" tags="n.*"/>
		  <cat-item lemma="àrea" tags="n.*"/>
		  <cat-item lemma="comarca" tags="n.*"/>
		  <cat-item lemma="barri" tags="n.*"/>
		  <cat-item lemma="ciutat" tags="n.*"/>
		  <cat-item lemma="comarca" tags="n.*"/>
		  <cat-item lemma="província" tags="n.*"/>
		  <cat-item lemma="illa" tags="n.*"/>
		  <cat-item lemma="país" tags="n.*"/>
		  <cat-item lemma="planeta" tags="n.*"/>
		  <cat-item lemma="parlament" tags="n.*"/>
		  <cat-item lemma="casa" tags="n.*"/>
		  <cat-item lemma="roba" tags="n.*"/>
			<cat-item lemma="escola" tags="n.*"/>
			<cat-item lemma="congrés" tags="n.*"/>
			<cat-item lemma="domicili" tags="n.*"/>
			<cat-item lemma="urbanització" tags="n.*"/>
			<cat-item lemma="presó" tags="n.*"/>
			<cat-item lemma="fàbrica" tags="n.*"/>
			<cat-item lemma="muntanya" tags="n.*"/>
			<cat-item lemma="cambra" tags="n.*"/>
			<cat-item lemma="habitació" tags="n.*"/>
			<cat-item lemma="vall" tags="n.*"/>
			<cat-item lemma="frontera" tags="n.*"/>
			<cat-item lemma="castell" tags="n.*"/>
			<cat-item lemma="sala" tags="n.*"/>
			<cat-item lemma="església" tags="n.*"/>
			<cat-item lemma="festa" tags="n.*"/>
			<cat-item lemma="esplanada" tags="n.*"/>
			<cat-item lemma="mercat" tags="n.*"/>
			<cat-item lemma="internet" tags="n.*"/>
			<cat-item lemma="ajuntament" tags="n.*"/>
			<cat-item lemma="polígon" tags="n.*"/>
			<cat-item lemma="auditori" tags="n.*"/>
			<cat-item lemma="estranger" tags="n.*"/>
			<cat-item lemma="poble" tags="n.*"/>
			<cat-item lemma="portal" tags="n.*"/>
			<cat-item lemma="canal" tags="n.*"/>
			<cat-item lemma="terra" tags="n.*"/>
			<cat-item lemma="torre" tags="n.*"/>
			<cat-item lemma="pati" tags="n.*"/>
			<cat-item lemma="programació" tags="n.*"/>
			<cat-item lemma="programa" tags="n.*"/>
			<cat-item lemma="aula" tags="n.*"/>
			<cat-item lemma="edifici" tags="n.*"/>
			<cat-item lemma="hospital" tags="n.*"/>
			<cat-item lemma="cambra" tags="n.*"/>
			<cat-item lemma="internet" tags="n.*"/>
			<cat-item lemma="programari" tags="n.*"/>
			<cat-item lemma="principat" tags="n.*"/>

     </def-cat>
	  
	  <def-cat n="partdia">
		  <cat-item lemma="matí" tags="n.*"/>
		  <cat-item lemma="migidia" tags="n.*"/>
		  <cat-item lemma="tarda" tags="n.*"/>
		  <cat-item lemma="vespre" tags="n.*"/>
		  <cat-item lemma="nit" tags="n.*"/>
	  </def-cat>
	  
	  <def-cat n="mes">
		  <cat-item lemma="gener" tags="n.*"/>
		  <cat-item lemma="febrer" tags="n.*"/>
		  <cat-item lemma="març" tags="n.*"/>
		  <cat-item lemma="abril" tags="n.*"/>
		  <cat-item lemma="maig" tags="n.*"/>
		  <cat-item lemma="juny" tags="n.*"/>
		  <cat-item lemma="juliol" tags="n.*"/>
		  <cat-item lemma="agost" tags="n.*"/>
		  <cat-item lemma="setembre" tags="n.*"/>
		  <cat-item lemma="octubre" tags="n.*"/>
		  <cat-item lemma="novembre" tags="n.*"/>
		  <cat-item lemma="desembre" tags="n.*"/>
	  </def-cat>
	  
</section-def-cats>

<section-def-attrs>

<def-attr n="a_nom">
	  <attr-item tags="n"/>
	  <attr-item tags="n.acr"/>
     </def-attr>

     <def-attr n="a_npant">
	  <attr-item tags="np.ant"/>
     </def-attr>

     <def-attr n="a_nploc">
	  <attr-item tags="np.loc"/>
     </def-attr>        

     <def-attr n="a_det">          
	  <attr-item tags="det.def"/>
	  <attr-item tags="det.ind"/>
	  <attr-item tags="det.dem"/>
	  <attr-item tags="det.pos"/>
	  <attr-item tags="predet"/>
      </def-attr>

      <def-attr n="a_detdef">
	  <attr-item tags="det.def"/>
      </def-attr>
      
      <def-attr n="a_predet">
          <attr-item tags="predet"/>
      </def-attr>

      <def-attr n="a_adjec">          
	  <attr-item tags="adj.ind"/>
	  <attr-item tags="adj.sup"/>
	  <attr-item tags="adj.itg"/>
	  <attr-item tags="adj.pos"/>
	  <attr-item tags="adj"/>
	  <attr-item tags="vblex.pp"/>
      </def-attr>

      <def-attr n="a_adj">          
	  <attr-item tags="adj.ind"/>
	  <attr-item tags="adj.sup"/>
	  <attr-item tags="adj.itg"/>
	  <attr-item tags="adj.pos"/>
	  <attr-item tags="adj"/>
      </def-attr>

      <def-attr n="a_adv">
          <attr-item tags="adv"/>
	  <attr-item tags="preadv"/>
      </def-attr>

      <def-attr n="a_prep">
          <attr-item tags="pr"/>
      </def-attr>    

     

     <def-attr n="a_relat">
          <attr-item tags="rel.adv"/>
	  <attr-item tags="rel.nn"/>
	  <attr-item tags="rel.aa"/>
	  <attr-item tags="rel.an"/>
     </def-attr>

     <def-attr n="a_prn">          	  	  
	  <attr-item tags="prn.tn.p1"/>
	  <attr-item tags="prn.tn.p2"/>
	  <attr-item tags="prn.tn.p3"/>
	  <attr-item tags="prn.tn"/>	 
	  <attr-item tags="prn.tn.ref.p3"/>	 
	  <attr-item tags="prn.tn.pos"/>	     
	  
	  <attr-item tags="prn.itg"/>	 	 	
     </def-attr>

    <def-attr n="a_prnenc">   	  	  
      <attr-item tags="prn.enc"/>
      <attr-item tags="prn.enc.ref"/>
      <attr-item tags="prn.enc.adv"/>
     </def-attr>     

    <def-attr n="a_prnpro">   	  	  
      <attr-item tags="prn.pro"/>
      <attr-item tags="prn.pro.ref"/>
		<attr-item tags="prn.pro.adv"/>
     </def-attr>

     <def-attr n="a_verb">
          <attr-item tags="vblex"/>
	  <attr-item tags="vbser"/>
	  <attr-item tags="vbhaver"/>
	  <attr-item tags="vbmod"/>
     </def-attr>


     <def-attr n="a_inf">
          <attr-item tags="vblex.inf"/>
	  <attr-item tags="vbser.inf"/>
	  <attr-item tags="vbhaver.inf"/>
	  <attr-item tags="vbmod.inf"/>
     </def-attr>
  
     <def-attr n="a_pp">
          <attr-item tags="vblex.pp"/>
	  <attr-item tags="vbser.pp"/>
	  <attr-item tags="vbhaver.pp"/>
	  <attr-item tags="vbmod.pp"/>
     </def-attr>
     
    
    <def-attr n="a_num">
          <attr-item tags="num"/>
    </def-attr>

    <def-attr n="gen">
          <attr-item tags="m"/>
          <attr-item tags="f"/>
	  <attr-item tags="mf"/>
	  <attr-item tags="GD"/>
	  <attr-item tags="nt"/>
      </def-attr>

      <def-attr n="nbr">
          <attr-item tags="sg"/>
	  <attr-item tags="pl"/>
	  <attr-item tags="sp"/>
	  <attr-item tags="ND"/>
      </def-attr>

      <def-attr n="persona">
          <attr-item tags="p1"/>
	  <attr-item tags="p2"/>
	  <attr-item tags="p3"/>
      </def-attr>

      <def-attr n="tipoadv">
          <attr-item tags="itg"/>     
      </def-attr>
    
     
      <def-attr n="tipoenc_pro">
          <attr-item tags="ref.p3.mf.sp"/>  
          <attr-item tags="p1.mf.sg"/>
          <attr-item tags="p1.mf.pl"/>
          <attr-item tags="p2.mf.sg"/>
          <attr-item tags="p2.mf.pl"/>
          <attr-item tags="p3.mf.sg"/>
          <attr-item tags="p3.mf.pl"/>
          <attr-item tags="p3.mf.sp"/> <!--incorrecte, tradueix "li<prn><enc><p3><mf><sp>" per "se", cal canviar diccionari ja que és li-ho<sg> i los-ho<pl> (dárselo)-->
          <attr-item tags="p3.m.sg"/>
          <attr-item tags="p3.m.pl"/>
          <attr-item tags="p3.f.sg"/>
          <attr-item tags="p3.f.pl"/>
          <attr-item tags="p3.nt"/>
			 <attr-item tags="adv"/>
      </def-attr>

      <def-attr n="temps">
	  <attr-item tags="inf"/>
	  <attr-item tags="ger"/>
	  <attr-item tags="pp"/>
	  <attr-item tags="pri"/>
	  <attr-item tags="ifi"/>
	  <attr-item tags="pii"/>
	  <attr-item tags="fti"/>
	  <attr-item tags="cni"/>
	  <attr-item tags="prs"/>
	  <attr-item tags="pis"/>
	  <attr-item tags="fts"/>
	  <attr-item tags="imp"/>
       </def-attr>

  
</section-def-attrs>

<section-def-vars>
      <def-var n="uno"/>
      <def-var n="genero"/>
      <def-var n="numero"/>
      <def-var n="concDet"/>
      <def-var n="concAdj"/>
      <def-var n="concPrimero"/>
      <def-var n="concSegundo"/>
      <def-var n="concTercero"/>
      <def-var n="interrogativa"/>
      <def-var n="exclamativa"/>
		<def-var n="tipusverb"/>
</section-def-vars>
<!--
<section-def-lists>

  <def-list n="verbs_moviment">
    <list-item v="anar"/>
    <list-item v="traslladar"/>
    <list-item v="viatjar"/>
    <list-item v="emigrar"/>
    <list-item v="inmigrar"/>
    <list-item v="moure"/>
    <list-item v="venir"/>
    <list-item v="vindre"/>
    <list-item v="eixir"/>
    <list-item v="sortir"/>
    <list-item v="entrar"/>
    <list-item v="pujar"/>
    <list-item v="baixar"/>
    <list-item v="caminar"/>
    <list-item v="dirigir"/>
    <list-item v="apropar"/>
    <list-item v="córrer"/>
    <list-item v="portar"/>
    <list-item v="passar"/>
    <list-item v="tornar"/>
    <list-item v="regressar"/>
    <list-item v="arribar"/>
    <list-item v="marxar"/>
	 <list-item v="enviar"/>
   </def-list>
	
  <def-list n="verbs_estat">
    <list-item v="conviure"/>
    <list-item v="viure"/>
    <list-item v="actuar"/>
    <list-item v="allotjar"/>
    <list-item v="assentar"/>
    <list-item v="buscar"/>
    <list-item v="celebrar"/>
    <list-item v="centralitzar"/>
    <list-item v="cercar"/>
    <list-item v="col·locar"/>
    <list-item v="concentrar"/>
    <list-item v="desembocar"/>
    <list-item v="endinsar"/>
    <list-item v="establir"/>
    <list-item v="estrenar"/>
    <list-item v="excavar"/>
    <list-item v="exercir"/>
    <list-item v="existir"/>
    <list-item v="exposar"/>
    <list-item v="ficar"/>
    <list-item v="inaugurar"/>
    <list-item v="incloure"/>
    <list-item v="indagar"/>
    <list-item v="ingressar"/>
    <list-item v="inserir"/>
    <list-item v="instal·lar"/>
    <list-item v="introduir"/>
    <list-item v="irrompre"/>
    <list-item v="penetrar"/>
    <list-item v="pescar"/>
    <list-item v="publicar"/>
    <list-item v="reunir"/>
    <list-item v="romandre"/>
    <list-item v="treballar"/>
    <list-item v="trobar"/>
    <list-item v="ubicar"/> 
    <list-item v="estudiar"/> 
  </def-list>

</section-def-lists>-->

<section-def-macros>

  <def-macro n="f_bcond" npar="1"><!--Per mirar si el blanc conté o no format -->
     	<choose>
     	  <when>
     	    <test>
     	      <not>
     	        <equal>
     	          <b pos="1"/>
     	          <lit v=" "/>
     	        </equal>
              </not>
     	    </test>
            <out>
              <b pos="1"/>
            </out>
          </when>     	    
     	</choose>
     </def-macro>
	  
	  <def-macro n="f_gerundi" npar="1"><!-- converteix el gerundi per un "en tot inf"-->
		  
		  <choose>
			  <when> 
				  <test>
					  <equal>
						  <clip pos="1" side="tl" part="temps"/>
						  <lit-tag v="ger"/>
					  </equal>
				  </test>
				  <let>
					  <clip pos="1" side="tl" part="temps"/>
					  <lit-tag v="inf"/>
				  </let>
				  <out>
					  <lu>
						  <get-case-from pos="1">
							  <lit v="en"/>
						  </get-case-from>
						  <lit-tag v="pr"/>
					  </lu>
					  <b/>
					  <lu>
						  <get-case-from pos="1">
							  <lit v="tot"/>
						  </get-case-from>
						  <lit-tag v="predet.m.sg"/>
					  </lu>
					  <b/>
				</out> 
          </when>
		 </choose>
			 </def-macro>

     <def-macro n="f_concord1" npar="1">
        
        <choose><!--To determine value of variables of gender and
                 number and propagate to other rules.  Variables are
                 not used again in this rule -->
          <when> 
            <test>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
            </test>
            <let><var n="genero"/><lit-tag v="m"/></let>
          </when>
	  <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </equal>
            </test>
            <let><var n="genero"/><lit-tag v="f"/></let>
          </when>
	</choose> 
	<choose>
	  <when> 
            <test>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </test>
            <let><var n="numero"/><lit-tag v="sg"/></let>
          </when>
          <when> 
            <test>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </test>
            <let><var n="numero"/><lit-tag v="pl"/></let>
          </when>
	</choose>
        <choose>
          <when>
              <test> <!-- If word has GD or ND, we try to assign the
              gender or number of the previous rule. If there is no
              value for the gender or number variable from previous
              rules, gender will be masculine and number singular.-->
                 <equal>
                    <clip pos="1" side="tl" part="gen"/>
                    <lit-tag v="GD"/>
                 </equal>
	      </test>
	      <choose> 
	          <when>
                    <test>
                      <equal>
                        <var n="genero"/>
                        <lit-tag v="f"/>
                      </equal>
		    </test>
                    <let><clip pos="1" side="tl" part="gen"/><lit-tag v="f"/></let>
                  </when>
                  <otherwise>
                      <let><clip pos="1" side="tl" part="gen"/><lit-tag v="m"/></let>
		  </otherwise>
                 </choose>
                </when>
	     </choose>
	     <choose>
	       <when>
                <test> 
                 <equal>
                    <clip pos="1" side="tl" part="nbr"/>
                    <lit-tag v="ND"/>
                 </equal>
	       </test>
	       <choose> 
	          <when>
                    <test>
                      <equal>
                        <var n="numero"/>
                        <lit-tag v="pl"/>
                      </equal>
		    </test>
                    <let><clip pos="1" side="tl" part="nbr"/><lit-tag v="pl"/></let>                   
                  </when>
                  <otherwise>
                      <let><clip pos="1" side="tl" part="nbr"/><lit-tag v="sg"/></let>
		  </otherwise>
                </choose>
             </when>
         </choose>    
        </def-macro>


      <def-macro n="f_concord2" npar="2">
	<choose>
          <when>
            <test> <!-- do the main and second parameter gender agree?-->
	      <and>
		<or>
		  <equal>
		    <clip pos="2" side="sl" part="gen"/>
		    <clip pos="1" side="sl" part="gen"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</or>
		<or>
		  <equal> <!-- do the main and second parameter number agree?-->
		    <clip pos="2" side="sl" part="nbr"/>
		    <clip pos="1" side="sl" part="nbr"/>
		  </equal>
		  <equal>
		    <clip pos="2" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</or>
	      </and>
	    </test>
	    <let><var n="concPrimero"/><lit v="true"/></let><!-- there is gender and number agreement-->
	  </when>
	  <otherwise> 
	    <let><var n="concPrimero"/><lit v="false"/></let><!-- there isn't gender and number agreement-->
	  </otherwise>
	</choose>
        
	<choose>
	  <when>
	    <test> <!-- Propagate the main parameter gender if it has been modified during the translation  -->
	      <and>
	        <not>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <clip pos="1" side="sl" part="gen"/>
		  </equal>
		</not>
		<not>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
		<not>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <lit-tag v="GD"/>
		  </equal>
		</not>
	      </and>
	    </test>
            <choose>
              <when>
	        <test>
		  <and>
		    <not>
		      <equal>
			  <clip pos="2" side="tl" part="gen"/>
			  <lit-tag v="mf"/>
		      </equal>
		    </not>
		    <not>
		      <and>
		        <equal>
			  <clip pos="2" side="sl" part="gen"/>
		          <lit-tag v="mf"/>
			</equal>
			<not>
		          <equal>
			    <clip pos="2" side="tl" part="gen"/>
			    <lit-tag v="GD"/>
			  </equal>
			</not>
		      </and>
		    </not>
		      <equal>
		        <var n="concPrimero"/>
		        <lit v="true"/>
		      </equal>
		    </and>
	          </test>		 	       
	        <let>
	          <clip pos="2" side="tl" part="gen"/>
	          <clip pos="1" side="tl" part="gen"/> 
	        </let>
	      </when>
	    </choose>
	    </when>
	  </choose>  
          <choose>
	    <when>
	      <test> <!-- Propagate the main parameter number if it has been modified during the translation  -->
		<and>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="1" side="sl" part="nbr"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="nbr"/>
		      <lit-tag v="ND"/>
		    </equal>
		  </not>
		</and>
	      </test>
	      <choose>
	        <when>
	          <test>
		    <and>
		      <not>
		        <equal>
			  <clip pos="2" side="tl" part="nbr"/>
			  <lit-tag v="sp"/>
		        </equal>
		      </not>
		      <not>
		        <and>
			  <equal>
			    <clip pos="2" side="sl" part="nbr"/>
			    <lit-tag v="sp"/>
			  </equal>
			  <not>
			    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="ND"/>
			    </equal>
			  </not>
		        </and>
		      </not>
		      <equal>
		        <var n="concPrimero"/>
		        <lit v="true"/>
		      </equal>
		    </and>
	   	  </test>
		  <let>
		    <clip pos="2" side="tl" part="nbr"/>
		    <clip pos="1" side="tl" part="nbr"/> 
		  </let>
		</when>
	      </choose>
	    </when>
	  </choose>
   
       	  <choose>
	    <when>
	      <test> <!-- Which is the rule general gender? -->
	        <equal>
	   	  <clip pos="1" side="tl" part="gen"/>
	  	  <lit-tag v="m"/>
	        </equal>
	      </test>
	      <let>
	        <var n="genero"/>
	        <lit-tag v="m"/>
	      </let>
	    </when>
	    <when>
	      <test>
	        <equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="f"/>
	        </equal>
	      </test>
	      <let>
	        <var n="genero"/>
	        <lit-tag v="f"/>
	      </let>
	    </when>
	    <when>
	      <test>
	        <equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="m"/>
	        </equal>
	      </test>
	      <let>
	        <var n="genero"/>
	        <lit-tag v="m"/>
	      </let>
	    </when>
	    <when>
	      <test>
	        <equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="f"/>
	        </equal>
	      </test>
	      <let>
	        <var n="genero"/>
	        <lit-tag v="f"/>
	      </let>
	    </when>
	    <when>
	      <test>
	        <and>
		  <equal>
		    <clip pos="1" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		  <not>
		    <equal>
		      <clip pos="1" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
	        </and>
	      </test>
	      <let>
	        <var n="genero"/>
	        <clip pos="1" side="sl" part="gen"/> 
	      </let>
	    </when>
	    <when>
	      <test>
	        <and>
		  <equal>
		    <clip pos="2" side="tl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		  <not>
		    <equal>
		      <clip pos="2" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
	        </and>
	      </test>
	      <let>
	        <var n="genero"/>
	        <clip pos="2" side="sl" part="gen"/> 
	      </let>
	    </when>
	    <otherwise>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>
	</choose>



        <choose>
	  <when><!-- Which is the rule general number? -->
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="numero"/>
	      <clip pos="1" side="sl" part="nbr"/> 
	    </let>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="2" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="numero"/>
	      <clip pos="2" side="sl" part="nbr"/> 
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>
	</choose>

	<choose> <!-- Determine gender and number value if they are undetermined -->
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
      </def-macro>


      <def-macro n="f_concord3" npar="3"> 
          <choose><!-- Look if in source language there is concordance between first and second element -->
            <when>
              <test> 
		<and>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </or>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <clip pos="1" side="sl" part="nbr"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </or>
		</and>
	      </test>
	      <let><var n="concPrimero"/><lit v="true"/></let>
	    </when>
	    <otherwise> 
	    <let><var n="concPrimero"/><lit v="false"/></let>
	    </otherwise>
	</choose>
        <choose><!-- Look if in source language there is concordance between second and third element -->
            <when>
              <test> 
		<and>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </or>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <clip pos="1" side="sl" part="nbr"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </or>
		</and>
	      </test>
	      <let><var n="concSegundo"/><lit v="true"/></let>
	    </when>	 
	    <otherwise> 
	      <let><var n="concSegundo"/><lit v="false"/></let>
	    </otherwise>
	  </choose>


	  <choose><!-- Propagate the main parameter gender if it has been modified during the translation -->
	    <when>
	      <test> 
		<and>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		</and>
	      </test>
                <choose>
		  <when>
		    <test>
		      <and>
		        <not>
		          <equal>
			    <clip pos="2" side="tl" part="gen"/>
			    <lit-tag v="mf"/>
		          </equal>
		        </not>
		        <not>
		          <and>
		      	    <equal>
			      <clip pos="2" side="sl" part="gen"/>
		              <lit-tag v="mf"/>
			    </equal>
			    <not>
			      <equal>
			        <clip pos="2" side="tl" part="gen"/>
			        <lit-tag v="GD"/>
			      </equal>
			    </not>
		          </and>
		        </not>
		        <equal>
		          <var n="concPrimero"/>
		          <lit v="true"/>
		        </equal>
		      </and>
	            </test>
		      <let>
	                <clip pos="2" side="tl" part="gen"/>
	                <clip pos="1" side="tl" part="gen"/> 
	              </let>
		    </when> 
		  </choose>   
                  <choose>
		    <when>
		      <test> 
		        <and>
		          <not>
		            <equal>
			      <clip pos="3" side="tl" part="gen"/>
			      <lit-tag v="mf"/>
		            </equal>
		          </not>
		          <not>
		            <and>
		      	      <equal>
			        <clip pos="3" side="sl" part="gen"/>
		                <lit-tag v="mf"/>
			      </equal>
			      <not>
			        <equal>
			          <clip pos="3" side="tl" part="gen"/>
			          <lit-tag v="GD"/>
			        </equal>
			      </not>
		            </and>
		          </not>
		          <equal>
		            <var n="concSegundo"/>
		            <lit v="true"/>
		          </equal>
		        </and>
	              </test>
                       <let>
	                 <clip pos="3" side="tl" part="gen"/>
	                 <clip pos="1" side="tl" part="gen"/> 
	               </let> 
		    </when> 
		  </choose>
	        </when>
	      </choose>

	    <choose><!-- Propagate the main parameter number if it has been modified during the translation -->
	      <when>
	        <test> 
		  <and>
		    <not>
		      <equal>
		        <clip pos="1" side="tl" part="nbr"/>
		        <clip pos="1" side="sl" part="nbr"/>
		      </equal>
		    </not>
		    <not>
		      <equal>
		        <clip pos="1" side="tl" part="nbr"/>
		        <lit-tag v="sp"/>
		      </equal>
		    </not>
		    <not>
		      <equal>
		        <clip pos="1" side="tl" part="nbr"/>
		        <lit-tag v="ND"/>
		      </equal>
		    </not>
		  </and>
	        </test>
	          <choose>
	            <when>
	              <test>
		        <and>
		          <not>
		      	    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="sp"/>
		            </equal>
		          </not>
		          <not>
		            <and>
			      <equal>
			        <clip pos="2" side="sl" part="nbr"/>
			        <lit-tag v="sp"/>
			      </equal>
			      <not>
			        <equal>
			          <clip pos="2" side="tl" part="nbr"/>
			          <lit-tag v="ND"/>
			        </equal>
			      </not>
		            </and>
		          </not>
		          <equal>
		            <var n="concPrimero"/>
		            <lit v="true"/>
		          </equal>
		        </and>
	   	      </test>
	   	      <let>
	                <clip pos="2" side="tl" part="nbr"/>
	                <clip pos="1" side="tl" part="nbr"/> 
	              </let>
	            </when>
        	  </choose>
                  <choose>
	            <when>
	              <test>
		        <and>
		          <not>
		      	    <equal>
			      <clip pos="3" side="tl" part="nbr"/>
			      <lit-tag v="sp"/>
		            </equal>
		          </not>
		          <not>
		            <and>
			      <equal>
			        <clip pos="3" side="sl" part="nbr"/>
			        <lit-tag v="sp"/>
			      </equal>
			      <not>
			        <equal>
			          <clip pos="3" side="tl" part="nbr"/>
			          <lit-tag v="ND"/>
			        </equal>
			      </not>
		            </and>
		          </not>
		          <equal>
		            <var n="concSegundo"/>
		            <lit v="true"/>
		          </equal>
		        </and>
	   	      </test>
	   	      <let>
	                <clip pos="3" side="tl" part="nbr"/>
	                <clip pos="1" side="tl" part="nbr"/> 
	             </let>
	           </when>
        	 </choose>
	      </when>
	    </choose>



	<choose> <!-- Determine the rule general gender. Priority order: main, second and third element -->
	  <when>
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when> 
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="1" side="sl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="genero"/>
	      <clip pos="1" side="sl" part="gen"/> 
	    </let>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="2" side="sl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="genero"/>
	      <clip pos="2" side="sl" part="gen"/> 
	    </let>
	  </when>
           <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="3" side="sl" part="gen"/>
		    <lit-tag v="mf"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="genero"/>
	      <clip pos="3" side="sl" part="gen"/> 
	    </let>
	  </when>               
	  <otherwise>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>
	</choose>
        
        <choose><!-- Determine the rule general number. Priority order: main, second and third element -->
	  <when>
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>     
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="1" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="numero"/>
	      <clip pos="1" side="sl" part="nbr"/> 
	    </let>
	  </when>
	  <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="2" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="numero"/>
	      <clip pos="2" side="sl" part="nbr"/> 
	    </let>
	  </when>
          <when>
	    <test>
	      <and>
		<equal>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<not>
		  <equal>
		    <clip pos="3" side="sl" part="nbr"/>
		    <lit-tag v="sp"/>
		  </equal>
		</not>
	      </and>
	    </test>
	    <let>
	      <var n="numero"/>
	      <clip pos="3" side="sl" part="nbr"/> 
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>
	</choose>

	<choose> <!-- Assign values to GD and ND -->
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
	<choose>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>      
      </def-macro>     
    
 
      <def-macro n="f_concord4" npar="4">
          <choose>
            <when>
              <test> 
		<and>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </or>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <clip pos="1" side="sl" part="nbr"/>
		    </equal>
		    <equal>
		      <clip pos="2" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </or>
		</and>
	      </test>
	      <let><var n="concPrimero"/><lit v="true"/></let>
	    </when>
	    <otherwise> 
	    <let><var n="concPrimero"/><lit v="false"/></let>
	    </otherwise>
	</choose>
        
        <choose>
            <when>
              <test> 
		<and>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </or>
		  <or>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <clip pos="1" side="sl" part="nbr"/>
		    </equal>
		    <equal>
		      <clip pos="3" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </or>
		</and>
	      </test>
	      <let><var n="concSegundo"/><lit v="true"/></let>
	    </when>	 
	    <otherwise>
	      <let><var n="concSegundo"/><lit v="false"/></let>
	    </otherwise>
	  </choose>

         <choose>
            <when>
              <test> 
		<and>
		  <or>
		    <equal>
		      <clip pos="4" side="sl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		    <equal>
		      <clip pos="4" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </or>
		  <or>
		    <equal>
		      <clip pos="4" side="sl" part="nbr"/>
		      <clip pos="1" side="sl" part="nbr"/>
		    </equal>
		    <equal>
		      <clip pos="4" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </or>
		</and>
	      </test>
	      <let><var n="concTercero"/><lit v="true"/></let>
	    </when>	 
	    <otherwise> 
	      <let><var n="concTercero"/><lit v="false"/></let>
	    </otherwise>
	  </choose>
           

	  <choose>
	    <when>
	      <test> 
		<and>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="sl" part="gen"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <equal>
		      <clip pos="1" side="tl" part="gen"/>
		      <lit-tag v="GD"/>
		    </equal>
		  </not>
		</and>
	      </test>
                <choose>
		  <when>
		    <test>
		      <and>
		        <not>
		          <equal>
			    <clip pos="2" side="tl" part="gen"/>
			    <lit-tag v="mf"/>
		          </equal>
		        </not>
		        <not>
		          <and>
		      	    <equal>
			      <clip pos="2" side="sl" part="gen"/>
		              <lit-tag v="mf"/>
			    </equal>
			    <not>
			      <equal>
			        <clip pos="2" side="tl" part="gen"/>
			        <lit-tag v="GD"/>
			      </equal>
			    </not>
		          </and>
		        </not>
		        <equal>
		          <var n="concPrimero"/>
		          <lit v="true"/>
		        </equal>
		      </and>
	            </test>
		      <let>
	                <clip pos="2" side="tl" part="gen"/>
	                <clip pos="1" side="tl" part="gen"/> 
	              </let>
		    </when> 
		  </choose>
		  <choose>
		  <when>
		    <test>
		      <and>
		        <not>
		          <equal>
			    <clip pos="3" side="tl" part="gen"/>
			    <lit-tag v="mf"/>
		          </equal>
		        </not>
		        <not>
		          <and>
		      	    <equal>
			      <clip pos="3" side="sl" part="gen"/>
		              <lit-tag v="mf"/>
			    </equal>
			    <not>
			      <equal>
			        <clip pos="3" side="tl" part="gen"/>
			        <lit-tag v="GD"/>
			      </equal>
			    </not>
		          </and>
		        </not>
		        <equal>
		          <var n="concSegundo"/>
		          <lit v="true"/>
		        </equal>
		      </and>
	            </test>
		      <let>
	                <clip pos="3" side="tl" part="gen"/>
	                <clip pos="1" side="tl" part="gen"/> 
	              </let>
		    </when> 
		  </choose>  
                  <choose>
		    <when>
		      <test>  
		        <and>
		          <not>
		            <equal>
			      <clip pos="4" side="tl" part="gen"/>
			      <lit-tag v="mf"/>
		            </equal>
		          </not>
		          <not>
		            <and>
		      	      <equal>
			        <clip pos="4" side="sl" part="gen"/>
		                <lit-tag v="mf"/>
			      </equal>
			      <not>
			        <equal>
			          <clip pos="4" side="tl" part="gen"/>
			          <lit-tag v="GD"/>
			        </equal>
			      </not>
		            </and>
		          </not>
		          <equal>
		            <var n="concTercero"/>
		            <lit v="true"/>
		          </equal>
		        </and>
	              </test>
                       <let>
	                 <clip pos="4" side="tl" part="gen"/>
	                 <clip pos="1" side="tl" part="gen"/> 
	               </let> 
		    </when> 
		  </choose>
	        </when>
	      </choose>

	    <choose>
	      <when>
	        <test> 
		  <and>
		    <not>
		      <equal>
		        <clip pos="1" side="tl" part="nbr"/>
		        <clip pos="1" side="sl" part="nbr"/>
		      </equal>
		    </not>
		    <not>
		      <equal>
		        <clip pos="1" side="tl" part="nbr"/>
		        <lit-tag v="sp"/>
		      </equal>
		    </not>
		    <not>
		      <equal>
		        <clip pos="1" side="tl" part="nbr"/>
		        <lit-tag v="ND"/>
		      </equal>
		    </not>
		  </and>
	        </test>
	          <choose>
	            <when>
	              <test>
		        <and>
		          <not>
		      	    <equal>
			      <clip pos="2" side="tl" part="nbr"/>
			      <lit-tag v="sp"/>
		            </equal>
		          </not>
		          <not>
		            <and>
			      <equal>
			        <clip pos="2" side="sl" part="nbr"/>
			        <lit-tag v="sp"/>
			      </equal>
			      <not>
			        <equal>
			          <clip pos="2" side="tl" part="nbr"/>
			          <lit-tag v="ND"/>
			        </equal>
			      </not>
		            </and>
		          </not>
		          <equal>
		            <var n="concPrimero"/>
		            <lit v="true"/>
		          </equal>
		        </and>
	   	      </test>
	   	      <let>
	                <clip pos="2" side="tl" part="nbr"/>
	                <clip pos="1" side="tl" part="nbr"/> 
	              </let>
	            </when>
        	  </choose>
                  <choose>
	            <when>
	              <test>
		        <and>
		          <not>
		      	    <equal>
			      <clip pos="3" side="tl" part="nbr"/>
			      <lit-tag v="sp"/>
		            </equal>
		          </not>
		          <not>
		            <and>
			      <equal>
			        <clip pos="3" side="sl" part="nbr"/>
			        <lit-tag v="sp"/>
			      </equal>
			      <not>
			        <equal>
			          <clip pos="3" side="tl" part="nbr"/>
			          <lit-tag v="ND"/>
			        </equal>
			      </not>
		            </and>
		          </not>
		          <equal>
		            <var n="concSegundo"/>
		            <lit v="true"/>
		          </equal>
		        </and>
	   	      </test>
	   	      <let>
	                <clip pos="3" side="tl" part="nbr"/>
	                <clip pos="1" side="tl" part="nbr"/> 
	             </let>
	           </when>
        	 </choose>
	         <choose>
	           <when>
	             <test>
		       <and>
		         <not>
		    	   <equal>
			     <clip pos="4" side="tl" part="nbr"/>
			     <lit-tag v="sp"/>
		           </equal>
		         </not>
		         <not>
		           <and>
			     <equal>
			       <clip pos="4" side="sl" part="nbr"/>
			       <lit-tag v="sp"/>
			     </equal>
			     <not>
			       <equal>
			         <clip pos="4" side="tl" part="nbr"/>
			         <lit-tag v="ND"/>
			       </equal>
			     </not>
		           </and>
		         </not>
		         <equal>
		           <var n="concTercero"/>
		           <lit v="true"/>
		         </equal>
		       </and>
	   	     </test>
	   	     <let>
	               <clip pos="4" side="tl" part="nbr"/>
	               <clip pos="1" side="tl" part="nbr"/> 
	             </let>
	           </when>
        	 </choose>
	      </when>
	    </choose>
           
	<choose>
	  <when>
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when> 
          <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </equal>
	    </test>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="f"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="genero"/>
	      <lit-tag v="m"/>
	    </let>
	  </otherwise>

	</choose>
        
        <choose>
	  <when>
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </test>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="pl"/>
	    </let>
	  </when> 
	  <otherwise>
	    <let>
	      <var n="numero"/>
	      <lit-tag v="sg"/>
	    </let>
	  </otherwise>
	</choose>

	<choose> 
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when>
	</choose>
	<choose>
          <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="gen"/>
	      <var n="genero"/>
	    </let>
	  </when> 
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
	<choose>
          <when>
	    <test>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="4" side="tl" part="nbr"/>
	      <var n="numero"/>
	    </let>
	  </when>
	</choose>      
      </def-macro> 
		
		<def-macro n="f_lexverb" npar="1"> <!-- això és per donar etiqueta lèxica  a alguns verbs -->
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="anar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="dirigir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="córrer"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="traslladar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="viatjar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="emigrar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="inmigrar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="moure"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="venir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="vindre"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="eixir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="sortir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="entrar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="pujar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="baixar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="apropar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="portar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="passar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="tornar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="arribar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="marxar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="enviar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Anar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Dirigir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Córrer"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Traslladar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Viatjar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Emigrar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Inmigrar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Moure"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Venir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Vindre"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Eixir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Sortir"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Entrar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Pujar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Baixar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Apropar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Portar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Passar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Tornar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Arribar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Marxar"/>
							</equal>
							<equal>
								<clip pos="1" side="sl" part="lem"/>
								<lit v="Enviar"/>
							</equal>
						</or>
					</test>
					<let>
						<var n="tipusverb"/>
						<lit-tag v="mov"/>
					</let>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<or>
									<equal>
										<clip pos="1" side="sl" part="lem"/>
										<lit v="ser"/>
									</equal>
									<equal>
										<clip pos="1" side="sl" part="lem"/>
										<lit v="estar"/>
									</equal>
									<equal>
										<clip pos="1" side="sl" part="lem"/>
										<lit v="Ser"/>
									</equal>
									<equal>
										<clip pos="1" side="sl" part="lem"/>
										<lit v="Estar"/>
									</equal>
								</or>
							</test>
							<let>
								<var n="tipusverb"/>
								<lit-tag v="estat"/>
							</let>
						</when>
						<otherwise>
							<let>
								<var n="tipusverb"/>
								<lit-tag v="no"/>
							</let>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
		</def-macro>
		
		<def-macro n="f_lexprep" npar="1">
			<choose>
				<when>
					<test>
						<equal>
							<clip pos="1" side="sl" part="lem"/>
							<lit v="a"/>
						</equal>
					</test>
					<choose>
						<when>
							<test>
								<equal>
									<var n="tipusverb"/>
									<lit-tag v="mov"/>
								</equal>
							</test>
							<let>
								<clip pos="1" side="tl" part="lem"/>
								<lit v="tà"/>
							</let>
						</when>
						<otherwise>
					<!--		<choose>
								<when>
									<test>
										<equal>
											<var n="tipusverb"/>
											<lit-tag v="estat"/>
										</equal>
									</test>-->
									<let>
										<clip pos="1" side="tl" part="lem"/>
										<lit v="en"/>
									</let>
					<!--			</when>
							</choose>-->
						</otherwise>
					</choose>
				</when>
			</choose>
		
	 </def-macro>
   
</section-def-macros>

<section-rules>
	
	<rule> <!-- REGLA: DETERMINANT -->
		<pattern>
			<pattern-item n="det"/>
		</pattern>
		<action>
			<call-macro n="f_concord1">
				<with-param pos="1"/>
			</call-macro>     
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu> 
			</out>
		</action>
	</rule>
	
	
	
	<rule> <!-- REGLA: NOM -->
		<pattern>
			<pattern-item n="nom"/>
		</pattern>
		<action>	
			<call-macro n="f_concord1">
				<with-param pos="1"/>
			</call-macro>     
			<out>  
				<lu> 
					<clip pos="1" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: ADJECTIU -->
		<pattern>
			<pattern-item n="adj"/>
		</pattern>
		<action>	
			<call-macro n="f_concord1">
				<with-param pos="1"/>
			</call-macro>     
			<out>   
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: PRONOM -->
		<pattern>
			<pattern-item n="prn"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test> 
						<equal>
							<clip pos="1" side="tl" part="gen"/>
							<lit-tag v="GD"/>
						</equal>
					</test>
					<let>
						<clip pos="1" side="tl" part="gen"/>
						<lit-tag v="m"/>
					</let>
				</when>
			</choose>
			<choose>
				<when>
					<test> 
						<equal>
							<clip pos="1" side="tl" part="nbr"/>
							<lit-tag v="ND"/>
						</equal>
					</test>
					<let>
						<clip pos="1" side="tl" part="nbr"/>
						<lit-tag v="sg"/>
					</let>
				</when>
			</choose>	
			<out>   
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DETERMINANT NOM -->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/> 
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NOM ADJECTIU-->
		<pattern>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="1"/>
				<with-param pos="2"/>
			</call-macro>     
			<out>   
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	
	<rule> <!-- REGLA: ADJECTIU NOM -->
		<pattern>
			<pattern-item n="adjec"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro> 
			<out> 
				<lu>
					<clip pos="1" side="tl" part="lemh"/>
					<clip pos="1" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="1" side="tl" part="lemq"/>
				</lu>  
				<b pos="1"/>
				<lu> 
					<clip pos="2" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DET NOM ADJECTIU-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>
				<with-param pos="3"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>    
				<lu>  
					<clip pos="1" side="tl" part="whole"/>
				</lu> 
				<b pos="1"/>
				
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DET NOM ADJECTIU ADJECTIU-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord4">
				<with-param pos="2"/>
				<with-param pos="3"/>
				<with-param pos="4"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>    
				<lu>  
					<clip pos="1" side="tl" part="whole"/>
				</lu> 
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>  
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NOM ADJECTIU ADJECTIU-->
		<pattern>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="1"/>
				<with-param pos="2"/>
				<with-param pos="3"/>
			</call-macro>     
			<out>    
				<lu>  
					<clip pos="1" side="tl" part="whole"/>
				</lu> 
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	
	<rule> <!-- REGLA: DET ADJECTIU NOM-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="adjec"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>  
			<out>  
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>

	
	<rule> <!-- REGLA: PREDET DET NOM-->
		<pattern>
			<pattern-item n="predet"/>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>           
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>	    
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: PREDET DET NOM ADJECTIU-->
		<pattern>
			<pattern-item n="predet"/>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord4">
				<with-param pos="3"/>
				<with-param pos="4"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DETERMINANT ADJECTIU-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: ADJECTIU NOM ADJECTIU-->
		<pattern> 
			<pattern-item n="adj"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>
				<with-param pos="3"/>
				<with-param pos="1"/>
			</call-macro>  
			<out>  
				<lu>
					<clip pos="1" side="tl" part="lemh"/>
					<clip pos="1" side="tl" part="a_adjec"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="1" side="tl" part="lemq"/>
				</lu>  
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DET ADJECTIU NOM ADJECTIU -->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="adjec"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord4">
				<with-param pos="3"/>
				<with-param pos="4"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>  
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	
	<rule> <!-- REGLA: NOM ADVERBI ADJECTIU-->
		<pattern>
			<pattern-item n="nom"/>
			<pattern-item n="adv"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="1"/>
				<with-param pos="3"/>
			</call-macro>     
			<out>   
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DET NOM ADVERBI ADJECTIU -->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adv"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>
				<with-param pos="1"/>
				<with-param pos="4"/>
			</call-macro>     
			<out>  
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>    
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	
	<rule> <!-- REGLA: DET ADVERBI NOM-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="adv"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="3"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>   
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	
	<rule> <!-- REGLA: NUMERAL NOM -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NUMERAL ADJECTIU -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord2">
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	
	<rule> <!-- REGLA: NUMERAL NOM ADJECTIU -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>
				<with-param pos="1"/>
				<with-param pos="3"/>
			</call-macro>     
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NUMERAL ADJECTIU NOM -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="adjec"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro> 
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NUMERAL ADJECTIU NOM -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="adjec"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro> 
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_adjec"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NUMERAL prep det NOM -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="prep"/>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="4"/>
				<with-param pos="3"/>
				<with-param pos="1"/>
			</call-macro> 
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>  
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NUMERAL prep det NOM adj-->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="prep"/>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord4">
				<with-param pos="4"/>
				<with-param pos="3"/>
				<with-param pos="5"/>
				<with-param pos="1"/>
			</call-macro> 
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>  
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="whole"/>
				</lu>
				<b pos="4"/>
				<lu>
					<clip pos="5" side="tl" part="lemh"/>
					<clip pos="5" side="tl" part="a_adjec"/>
					<clip pos="5" side="tl" part="gen"/>
					<clip pos="5" side="tl" part="nbr"/>
					<clip pos="5" side="tl" part="lemq"/>
				</lu>  
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: NUMERAL prep det adj NOM -->
		<pattern>
			<pattern-item n="num"/>
			<pattern-item n="prep"/>
			<pattern-item n="det"/>
			<pattern-item n="adjec"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord4">
				<with-param pos="4"/>
				<with-param pos="5"/>
				<with-param pos="3"/>
				<with-param pos="1"/>
			</call-macro> 
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>  
				<b pos="3"/>
				<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_adjec"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				</lu>  
				<b pos="4"/>
				<lu>
					<clip pos="5" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!-- REGLA: DET NUMERAL NOM -->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="num"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>     
				<lu>
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>  
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
			</out>
		</action>
	</rule>
	<rule> <!-- REGLA: RELAT --> <!-- revisar què fa aquesta regla!!!! : qui <ND>?-->
			<pattern>
				<pattern-item n="relat"/>
			</pattern>
			<action>
				<call-macro n="f_concord1">
					<with-param pos="1"/>
				</call-macro>     
				<out>  
					<lu> 
						<clip pos="1" side="tl" part="whole"/>
					</lu>
				</out>
			</action>
   </rule>
	
	<rule> <!-- REGLA: PRETÈRIT INDEFINIT --><!-- tradueix "vaig dormir" per "dormí" -->
		<pattern>
			<pattern-item n="anar"/>
			<pattern-item n="inf"/>
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="2"/>
			</call-macro>   
			<out>
				<lu>
					<get-case-from pos="1">            
						<clip pos="2" side="tl" part="lemh"/>
					</get-case-from>
					<clip pos="2" side="tl" part="a_verb"/>
					<lit-tag v="ifi"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>                  
				</lu>  
			</out>  
			<call-macro n="f_bcond">
				<with-param pos="1"/>
			</call-macro>
		</action>
	</rule>
	
	 <rule> <!-- REGLA: PRETÈRIT INDEFINIT + ENCLÍTIC --><!-- Per traduir "van acabar-se" por "s'acabèren" -->
		 <pattern>
			 <pattern-item n="anar"/>
			 <pattern-item n="inf"/>
			 <pattern-item n="prnenc"/>
		 </pattern>
		 <action>
			 <call-macro n="f_lexverb">
				 <with-param pos="2"/>
			 </call-macro>   
			 <out>
				 <lu>
					 <get-case-from pos="1">
						 <clip pos="3" side="tl" part="lem"/>
					 </get-case-from> 
					 <lit-tag v="prn.pro"/>
					 <clip pos="3" side="sl" part="tipoenc_pro"/>
				 </lu>
				 <b pos="1"/>
				 <lu>
					 <clip pos="2" side="tl" part="lemh"/>
					 <clip pos="2" side="tl" part="a_verb"/>
					 <lit-tag v="ifi"/>
					 <clip pos="1" side="tl" part="persona"/>
					 <clip pos="1" side="tl" part="nbr"/>
					 <clip pos="2" side="tl" part="lemq"/>                  
				 </lu> 
			 </out>
			 
		 </action>
	 </rule>

	 
	 <rule> <!-- REGLA: PRETÈRIT INDEFINIT + ENCLÍTIC + ENCLÍTIC --><!-- Per traduir "vam acabar-nos-els" por "mos les acabèrem"-->
		 <pattern>
			 <pattern-item n="anar"/>
			 <pattern-item n="inf"/>
			 <pattern-item n="prnenc"/>
			 <pattern-item n="prnenc"/>
		 </pattern>
		 <action>
			 <call-macro n="f_lexverb">
				 <with-param pos="2"/>
			 </call-macro>   
			 <out>
				 <lu>
					 <get-case-from pos="1">
						 <clip pos="3" side="tl" part="lem"/>
					 </get-case-from> 
					 <lit-tag v="prn.pro"/>
					 <clip pos="3" side="sl" part="tipoenc_pro"/>
				 </lu>
				 <b pos="1"/>
				 <lu>		
					 <clip pos="4" side="tl" part="lem"/>                
					 <lit-tag v="prn.pro"/>
					 <clip pos="4" side="sl" part="tipoenc_pro"/>
				 </lu>
				 <b/>			
				 
				 <lu>
					 <clip pos="2" side="tl" part="lemh"/>
					 <clip pos="2" side="tl" part="a_verb"/>
					 <lit-tag v="ifi"/>
					 <clip pos="1" side="tl" part="persona"/>
					 <clip pos="1" side="tl" part="nbr"/>
					 <clip pos="2" side="tl" part="lemq"/>                  
				 </lu> 
			 </out>
			 
		 </action>
	</rule>

	<rule> <!--REGLA: VERB (per a multiparaules sense enclítics)-->
		<pattern>
			<pattern-item n="verb"/>
		</pattern>
		<action>	
			<call-macro n="f_gerundi">
				<with-param pos="1"/>
			</call-macro>
			<call-macro n="f_lexverb">
				<with-param pos="1"/>
			</call-macro>   
			
			<out>                
				<lu>
					<clip pos="1" side="tl" part="lemh"/>
					<clip pos="1" side="tl" part="a_verb"/>
					<clip pos="1" side="tl" part="temps"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="1" side="tl" part="lemq"/>
				</lu>		
			</out>
		</action>
	</rule>
	
	<rule> <!--REGLA: VERB + ENCLÍTIC-->
		<pattern>
			<pattern-item n="verb"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="1"/>
			</call-macro>   
			
			<call-macro n="f_gerundi">
				<with-param pos="1"/>
			</call-macro>
			<out> 
				<mlu>
					<lu>
						<clip pos="1" side="tl" part="lemh"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="persona"/>
						<clip pos="1" side="tl" part="gen"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_prnenc"/>
						<clip pos="2" side="tl" part="persona"/>
						<clip pos="2" side="tl" part="gen"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="1" side="tl" part="lemq"/>
					</lu>
				</mlu>
			</out>
		</action>
	</rule>
	
	
	<rule> <!--REGLA: VERB + ENCLÍTIC + ENCLÍTIC-->
		<pattern>
			<pattern-item n="verb"/>
			<pattern-item n="prnenc"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="1"/>
			</call-macro>   
			
			<call-macro n="f_gerundi">
				<with-param pos="1"/>
			</call-macro>
			<out>
				<mlu>
					<lu>
						<clip pos="1" side="tl" part="lemh"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="persona"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_prnenc"/>
						<clip pos="2" side="tl" part="persona"/>
						<clip pos="2" side="tl" part="gen"/>
						<clip pos="2" side="tl" part="nbr"/>
					</lu>  
					<lu>
						<clip pos="3" side="tl" part="lem"/>
						<clip pos="3" side="tl" part="a_prnenc"/>
						<clip pos="3" side="tl" part="persona"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="1" side="tl" part="lemq"/>
					</lu>  
				</mlu>
			</out>
		</action>
	</rule>
	
	<rule> <!--REGLA: està cantant-> canta -->
		<pattern>
			<pattern-item n="estar"/>
			<pattern-item n="gerundi"/>
		</pattern>
		<action>	
			<call-macro n="f_lexverb">
				<with-param pos="2"/>
			</call-macro>   
			<out>
				<lu>
					<get-case-from pos="1">            
						<clip pos="2" side="tl" part="lemh"/>
					</get-case-from>
					<clip pos="2" side="tl" part="a_verb"/>
					<clip pos="1" side="tl" part="temps"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>		
			</out>
			<call-macro n="f_bcond">
				<with-param pos="1"/>
			</call-macro>
		</action>
	</rule>
	
	<rule> <!--REGLA: està cantant-la -> la cante -->
		<pattern>
			<pattern-item n="estar"/>
			<pattern-item n="gerundi"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="2"/>
			</call-macro>   
			<out> 
				<lu>
					<get-case-from pos="1">
						<clip pos="3" side="tl" part="lem"/>
					</get-case-from>
					<lit-tag v="prn.pro"/>
					<clip pos="3" side="tl" part="persona"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_verb"/>
					<clip pos="1" side="tl" part="temps"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>
			</out>
			<call-macro n="f_bcond">
				<with-param pos="2"/>
			</call-macro>
		</action>
	</rule>
	
	<rule> <!--REGLA: està cantant-nos-la -> mos la cante -->
		<pattern>
			<pattern-item n="estar"/>
			<pattern-item n="gerundi"/>
			<pattern-item n="prnenc"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="2"/>
			</call-macro>   
			<out> 
				<lu>
					<get-case-from pos="1">
						<clip pos="3" side="tl" part="lem"/>
					</get-case-from>
					<lit-tag v="prn.pro"/>
					<clip pos="3" side="tl" part="persona"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="4" side="tl" part="lem"/>
					<lit-tag v="prn.pro"/>
					<clip pos="4" side="tl" part="persona"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_verb"/>
					<clip pos="1" side="tl" part="temps"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>
			</out>
			<call-macro n="f_bcond">
				<with-param pos="3"/>
			</call-macro>
		</action>
	</rule>

	<rule> <!--REGLA: l'està cantant -> la cante -->
		<pattern>
			<pattern-item n="prnpro"/>
			<pattern-item n="estar"/>
			<pattern-item n="gerundi"/>
			
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="3"/>
			</call-macro>   
			<out> 
				<lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_prnpro"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_verb"/>
					<clip pos="2" side="tl" part="temps"/>
					<clip pos="2" side="tl" part="persona"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>
			</out>
			<call-macro n="f_bcond">
				<with-param pos="2"/>
			</call-macro>
		</action>
	</rule>
	
	<rule> <!--REGLA: Ens l'està cantant -> mos la cante -->
		<pattern>
			<pattern-item n="prnpro"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="estar"/>
			<pattern-item n="gerundi"/>
		</pattern>
		<action>
			<call-macro n="f_lexverb">
				<with-param pos="2"/>
			</call-macro>   
			<out> 
				<lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_prnpro"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_prnpro"/>
					<clip pos="2" side="tl" part="persona"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_verb"/>
					<clip pos="3" side="tl" part="temps"/>
					<clip pos="3" side="tl" part="persona"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
				</lu>
			</out>
			<call-macro n="f_bcond">
				<with-param pos="3"/>
			</call-macro>
		</action>
	</rule>
	

	<rule> <!--REGLA: PRONOM DETERMINANT NOM: "Nosaltres les dones : nosates es el-que-sigui" -->
		<pattern>
			<pattern-item n="nosaltres"/>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>  
				<lu>  
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_prn"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				</lu> 
				<b pos="1"/>
				
				<lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_det"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lem"/>
					<clip pos="3" side="tl" part="a_nom"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
				</lu>
			</out>
		</action>
	</rule>
	
	<rule> <!--REGLA: PRONOM DETERMINANT ADJECTIU-->
		<pattern>
			<pattern-item n="nosaltres"/>
			<pattern-item n="det"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="3"/>
				<with-param pos="2"/>
				<with-param pos="1"/>
			</call-macro>     
			<out>  
				<lu>  
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_prn"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
				</lu> 
				<b pos="1"/>
				
				<lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_det"/>
					<clip pos="2" side="tl" part="gen"/>
					<clip pos="2" side="tl" part="nbr"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_adjec"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>
			</out>
		</action>
	</rule>

	<!-- en aranès ens mengem el det davant de nom propi -->
<rule> <!--REGLA: DETDEF + NOM PROPI (antropònim)-->
      <pattern>
	<pattern-item n="detdef"/>
	<pattern-item n="npant"/>
    </pattern>
    <action>
      <call-macro n="f_bcond">
			<with-param pos="1"/>
      </call-macro>
      <out>
			<lu>
	  			<clip pos="2" side="tl" part="lem"/>
	  			<clip pos="2" side="tl" part="a_npant"/>
			</lu>
      </out>
    </action>
</rule> 


<rule> <!-- REGLA: per+inf > entà inf -->
	<pattern>
		<pattern-item n="per"/>
		<pattern-item n="inf"/>
	</pattern>
	<action>
		<out>
			<lu>
				<get-case-from pos="1">
					<lit v="entà"/>
				</get-case-from>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="lemh"/>
				<clip pos="2" side="tl" part="a_inf"/>
				<clip pos="2" side="tl" part="lemq"/>       
			</lu>
	</out>  
	</action>
</rule>
	
	
<rule> <!-- REGLA: per+inf+enc > entà inf+enc -->
	<pattern>
		<pattern-item n="per"/>
		<pattern-item n="inf"/>
		<pattern-item n="prnenc"/>
	</pattern>
	<action>
		<out>
			<lu>
				<get-case-from pos="1">
					<lit v="entà"/>
				</get-case-from>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<mlu>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_inf"/>
				</lu>
				<lu>
					<clip pos="3" side="tl" part="lem"/>
					<clip pos="3" side="tl" part="a_prnenc"/>
					<clip pos="3" side="tl" part="persona"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>
			</mlu>
		</out>  
	</action>
</rule>

<rule> <!-- REGLA: per+inf+enc+enc > entà inf+enc+enc -->
	<pattern>
		<pattern-item n="per"/>
		<pattern-item n="inf"/>
		<pattern-item n="prnenc"/>
		<pattern-item n="prnenc"/>
	</pattern>
	<action>
		<out>
			<lu>
				<get-case-from pos="1">
					<lit v="entà"/>
				</get-case-from>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<mlu>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_inf"/>
				</lu>
				<lu>
					<clip pos="3" side="tl" part="lem"/>
					<clip pos="3" side="tl" part="a_prnenc"/>
					<clip pos="3" side="tl" part="persona"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
				</lu>
				<lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_prnenc"/>
					<clip pos="4" side="tl" part="persona"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>
			</mlu>
		</out>  
	</action>
</rule>

	<rule> <!--REGLA: a + nploc = a Barcelona -> en Barcelona-->
      <pattern>
			<pattern-item n="prep"/>
			<pattern-item n="nploc"/>
      </pattern>
      <action>	
			<call-macro n="f_lexprep">
				<with-param pos="1"/>
			</call-macro>   
			<out>
				<lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_prep"/>
				</lu> 
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="lem"/>
					<clip pos="2" side="tl" part="a_nploc"/> 
				</lu>
			</out>   
      </action>
	</rule> 
	
	<rule> <!--REGLA: a + det+ nploc = a Barcelona -> en Barcelona-->
		<pattern>
			<pattern-item n="prep"/>
			<pattern-item n="det"/>
			<pattern-item n="nploc"/>
		</pattern>
		<action>	
			<call-macro n="f_concord1">
				<with-param pos="2"/>
			</call-macro>  
			<call-macro n="f_lexprep">
				<with-param pos="1"/>
			</call-macro>   
			<out>
				<lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_prep"/>
				</lu> 
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="lem"/>
					<clip pos="3" side="tl" part="a_nploc"/> 
				</lu>
			</out>   
		</action>
	</rule> 

<rule> <!--REGLA: a + nploc = a ciutat -> en ciutat-->
	<pattern>
		<pattern-item n="prep"/>
		<pattern-item n="nloc"/>
	</pattern>
	<action>	 
		<call-macro n="f_lexprep">
			<with-param pos="1"/>
		</call-macro>   
		<out>
			<lu>
				<clip pos="1" side="tl" part="lem"/>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="whole"/>
			</lu>
		</out>   
	</action>
</rule> 

<rule> <!--REGLA: a + det + nploc = a la ciutat -> ena ciutat-->
	<pattern>
		<pattern-item n="prep"/>
		<pattern-item n="det"/>
		<pattern-item n="nloc"/>
	</pattern>
	<action>	  
		<call-macro n="f_concord2">
			<with-param pos="3"/>
			<with-param pos="2"/>
		</call-macro> 
		<call-macro n="f_lexprep">
			<with-param pos="1"/>
		</call-macro>   
			
		<out>
			<lu>
				<clip pos="1" side="tl" part="lem"/>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="whole"/>
			</lu>
			<b pos="2"/>
			<lu>
				<clip pos="3" side="tl" part="whole"/>
			</lu>
		</out>   
	</action>
</rule> 


<rule> <!--REGLA: a + det + adj + nloc = a la bonica ciutat -> ena adj ciutat-->
	<pattern>
		<pattern-item n="prep"/>
		<pattern-item n="det"/>
		<pattern-item n="adj"/>
		<pattern-item n="nloc"/>
	</pattern>
	<action>	  
		<call-macro n="f_lexprep">
			<with-param pos="1"/>
		</call-macro>   
		<call-macro n="f_concord3">
			<with-param pos="4"/>
			<with-param pos="3"/>
			<with-param pos="2"/>
		</call-macro> 
		<out>
			<lu>
				<clip pos="1" side="tl" part="lem"/>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="whole"/>
			</lu>
			<b pos="2"/>
			<lu>
				<clip pos="3" side="tl" part="whole"/>
			</lu>
			<b pos="3"/>
			<lu>
				<clip pos="4" side="tl" part="whole"/>
			</lu>
		</out>   
	</action>
</rule> 

<rule> <!--REGLA: a + det + nloc + adj = a la bonica ciutat -> ena adj ciutat-->
	<pattern>
		<pattern-item n="prep"/>
		<pattern-item n="det"/>
		<pattern-item n="nloc"/>
		<pattern-item n="adj"/>
	</pattern>
	<action>	  
		<call-macro n="f_lexprep">
			<with-param pos="1"/>
		</call-macro>   
		<call-macro n="f_concord3">
			<with-param pos="3"/>
			<with-param pos="4"/>
			<with-param pos="2"/>
		</call-macro> 
		<out>
			<lu>
				<clip pos="1" side="tl" part="lem"/>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="whole"/>
			</lu>
			<b pos="2"/>
			<lu>
				<clip pos="3" side="tl" part="whole"/>
			</lu>
			<b pos="3"/>
			<lu>
				<clip pos="4" side="tl" part="whole"/>
			</lu>
		</out>   
	</action>
</rule> 

<rule> <!--REGLA: a + det + partdia = al matí -> peth maitin-->
	<pattern>
		<pattern-item n="a"/>
		<pattern-item n="det"/>
		<pattern-item n="partdia"/>
	</pattern>
	<action>	  
		<call-macro n="f_concord2">
			<with-param pos="3"/>
			<with-param pos="2"/>
		</call-macro> 
		
		<out>
			<lu>
				<get-case-from pos="1">
						<lit v="per"/>
					</get-case-from>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="whole"/>
			</lu>
			<b pos="2"/>
			<lu>
				<clip pos="3" side="tl" part="whole"/>
			</lu>
		</out>   
	</action>
</rule> 

<rule> <!--REGLA: a + det + mes= al desembre -> en deseme-->
	<pattern>
		<pattern-item n="a"/>
		<pattern-item n="det"/>
		<pattern-item n="mes"/>
	</pattern>
	<action>	  
		<out>
			<lu>
				<get-case-from pos="1">
					<lit v="en"/>
				</get-case-from>
				<clip pos="1" side="tl" part="a_prep"/>
			</lu> 
			<b pos="1"/>
			<lu>
				<clip pos="2" side="tl" part="whole"/>
			</lu>
			<b pos="2"/>
			<lu>
				<clip pos="3" side="tl" part="whole"/>
			</lu>
		</out>   
	</action>
</rule> 


<rule> <!-- REGLA: reset variables-->
	<pattern>
		<pattern-item n="sent"/>
	</pattern>
	<action>
		<let>
			<var n="numero"/>
			<lit-tag v="sg"/>
		</let>
		<let>
			<var n="genero"/>
			<lit-tag v="m"/>
		</let>
		<let>
			<var n="tipusverb"/>
			<lit v="no"/>
		</let>
		<out>
			<lu>
				<clip pos="1" side="tl" part="whole"/>
			</lu>
		</out>
	</action>
</rule>
    
	</section-rules>

</transfer>
