<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- -*- nxml -*- -->
<transfer>
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/>
    </def-cat>
    <def-cat n="nomp">
      <cat-item tags="np.ant"/>
    </def-cat>
    <def-cat n="nploc">
      <cat-item tags="np.loc"/>
    </def-cat>
    <def-cat n="np">
      <cat-item tags="np.*"/>
    </def-cat>
    <def-cat n="det">
      <cat-item tags="det.*"/>
    </def-cat>
    <def-cat n="predet">
      <cat-item tags="predet.*"/>
    </def-cat>
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>
    <def-cat n="adj">
      <cat-item tags="adj.*"/>
    </def-cat>
    <def-cat n="tnom">
      <cat-item tags="n.*"/>
      <cat-item tags="adj.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>
    <def-cat n="pp">
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vter.pp.*"/>
    </def-cat>
    <def-cat n="haber">
      <cat-item tags="vbhaver.*"/>
    </def-cat>
    <def-cat n="vbhaverpri">
      <cat-item tags="vbhaver.pri.*"/>
    </def-cat>
    <def-cat n="ger">
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbmod.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vter.ger"/>
    </def-cat>
    <def-cat n="adv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    <def-cat n="mas_menos">
      <cat-item lemma="más" tags="adv"/>
      <cat-item lemma="menos" tags="adv"/>
    </def-cat>
    <def-cat n="itg">
      <cat-item tags="prn.itg"/>
      <cat-item tags="adv.itg"/>
    </def-cat>
    <def-cat n="cnjsub">
      <cat-item tags="cnjsub"/>
    </def-cat>
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
    <def-cat n="a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>
    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>
    <def-cat n="en">
      <cat-item lemma="en" tags="pr"/>
    </def-cat>
    <def-cat n="en_de">
      <cat-item lemma="de" tags="pr"/>
      <cat-item lemma="en" tags="pr"/>
    </def-cat>
    <def-cat n="cuyo">
      <cat-item tags="rel.aa.*"/>
    </def-cat>
    <def-cat n="rel">
      <cat-item tags="rel.adv"/>
      <cat-item tags="rel.an.*"/>
    </def-cat>
    <def-cat n="prn">
      <cat-item tags="prn.tn.*"/>
      <cat-item tags="prn.itg.*"/>
    </def-cat>
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>
    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>
    <def-cat n="verb">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbter.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>
    <def-cat n="vbmod">
      <cat-item tags="vbmod.*"/>
    </def-cat>
    <def-cat n="vbser">
      <cat-item tags="vbser.*"/>
    </def-cat>
    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>
    <def-cat n="perif">
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbmod.ifi.*"/>
    </def-cat>
    <def-cat n="vbir">
      <cat-item lemma="ir" tags="vblex.*"/>
    </def-cat>
    <def-cat n="lquest">
      <cat-item tags="lquest"/>
    </def-cat>
    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>
    <def-cat n="num">
      <cat-item tags="num.*"/>
    </def-cat>
    <def-cat n="percent">
      <cat-item tags="num.percent"/>
    </def-cat>
    <def-cat n="any">
      <cat-item lemma="[1-3][0-9][0-9][0-9]" tags="num.*"/>
    </def-cat>
    <def-cat n="estar">
      <cat-item lemma="estar" tags="vblex.*"/>
    </def-cat>
    <def-cat n="gustar">
      <cat-item lemma="gustar" tags="vblex.*"/>
    </def-cat>
    <def-cat n="nomtempo">
      <cat-item lemma="lunes" tags="n.*"/>
      <cat-item lemma="martes" tags="n.*"/>
      <cat-item lemma="miércoles" tags="n.*"/>
      <cat-item lemma="jueves" tags="n.*"/>
      <cat-item lemma="viernes" tags="n.*"/>
      <cat-item lemma="sábado" tags="n.*"/>
      <cat-item lemma="domingo" tags="n.*"/>
      <cat-item lemma="semana" tags="n.*"/>
      <cat-item lemma="día" tags="n.*"/>
      <cat-item lemma="año" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*"/>
      <cat-item lemma="siglo" tags="n.*"/>
      <cat-item lemma="milenio" tags="n.*"/>
      <cat-item lemma="lustro" tags="n.*"/>
    </def-cat>
    <def-cat n="mes">
      <cat-item lemma="enero" tags="n.*"/>
      <cat-item lemma="febrero" tags="n.*"/>
      <cat-item lemma="marzo" tags="n.*"/>
      <cat-item lemma="abril" tags="n.*"/>
      <cat-item lemma="mayo" tags="n.*"/>
      <cat-item lemma="junio" tags="n.*"/>
      <cat-item lemma="julio" tags="n.*"/>
      <cat-item lemma="agosto" tags="n.*"/>
      <cat-item lemma="septiembre" tags="n.*"/>
      <cat-item lemma="octubre" tags="n.*"/>
      <cat-item lemma="noviembre" tags="n.*"/>
      <cat-item lemma="diciembre" tags="n.*"/>
    </def-cat>
    <def-cat n="pred">
      <cat-item lemma="estar" tags="vblex.*"/>
      <cat-item lemma="parecer" tags="vblex.*"/>
      <cat-item lemma="quedar" tags="vblex.*"/>
      <cat-item lemma="continuar" tags="vblex.*"/>
      <cat-item lemma="acabar" tags="vblex.*"/>
      <cat-item lemma="cambiar" tags="vblex.*"/>
      <cat-item lemma="sentir" tags="vblex.*"/>
      <cat-item lemma="ser" tags="vbser.*"/>
    </def-cat>
    <def-cat n="prntn">
      <cat-item lemma="mí" tags="prn.tn.*"/>
      <cat-item lemma="ti" tags="prn.tn.*"/>
      <cat-item lemma="él" tags="prn.tn.*"/>
      <cat-item lemma="nosotros" tags="prn.tn.*"/>
      <cat-item lemma="vosotros" tags="prn.tn.*"/>
    </def-cat>
  </section-def-cats>
  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
    </def-attr>
    <def-attr n="a_nomp">
      <attr-item tags="np.ant"/>
    </def-attr>
    <def-attr n="a_nploc">
      <attr-item tags="np.loc"/>
    </def-attr>
    <def-attr n="a_det">
      <attr-item tags="det.def"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.dem"/>
      <attr-item tags="det.pos"/>
    </def-attr>
    <def-attr n="a_predet">
      <attr-item tags="predet"/>
    </def-attr>
    <def-attr n="a_adjec">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
      <attr-item tags="vblex.pp"/>
    </def-attr>
    <def-attr n="a_tnom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
      <attr-item tags="vblex.pp"/>
    </def-attr>
    <def-attr n="a_adj">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
    </def-attr>
    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
    </def-attr>
    <def-attr n="a_prep">
      <attr-item tags="pr"/>
    </def-attr>
    <def-attr n="a_cuyo">
      <attr-item tags="rel.aa"/>
    </def-attr>
    <def-attr n="a_prn">
      <attr-item tags="prn.tn.p1"/>
      <attr-item tags="prn.tn.p2"/>
      <attr-item tags="prn.tn.p3"/>
      <attr-item tags="prn.tn"/>
      <attr-item tags="prn.tn.ref.p3"/>
      <attr-item tags="prn.tn.pos"/>
      <attr-item tags="prn.itg"/>
    </def-attr>
    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbter"/>
      <attr-item tags="vbmod"/>
    </def-attr>
    <def-attr n="a_inf">
      <attr-item tags="vblex.inf"/>
      <attr-item tags="vbser.inf"/>
      <attr-item tags="vbhaver.inf"/>
      <attr-item tags="vbmod.inf"/>
    </def-attr>
    <def-attr n="a_perif">
      <attr-item tags="vblex.ifi"/>
      <attr-item tags="vbser.ifi"/>
      <attr-item tags="vbhaver.ifi"/>
      <attr-item tags="vbmod.ifi"/>
    </def-attr>
    <def-attr n="a_lquest">
      <attr-item tags="lquest"/>
    </def-attr>
    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.percent"/>
    </def-attr>
    <def-attr n="a_prnenc">
      <attr-item tags="prn.enc"/>
      <attr-item tags="prn.enc.ref"/>
    </def-attr>
    <def-attr n="a_prnpro">
      <attr-item tags="prn.pro"/>
      <attr-item tags="prn.pro.ref"/>
    </def-attr>
    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
    </def-attr>
    <def-attr n="categoria">
      <attr-item tags="cnjcoo"/>
      <attr-item tags="cnjsub"/>
      <attr-item tags="adv.itg"/>
      <attr-item tags="rel"/>
      <attr-item tags="predet"/>
      <attr-item tags="prn.tn"/>
      <attr-item tags="prn.itg"/>
    </def-attr>
		 		
    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>
    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
    <def-attr n="persona">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>
    <def-attr n="temps">
      <attr-item tags="inf"/>
      <attr-item tags="ger"/>
      <attr-item tags="pp"/>
      <attr-item tags="pri"/>
      <attr-item tags="ifi"/>
      <attr-item tags="pii"/>
      <attr-item tags="fti"/>
      <attr-item tags="cni"/>
      <attr-item tags="prs"/>
      <attr-item tags="pis"/>
      <attr-item tags="fts"/>
      <attr-item tags="imp"/>
    </def-attr>
  </section-def-attrs>
  <section-def-vars>
    <def-var n="uno"/>
    <def-var n="genero"/>
    <def-var n="numero"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="comparativa"/>
    <def-var n="proclise"/>
    <def-var n="gostar"/>
  </section-def-vars>
  <section-def-macros>
    <def-macro n="f_concord1" npar="1">
      <choose>
<!--To determine value of variables of gender and
						number and propagate to other rules.  Variables are
						not used again in this rule -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- If word has GD or ND, we try to assign the
							gender or number of the previous rule. If there is no
							value for the gender or number variable from previous
							rules, gender will be masculine and number singular.-->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="genero"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="numero"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord2" npar="2">
      <choose>
        <when>
          <test>
<!-- do the main and second parameter gender agree?-->
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
<!-- do the main and second parameter number agree?-->
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
<!-- there is gender and number agreement-->
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
<!-- there isn't gender and number agreement-->
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
<!-- Propagate the main parameter gender if it has been modified during the translation  -->
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- Propagate the main parameter number if it has been modified during the translation  -->
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- Which is the rule general gender? -->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
<!-- Which is the rule general number? -->
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine gender and number value if they are undetermined -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord3" npar="3">
      <choose>
<!-- Look if in source language there is concordance between first and second element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Look if in source language there is concordance between second and third element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Propagate the main parameter gender if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Propagate the main parameter number if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Determine the rule general gender. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="3" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine the rule general number. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="3" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Assign values to GD and ND -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord4" npar="4">
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concTercero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concTercero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_comparativa" npar="1">
      <choose>
        <when>
          <test>
            <or>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit-tag v="más"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit-tag v="menos"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit-tag v="mejor"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit-tag v="peor"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="comparativa"/>
            <lit v="true"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="prngustar" npar="2">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="persona"/>
              <lit-tag v="p1"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="2" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </equal>
              </test>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <lit v="eu"/>
                  </get-case-from>
                  <lit-tag v="prn.tn.p1.mf.sg"/>
                </lu>
              </out>
            </when>
            <otherwise>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <lit v="nós"/>
                  </get-case-from>
                  <lit-tag v="prn.tn.p1.mf.pl"/>
                </lu>
              </out>
            </otherwise>
          </choose>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="2" side="tl" part="persona"/>
                  <lit-tag v="p2"/>
                </equal>
              </test>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sg"/>
                    </equal>
                  </test>
                  <out>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="tu"/>
                      </get-case-from>
                      <lit-tag v="prn.tn.p2.mf.sg"/>
                    </lu>
                  </out>
                </when>
                <otherwise>
                  <out>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="você"/>
                      </get-case-from>
                      <lit-tag v="prn.tn.p2.mf.pl"/>
                    </lu>
                  </out>
                </otherwise>
              </choose>
            </when>
            <otherwise>
              <out>
                <lu>
                  <get-case-from pos="1">
                    <lit v="ele"/>
                  </get-case-from>
                  <lit-tag v="prn.tn.p3"/>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </lu>
              </out>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="f_proclise" npar="1">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="prn.tn"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="rel"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="adv.itg"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="cnjcoo"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="predet"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="prn.itg"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="categoria"/>
                <lit-tag v="cnjsub"/>
              </equal> 
	      <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="cni"/>
              </equal> 
	      <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="fti"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="não"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="nunca"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="jamais"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="ninguém"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="nada"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="agora"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="bem"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="mal"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="ainda"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="já"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="sempre"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="só"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="talvez"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="também"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="também_não"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="assim"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="proclise"/>
            <lit v="true"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <def-macro n="activagostar" npar="1">
      <let>
        <var n="gostar"/>
        <lit v="true"/>
      </let>
    </def-macro>
    <def-macro n="comprovagostar" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <var n="gostar"/>
              <lit v="true"/>
            </equal>
          </test>
          <out>
            <lu>
              <get-case-from pos="1">
                <lit v="de"/>
              </get-case-from>
              <lit-tag v="pr"/>
            </lu>
            <b/>
          </out>
        </when>
      </choose>
      <let>
        <var n="gostar"/>
        <lit v="false"/>
      </let>
    </def-macro>
    <def-macro n="f_bcond" npar="1">
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
            </not>
          </test>
          <out>
            <b pos="1"/>
          </out>
        </when>
      </choose>
    </def-macro>
  </section-def-macros>
  <section-rules>
    <rule>
<!-- regla que es menja els "¿"	 -->
      <pattern>
        <pattern-item n="lquest"/>
      </pattern>
      <action>
			
		</action>
    </rule>
<!-- DATES	 -->
    <rule>
<!-- del 23 de mayo -> de 20 de maio -->
      <pattern>
        <pattern-item n="en_de"/>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="mes"/>
      </pattern>
      <action>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>
    <rule>
<!--REGLA 43: el domingo -> no domingo -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nomtempo"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <lit v="em"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA 44:  el pasado viernes -> na passada sexta-feira -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nomtempo"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <lit v="em"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA 45: el viernes pasado -> na sexta-feira passada-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nomtempo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <lit v="em"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_det"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA : en/del el domingo -> no domingo -->
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="det"/>
        <pattern-item n="nomtempo"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA : en/de/etc. el pasado viernes -> na passada sexta-feira -->
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nomtempo"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA 45: prep el viernes pasado -> na sexta-feira passada-->
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="det"/>
        <pattern-item n="nomtempo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA 43: es la semana -> é a semana (per evitar que posi la prep) -->
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="det"/>
        <pattern-item n="nomtempo"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA 44:  es el mejor día -> é o melhor dia -->
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nomtempo"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!--REGLA 45: es la semana fantástica -> é a semana fantástica -->
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="det"/>
        <pattern-item n="nomtempo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
<!-- 	REGLES QUE ACTIVEN LA PROCLISI	 -->
    <rule>
<!-- REGLA 1: INTERROGATIUS: detecta prn i adv interrogatius per a activar la proclisi-->
      <pattern>
        <pattern-item n="itg"/>
      </pattern>
      <action>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 2: CONJUNCIÓ SUBORDINATIVA: detecta prn i adv interrogatius per a activar la proclisi-->
      <pattern>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 3: RELATIUS per a activar la proclisi-->
      <pattern>
        <pattern-item n="rel"/>
      </pattern>
      <action>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 4: PREDET per a activar la proclisi-->
      <pattern>
        <pattern-item n="predet"/>
      </pattern>
      <action>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 5: ADVERBI per a activar la proclisi i la comparativa-->
      <pattern>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
<!-- 	REGLES DE CONCORDÀNCIA -->
    <rule>
<!-- REGLA 6: NUMERAL-->
      <pattern>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 7: DETERMINANT -->
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 2: NOM -->
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_nom"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 3: ADJECTIU -->
      <pattern>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 10: PRONOM -->
<!--Special case, macro f_concord1 is not applicable because gender and number cannot be taken from previous rules -->
      <pattern>
        <pattern-item n="prn"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="GD"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </let>
          </when>
          <when>
            <test>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="ND"/>
              </equal>
            </test>
            <let>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 11: DETERMINANT T-NOM -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="tnom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_tnom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 12: NOM ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 13: ADJECTIU NOM -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 14: DET NOM ADJECTIU-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 15: DET ADJECTIU NOM-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 16: PREDET DET T-NOM-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="tnom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_tnom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 17: PREDET DET NOM ADJECTIU-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 18: PREDETERMINANT NOM -->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 18: PREDETERMINANT ADJEC-->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 19: PREDETERMINANT NOM ADJECTIU -->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 20: PREDETERMINANT ADJECTIU NOM -->
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 22: ADJECTIU NOM ADJECTIU-->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 23: DET ADJECTIU NOM ADJECTIU -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 24: NOM ADVERBI ADJECTIU-->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 25: DET NOM ADVERBI ADJECTIU -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 26: DET ADVERBI T-NOM-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv"/>
        <pattern-item n="tnom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_tnom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
<!-- aquí hi havia un tnom que he hagut de treure	 -->
    <rule>
<!-- REGLA 27: NUMERAL NOM -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_tnom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 27: NUMERAL ADJECTIU -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_tnom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 29: NUMERAL NOM ADJECTIU -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lem"/>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lem"/>
            <clip pos="2" side="tl" part="a_nom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 30: NUMERAL ADJECTIU NOM -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 31: DET NUMERAL T-NOM -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="tnom"/>
      </pattern>
      <action>
        <call-macro n="comprovagostar">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_tnom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 32: cuyo T-NOM -->
      <pattern>
        <pattern-item n="cuyo"/>
        <pattern-item n="tnom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_tnom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 33: cuyo ADJECTIU NOM -->
      <pattern>
        <pattern-item n="cuyo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lem"/>
            <clip pos="3" side="tl" part="a_nom"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 34: cuyo NOM ADJECTIU-->
      <pattern>
        <pattern-item n="cuyo"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
<!-- 				=·= regles de concordància amb verb predicatiu =·=	 -->
    <rule>
<!-- REGLA : nom pred adjec -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom pred adjec -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_adjec"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom adv pred adjec -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_adjec"/>
            <clip pos="5" side="tl" part="gen"/>
            <clip pos="5" side="tl" part="nbr"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom pred adv adjec -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="pred"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_adjec"/>
            <clip pos="5" side="tl" part="gen"/>
            <clip pos="5" side="tl" part="nbr"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom adv pred adv adjec -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="pred"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    
	<rule v="pt_PT"> <!-- REGLA : det nom prnpro pred adjec-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="pred"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="5"/>
			</call-macro> 
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<call-macro n="f_bcond">
						<with-param pos="3"/>
					</call-macro>
					<out>
						<mlu>
							<lu>
								<clip pos="4" side="tl" part="lemh"/> 
								<clip pos="4" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="3" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="3" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="4" side="tl" part="temps"/>
								<clip pos="4" side="tl" part="persona"/>
								<clip pos="4" side="tl" part="nbr"/>
								<clip pos="4" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="4"/> 
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="3" side="tl" part="whole"/>
								</lu>  
								<b pos="3"/>
								<lu>	
									<clip pos="4" side="tl" part="lemh"/>
									<clip pos="4" side="tl" part="a_verb"/>
									<clip pos="4" side="tl" part="temps"/>
									<clip pos="4" side="tl" part="persona"/>
									<clip pos="4" side="tl" part="gen"/>
									<clip pos="4" side="tl" part="nbr"/>
									<clip pos="4" side="tl" part="lemq"/>
								</lu>  
								<b pos="4"/>
							</out>
						</when>
						<otherwise>
							<call-macro n="f_bcond">
								<with-param pos="3"/>
							</call-macro>
							<out>
								<mlu>
									<lu>
										<clip pos="4" side="tl" part="lemh"/>
										<clip pos="4" side="tl" part="a_verb"/>
										<clip pos="4" side="tl" part="temps"/>
										<clip pos="4" side="tl" part="persona"/>
										<clip pos="4" side="tl" part="gen"/>
										<clip pos="4" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="3" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="3" side="tl" part="tipoenc_pro"/>
										<clip pos="4" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="4"/>
							</out>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="5" side="tl" part="lemh"/>
					<clip pos="5" side="tl" part="a_adjec"/>
					<clip pos="5" side="tl" part="gen"/>
					<clip pos="5" side="tl" part="nbr"/>
					<clip pos="5" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule> 
	
    
    <rule v="pt_BR">
<!-- REGLA : det nom prnpro pred adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>  
	<call-macro n="f_proclise">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>  
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                  </lu>
                  <b pos="3"/>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="persona"/>
                    <clip pos="4" side="tl" part="gen"/>
                    <clip pos="4" side="tl" part="nbr"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                  <b pos="4"/>
                </out>
              </when>
              <otherwise>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                </call-macro>
                <out> 
                  <mlu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="persona"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="4"/>
                </out>
              </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_adjec"/>
            <clip pos="5" side="tl" part="gen"/>
            <clip pos="5" side="tl" part="nbr"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    	<rule v="pt_PT"> <!-- REGLA : det nom adv prnpro pred adjec--> <!-- REFER -->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adv"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="pred"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="6"/>
			</call-macro> 
			<call-macro n="f_proclise">
				<with-param pos="3"/>
			</call-macro> 
			<call-macro n="f_comparativa">
				<with-param pos="3"/>
			</call-macro>
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="5" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="5" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<out>
						<mlu>
							<lu>
								<clip pos="5" side="tl" part="lemh"/> 
								<clip pos="5" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="4" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="4" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="5" side="tl" part="temps"/>
								<clip pos="5" side="tl" part="persona"/>
								<clip pos="5" side="tl" part="nbr"/>
								<clip pos="5" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="4"/>
					</out>
					<call-macro n="f_bcond">
						<with-param pos="5"/>
					</call-macro>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="4" side="tl" part="whole"/>
								</lu>  
								<b pos="4"/>
								<lu>	
									<clip pos="5" side="tl" part="lemh"/>
									<clip pos="5" side="tl" part="a_verb"/>
									<clip pos="5" side="tl" part="temps"/>
									<clip pos="5" side="tl" part="persona"/>
									<clip pos="5" side="tl" part="gen"/>
									<clip pos="5" side="tl" part="nbr"/>
									<clip pos="5" side="tl" part="lemq"/>
								</lu>  
								<b pos="5"/>
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<clip pos="5" side="tl" part="lemh"/>
										<clip pos="5" side="tl" part="a_verb"/>
										<clip pos="5" side="tl" part="temps"/>
										<clip pos="5" side="tl" part="persona"/>
										<clip pos="5" side="tl" part="gen"/>
										<clip pos="5" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="4" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="4" side="tl" part="tipoenc_pro"/>
										<clip pos="5" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="5"/>
							</out>
						</otherwise>
					</choose>	
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="6" side="tl" part="lemh"/>
					<clip pos="6" side="tl" part="a_adjec"/>
					<clip pos="6" side="tl" part="gen"/>
					<clip pos="6" side="tl" part="nbr"/>
					<clip pos="6" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule>
	
    
    <rule v="pt_BR">
<!-- REGLA : det nom adv prnpro pred adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/> 
        </call-macro>  
	<call-macro n="f_proclise">
          <with-param pos="5"/> 
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
        </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="4" side="tl" part="whole"/>
                  </lu>
                  <b pos="4"/>
                  <lu>
                    <clip pos="5" side="tl" part="lemh"/>
                    <clip pos="5" side="tl" part="a_verb"/>
                    <clip pos="5" side="tl" part="temps"/>
                    <clip pos="5" side="tl" part="persona"/>
                    <clip pos="5" side="tl" part="gen"/>
                    <clip pos="5" side="tl" part="nbr"/>
                    <clip pos="5" side="tl" part="lemq"/>
                  </lu>
                  <b pos="5"/>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="persona"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="5"/>
                </out>
              </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    
    
	<rule v="pt_PT"> <!-- REGLA : det nom prnpro pred adv adjec--> 
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="pred"/>
			<pattern-item n="adv"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="6"/>
			</call-macro> 
			<call-macro n="f_comparativa">
				<with-param pos="5"/>
			</call-macro>
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<call-macro n="f_bcond">
						<with-param pos="3"/>
					</call-macro>
					<out>
						<mlu>
							<lu>
								<clip pos="4" side="tl" part="lemh"/> 
								<clip pos="4" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="3" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="3" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="4" side="tl" part="temps"/>
								<clip pos="4" side="tl" part="persona"/>
								<clip pos="4" side="tl" part="nbr"/>
								<clip pos="4" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="4"/> 
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="3" side="tl" part="whole"/>
								</lu>  
								<b pos="3"/>
								<lu>	
									<clip pos="4" side="tl" part="lemh"/>
									<clip pos="4" side="tl" part="a_verb"/>
									<clip pos="4" side="tl" part="temps"/>
									<clip pos="4" side="tl" part="persona"/>
									<clip pos="4" side="tl" part="gen"/>
									<clip pos="4" side="tl" part="nbr"/>
									<clip pos="4" side="tl" part="lemq"/>
								</lu>  
								<b pos="4"/>
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<clip pos="4" side="tl" part="lemh"/>
										<clip pos="4" side="tl" part="a_verb"/>
										<clip pos="4" side="tl" part="temps"/>
										<clip pos="4" side="tl" part="persona"/>
										<clip pos="4" side="tl" part="gen"/>
										<clip pos="4" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="3" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="3" side="tl" part="tipoenc_pro"/>
										<clip pos="4" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="4"/>
							</out>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="5" side="tl" part="whole"/>
				</lu>
				<b pos="5"/>
				<lu>
					<clip pos="6" side="tl" part="lemh"/>
					<clip pos="6" side="tl" part="a_adjec"/>
					<clip pos="6" side="tl" part="gen"/>
					<clip pos="6" side="tl" part="nbr"/>
					<clip pos="6" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule>
    <rule v="pt_BR">
<!-- REGLA : det nom prnpro pred adv adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="pred"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                  </lu>
                  <b pos="3"/>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="persona"/>
                    <clip pos="4" side="tl" part="gen"/>
                    <clip pos="4" side="tl" part="nbr"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                  <b pos="4"/>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="persona"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="4"/>
                </out>
              </otherwise>
            </choose>
        <out>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    
    
    <rule v="pt_PT"> <!-- REGLA : det nom adv prnpro pred adv adjec--> <!--REFER-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adv"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="pred"/>
			<pattern-item n="adv"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="7"/>
			</call-macro>
			<call-macro n="f_proclise">
				<with-param pos="3"/>
			</call-macro> 
			<call-macro n="f_comparativa">
				<with-param pos="3"/>
			</call-macro>
			<call-macro n="f_comparativa">
				<with-param pos="6"/>
			</call-macro>
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="5" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="5" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<out>
						<mlu>
							<lu>
								<clip pos="5" side="tl" part="lemh"/> 
								<clip pos="5" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="4" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="4" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="5" side="tl" part="temps"/>
								<clip pos="5" side="tl" part="persona"/>
								<clip pos="5" side="tl" part="nbr"/>
								<clip pos="5" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="4"/>
					</out>
					<call-macro n="f_bcond">
						<with-param pos="5"/>
					</call-macro>
				</when>
				<otherwise>
					
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="4" side="tl" part="whole"/>
								</lu>  
								<b pos="4"/>
								<lu>	
									<clip pos="5" side="tl" part="lemh"/>
									<clip pos="5" side="tl" part="a_verb"/>
									<clip pos="5" side="tl" part="temps"/>
									<clip pos="5" side="tl" part="persona"/>
									<clip pos="5" side="tl" part="gen"/>
									<clip pos="5" side="tl" part="nbr"/>
									<clip pos="5" side="tl" part="lemq"/>
								</lu>  
								<b pos="5"/>
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<clip pos="5" side="tl" part="lemh"/>
										<clip pos="5" side="tl" part="a_verb"/>
										<clip pos="5" side="tl" part="temps"/>
										<clip pos="5" side="tl" part="persona"/>
										<clip pos="5" side="tl" part="gen"/>
										<clip pos="5" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="4" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="4" side="tl" part="tipoenc_pro"/>
										<clip pos="5" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="5"/>
							</out>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="6" side="tl" part="whole"/>
				</lu>
				<b pos="6"/>
				<lu>
					<clip pos="7" side="tl" part="lemh"/>
					<clip pos="7" side="tl" part="a_adjec"/>
					<clip pos="7" side="tl" part="gen"/>
					<clip pos="7" side="tl" part="nbr"/>
					<clip pos="7" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule>
	
	<rule> <!-- REGLA : det nom pred-enc adjec-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="pred"/>
			<pattern-item n="prnenc"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="5"/>
			</call-macro> 
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
			</out>
			<choose>
				<when>
					<test>
						<equal>
							<var n="proclise"/>
							<lit v="true"/>
						</equal>
					</test>
					<out>
						<lu>
							<clip pos="4" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="4" side="tl" part="tipoenc_pro"/>
						</lu>  
						<b pos="3"/>
						<lu>	
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="persona"/>
							<clip pos="3" side="tl" part="gen"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu> 
						<b pos="4"/>
					</out>		
				</when>
				<otherwise>
					<out>
						<mlu>
							<lu>
								<clip pos="3" side="tl" part="lemh"/>
								<clip pos="3" side="tl" part="a_verb"/>
								<clip pos="3" side="tl" part="temps"/>
								<clip pos="3" side="tl" part="persona"/>
								<clip pos="3" side="tl" part="gen"/>
								<clip pos="3" side="tl" part="nbr"/>
							</lu>
							<lu>
								<clip pos="4" side="tl" part="lem"/>
								<clip pos="4" side="tl" part="a_prnenc"/>
								<clip pos="4" side="tl" part="persona"/>
								<clip pos="4" side="tl" part="gen"/>
								<clip pos="4" side="tl" part="nbr"/>
								<clip pos="3" side="tl" part="lemq"/>
							</lu>  
						</mlu>
						<b pos="4"/>
					</out>
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="5" side="tl" part="lemh"/>
					<clip pos="5" side="tl" part="a_adjec"/>
					<clip pos="5" side="tl" part="gen"/>
					<clip pos="5" side="tl" part="nbr"/>
					<clip pos="5" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule>
	
    <rule v="pt_BR">
<!-- REGLA : det nom adv prnpro pred adv adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="pred"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="7"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
	<call-macro n="f_proclise">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="6"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
        </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="4" side="tl" part="whole"/>
                  </lu>
                  <b pos="4"/>
                  <lu>
                    <clip pos="5" side="tl" part="lemh"/>
                    <clip pos="5" side="tl" part="a_verb"/>
                    <clip pos="5" side="tl" part="temps"/>
                    <clip pos="5" side="tl" part="persona"/>
                    <clip pos="5" side="tl" part="gen"/>
                    <clip pos="5" side="tl" part="nbr"/>
                    <clip pos="5" side="tl" part="lemq"/>
                  </lu>
                  <b pos="5"/>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="persona"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="5"/>
                </out>
              </otherwise>
            </choose>
        <out>
          <lu>
            <clip pos="6" side="tl" part="whole"/>
          </lu>
          <b pos="6"/>
          <lu>
            <clip pos="7" side="tl" part="lemh"/>
            <clip pos="7" side="tl" part="a_adjec"/>
            <clip pos="7" side="tl" part="gen"/>
            <clip pos="7" side="tl" part="nbr"/>
            <clip pos="7" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom pred-enc adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="pred"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="4" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="4"/>
            </out>
          </when>
          <otherwise>
            <out>
              <mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_prnenc"/>
                  <clip pos="4" side="tl" part="persona"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </mlu>
              <b pos="4"/>
            </out>
          </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_adjec"/>
            <clip pos="5" side="tl" part="gen"/>
            <clip pos="5" side="tl" part="nbr"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom adv pred-enc adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="pred"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="5" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="5" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="4"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
              <b pos="5"/>
            </out>
          </when>
          <otherwise>
            <out>
              <mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="persona"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_prnenc"/>
                  <clip pos="5" side="tl" part="persona"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </mlu>
              <b pos="5"/>
            </out>
          </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom pred-enc adv adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="pred"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="4" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="4" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="4"/>
            </out>
          </when>
          <otherwise>
            <out>
              <mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_prnenc"/>
                  <clip pos="4" side="tl" part="persona"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </mlu>
              <b pos="4"/>
            </out>
          </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom vbmod pred adjec -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_verb"/>
            <clip pos="3" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="persona"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="lemh"/>
            <clip pos="4" side="tl" part="a_verb"/>
            <clip pos="4" side="tl" part="temps"/>
            <clip pos="4" side="tl" part="persona"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="4" side="tl" part="nbr"/>
            <clip pos="4" side="tl" part="lemq"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_adjec"/>
            <clip pos="5" side="tl" part="gen"/>
            <clip pos="5" side="tl" part="nbr"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    
    <rule v="pt_PT"> <!-- REGLA : det nom prnpro vbmod pred adjec-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="vbmod"/>
			<pattern-item n="pred"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="6"/>
			</call-macro> 
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<call-macro n="f_bcond">
						<with-param pos="3"/>
					</call-macro>
					<out>
						<mlu>
							<lu>
								<clip pos="4" side="tl" part="lemh"/> 
								<clip pos="4" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="3" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="3" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="4" side="tl" part="temps"/>
								<clip pos="4" side="tl" part="persona"/>
								<clip pos="4" side="tl" part="nbr"/>
								<clip pos="4" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="4"/> 
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test> 
							<out>
								<lu>
									<clip pos="3" side="tl" part="whole"/>
								</lu>  
								<b pos="3"/>
								<lu>	
									<clip pos="4" side="tl" part="lemh"/>
									<clip pos="4" side="tl" part="a_verb"/>
									<clip pos="4" side="tl" part="temps"/>
									<clip pos="4" side="tl" part="persona"/>
									<clip pos="4" side="tl" part="gen"/>
									<clip pos="4" side="tl" part="nbr"/>
									<clip pos="4" side="tl" part="lemq"/>
								</lu>  
								<b pos="4"/>
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<clip pos="4" side="tl" part="lemh"/>
										<clip pos="4" side="tl" part="a_verb"/>
										<clip pos="4" side="tl" part="temps"/>
										<clip pos="4" side="tl" part="persona"/>
										<clip pos="4" side="tl" part="gen"/>
										<clip pos="4" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="3" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="3" side="tl" part="tipoenc_pro"/>
										<clip pos="4" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="4"/>
							</out>
						</otherwise>
					</choose> 
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="5" side="tl" part="whole"/>
				</lu>
				<b pos="5"/>
				<lu>
					<clip pos="6" side="tl" part="lemh"/>
					<clip pos="6" side="tl" part="a_adjec"/>
					<clip pos="6" side="tl" part="gen"/>
					<clip pos="6" side="tl" part="nbr"/>
					<clip pos="6" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule>
	
    
    <rule v="pt_BR">
<!-- REGLA : det nom prnpro vbmod pred adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>  
	<call-macro n="f_proclise">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                  </lu>
                  <b pos="3"/>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="persona"/>
                    <clip pos="4" side="tl" part="gen"/>
                    <clip pos="4" side="tl" part="nbr"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                  <b pos="4"/>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="persona"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="4"/>
                </out>
              </otherwise>
            </choose>
        <out>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule v="pt_PT"> <!-- REGLA : det nom adv prnpro vbmod pred adjec-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="adv"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="vbmod"/>
			<pattern-item n="pred"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>           
				<with-param pos="1"/>
				<with-param pos="7"/>
			</call-macro>
			<call-macro n="f_proclise">
				<with-param pos="3"/>
			</call-macro> 
			<call-macro n="f_comparativa">
				<with-param pos="3"/>
			</call-macro>
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
				<lu>
					<clip pos="3" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="5" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="5" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<call-macro n="f_bcond">
						<with-param pos="4"/>
					</call-macro>
					<out>
						<mlu>
							<lu>
								<clip pos="5" side="tl" part="lemh"/> 
								<clip pos="5" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="4" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="4" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="5" side="tl" part="temps"/>
								<clip pos="5" side="tl" part="persona"/>
								<clip pos="5" side="tl" part="nbr"/>
								<clip pos="5" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="5"/> 
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="4" side="tl" part="whole"/>
								</lu>  
								<b pos="4"/>
								<lu>	
									<clip pos="5" side="tl" part="lemh"/>
									<clip pos="5" side="tl" part="a_verb"/>
									<clip pos="5" side="tl" part="temps"/>
									<clip pos="5" side="tl" part="persona"/>
									<clip pos="5" side="tl" part="gen"/>
									<clip pos="5" side="tl" part="nbr"/>
									<clip pos="5" side="tl" part="lemq"/>
								</lu>  
								<b pos="5"/>
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<clip pos="5" side="tl" part="lemh"/>
										<clip pos="5" side="tl" part="a_verb"/>
										<clip pos="5" side="tl" part="temps"/>
										<clip pos="5" side="tl" part="persona"/>
										<clip pos="5" side="tl" part="gen"/>
										<clip pos="5" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="4" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="4" side="tl" part="tipoenc_pro"/>
										<clip pos="5" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="5"/>
							</out>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
			<out>
				<lu>
					<clip pos="6" side="tl" part="whole"/>
				</lu>
				<b pos="6"/>
				<lu>
					<clip pos="7" side="tl" part="lemh"/>
					<clip pos="7" side="tl" part="a_adjec"/>
					<clip pos="7" side="tl" part="gen"/>
					<clip pos="7" side="tl" part="nbr"/>
					<clip pos="7" side="tl" part="lemq"/>
				</lu>  
			</out>		
		</action>
	</rule>
    
    <rule v="pt_BR">
<!-- REGLA : det nom adv prnpro vbmod pred adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="7"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro> 
	<call-macro n="f_proclise">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
        </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="4" side="tl" part="whole"/>
                  </lu>
                  <b pos="4"/>
                  <lu>
                    <clip pos="5" side="tl" part="lemh"/>
                    <clip pos="5" side="tl" part="a_verb"/>
                    <clip pos="5" side="tl" part="temps"/>
                    <clip pos="5" side="tl" part="persona"/>
                    <clip pos="5" side="tl" part="gen"/>
                    <clip pos="5" side="tl" part="nbr"/>
                    <clip pos="5" side="tl" part="lemq"/>
                  </lu>
                  <b pos="5"/>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="persona"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="5"/>
                </out>
              </otherwise>
            </choose>
        <out>
          <lu>
            <clip pos="6" side="tl" part="whole"/>
          </lu>
          <b pos="6"/>
          <lu>
            <clip pos="7" side="tl" part="lemh"/>
            <clip pos="7" side="tl" part="a_adjec"/>
            <clip pos="7" side="tl" part="gen"/>
            <clip pos="7" side="tl" part="nbr"/>
            <clip pos="7" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    
    
	<rule v="pt_PT"> <!-- REGLA : det nom prnpro vbmod pred adv adjec-->
		<pattern>
			<pattern-item n="det"/>
			<pattern-item n="nom"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="vbmod"/>
			<pattern-item n="pred"/>
			<pattern-item n="adv"/>
			<pattern-item n="adjec"/>
		</pattern>
		<action>
			<call-macro n="f_concord3">
				<with-param pos="2"/>
				<with-param pos="1"/>
				<with-param pos="7"/>
			</call-macro> 
			<call-macro n="f_comparativa">
				<with-param pos="6"/>
			</call-macro>
			<call-macro n="f_comparativa">
				<with-param pos="7"/>
			</call-macro>
			<out> 
				<lu>    
					<clip pos="1" side="tl" part="whole"/>
				</lu>
				<b pos="1"/>
				<lu>
					<clip pos="2" side="tl" part="whole"/>
				</lu>
				<b pos="2"/>
			</out>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="4" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<call-macro n="f_bcond">
						<with-param pos="3"/>
					</call-macro>
					<out>
						<mlu>
							<lu>
								<clip pos="4" side="tl" part="lemh"/> 
								<clip pos="4" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="3" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="3" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="4" side="tl" part="temps"/>
								<clip pos="4" side="tl" part="persona"/>
								<clip pos="4" side="tl" part="nbr"/>
								<clip pos="4" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="4"/> 
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="3" side="tl" part="whole"/>
								</lu>  
								<b pos="3"/>
								<lu>	
									<clip pos="4" side="tl" part="lemh"/>
									<clip pos="4" side="tl" part="a_verb"/>
									<clip pos="4" side="tl" part="temps"/>
									<clip pos="4" side="tl" part="persona"/>
									<clip pos="4" side="tl" part="gen"/>
									<clip pos="4" side="tl" part="nbr"/>
									<clip pos="4" side="tl" part="lemq"/>
								</lu>  
								<b pos="4"/>
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<clip pos="4" side="tl" part="lemh"/>
										<clip pos="4" side="tl" part="a_verb"/>
										<clip pos="4" side="tl" part="temps"/>
										<clip pos="4" side="tl" part="persona"/>
										<clip pos="4" side="tl" part="gen"/>
										<clip pos="4" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="3" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="3" side="tl" part="tipoenc_pro"/>
										<clip pos="4" side="tl" part="lemq"/>
									</lu>  
								</mlu>
								<b pos="4"/>
							</out>
						</otherwise>
					</choose>
				</otherwise>
			</choose>					
			<out>
				<lu>
					<clip pos="5" side="tl" part="whole"/>
				</lu>
				<b pos="5"/>
				<lu>
					<clip pos="6" side="tl" part="whole"/>
				</lu> 
				<b pos="6"/>
				<lu>
					<clip pos="7" side="tl" part="lemh"/>
					<clip pos="7" side="tl" part="a_adjec"/>
					<clip pos="7" side="tl" part="gen"/>
					<clip pos="7" side="tl" part="nbr"/>
					<clip pos="7" side="tl" part="lemq"/>
				</lu> 
			</out>		
		</action>
	</rule>
	
    <rule v="pt_BR">
<!-- REGLA : det nom prnpro vbmod pred adv adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="7"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="7"/>
        </call-macro> 
	<call-macro n="f_proclise">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                  </lu>
                  <b pos="3"/>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="persona"/>
                    <clip pos="4" side="tl" part="gen"/>
                    <clip pos="4" side="tl" part="nbr"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                  <b pos="4"/>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="persona"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                  <b pos="4"/>
                </out>
              </otherwise>
            </choose>
        <out>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="6" side="tl" part="whole"/>
          </lu>
          <b pos="6"/>
          <lu>
            <clip pos="7" side="tl" part="lemh"/>
            <clip pos="7" side="tl" part="a_adjec"/>
            <clip pos="7" side="tl" part="gen"/>
            <clip pos="7" side="tl" part="nbr"/>
            <clip pos="7" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom vbmod pred-enc adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="6"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="5" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="5" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="4"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
              <b pos="5"/>
            </out>
          </when>
          <otherwise>
            <out>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="persona"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_prnenc"/>
                  <clip pos="5" side="tl" part="persona"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </mlu>
              <b pos="5"/>
            </out>
          </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="6" side="tl" part="lemh"/>
            <clip pos="6" side="tl" part="a_adjec"/>
            <clip pos="6" side="tl" part="gen"/>
            <clip pos="6" side="tl" part="nbr"/>
            <clip pos="6" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom adv vbmod pred-enc adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="7"/>
        </call-macro>
        <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_comparativa">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="6" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="6" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="4"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
              <b pos="5"/>
              <lu>
                <clip pos="5" side="tl" part="lemh"/>
                <clip pos="5" side="tl" part="a_verb"/>
                <clip pos="5" side="tl" part="temps"/>
                <clip pos="5" side="tl" part="persona"/>
                <clip pos="5" side="tl" part="gen"/>
                <clip pos="5" side="tl" part="nbr"/>
                <clip pos="5" side="tl" part="lemq"/>
              </lu>
              <b pos="6"/>
            </out>
          </when>
          <otherwise>
            <out>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
              <mlu>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="persona"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_prnenc"/>
                  <clip pos="6" side="tl" part="persona"/>
                  <clip pos="6" side="tl" part="gen"/>
                  <clip pos="6" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </mlu>
              <b pos="6"/>
            </out>
          </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="7" side="tl" part="lemh"/>
            <clip pos="7" side="tl" part="a_adjec"/>
            <clip pos="7" side="tl" part="gen"/>
            <clip pos="7" side="tl" part="nbr"/>
            <clip pos="7" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA : det nom vbmod pred-enc enc adjec-->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="pred"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="7"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="5" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="5" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="4"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="4" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
              <b pos="5"/>
            </out>
          </when>
          <otherwise>
            <out>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <mlu>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="persona"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_prnenc"/>
                  <clip pos="5" side="tl" part="persona"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </mlu>
              <b pos="5"/>
            </out>
          </otherwise>
        </choose>
        <out>
          <lu>
            <clip pos="6" side="tl" part="whole"/>
          </lu>
          <b pos="6"/>
          <lu>
            <clip pos="7" side="tl" part="lemh"/>
            <clip pos="7" side="tl" part="a_adjec"/>
            <clip pos="7" side="tl" part="gen"/>
            <clip pos="7" side="tl" part="nbr"/>
            <clip pos="7" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
<!-- 	REGLES DE VERBS (posició dels clítics, canvis de temps, multiparaules, etc)-->
    <rule>
<!-- REGLA: PRNPRO GUSTAR -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
      </pattern>
      <action>
        <call-macro n="activagostar">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="2" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="2" side="tl" part="a_verb"/>
            <clip pos="2" side="tl" part="temps"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
        </call-macro>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO haber gustar -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
      </pattern>
      <action>
        <call-macro n="activagostar">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="3" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
        </call-macro>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn prnpro gustar-->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
      </pattern>
      <action>
        <call-macro n="activagostar">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="3">
              <clip pos="4" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="4" side="tl" part="a_verb"/>
            <clip pos="4" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="persona"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn prnpro haber gustar-->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
      </pattern>
      <action>
        <call-macro n="activagostar">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="4" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="3">
                  <clip pos="5" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="5" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="3">
                  <clip pos="4" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="5" side="tl" part="whole"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO GUSTAR NP -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="2" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="2" side="tl" part="a_verb"/>
            <clip pos="2" side="tl" part="temps"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO GUSTAR inf -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="2" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="2" side="tl" part="a_verb"/>
            <clip pos="2" side="tl" part="temps"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_verb"/>
            <clip pos="3" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="persona"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO GUSTAR inf -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="2" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="2" side="tl" part="a_verb"/>
            <clip pos="2" side="tl" part="temps"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="2"/>
          <mlu>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="persona"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_prnenc"/>
              <clip pos="4" side="tl" part="persona"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </mlu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO GUSTAR NP -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="3" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <out>
          <b pos="2"/>
          <lu>
            <get-case-from pos="2">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO haber GUSTAR inf -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="3" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <out>
          <b pos="2"/>
          <lu>
            <get-case-from pos="2">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: PRNPRO haber GUSTAR inf-enc -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="3" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="2" side="tl" part="a_verb"/>
                <clip pos="2" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="3" side="tl" part="whole"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <out>
          <b pos="2"/>
          <lu>
            <get-case-from pos="2">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="3"/>
          <mlu>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="persona"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
            </lu>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_prnenc"/>
              <clip pos="5" side="tl" part="persona"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </mlu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn PRNPRO GUSTAR NP -->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="3">
              <clip pos="4" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="4" side="tl" part="a_verb"/>
            <clip pos="4" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="persona"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <get-case-from pos="4">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn PRNPRO GUSTAR inf -->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="3">
              <clip pos="4" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="4" side="tl" part="a_verb"/>
            <clip pos="4" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="persona"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <get-case-from pos="4">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="lemh"/>
            <clip pos="5" side="tl" part="a_verb"/>
            <clip pos="5" side="tl" part="temps"/>
            <clip pos="5" side="tl" part="persona"/>
            <clip pos="5" side="tl" part="gen"/>
            <clip pos="5" side="tl" part="nbr"/>
            <clip pos="5" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn PRNPRO GUSTAR inf-enc -->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="3">
              <clip pos="4" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="4" side="tl" part="a_verb"/>
            <clip pos="4" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="persona"/>
            <clip pos="4" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
          </lu>
          <b pos="3"/>
          <lu>
            <get-case-from pos="4">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="4"/>
          <mlu>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="5" side="tl" part="temps"/>
              <clip pos="5" side="tl" part="persona"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
            </lu>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_prnenc"/>
              <clip pos="6" side="tl" part="persona"/>
              <clip pos="6" side="tl" part="gen"/>
              <clip pos="6" side="tl" part="nbr"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </mlu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn prnpro haber gustar np -->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="4" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="3">
                  <clip pos="5" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="5" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="3">
                  <clip pos="4" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="5" side="tl" part="whole"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <out>
          <b pos="4"/>
          <lu>
            <get-case-from pos="4">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: a prntn prnpro haber gustar inf -->
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="prntn"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="haber"/>
        <pattern-item n="gustar"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="prngustar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="4" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="3">
                  <clip pos="5" side="tl" part="lem"/>
                </get-case-from>
                <clip pos="5" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="3">
                  <clip pos="4" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="4" side="tl" part="a_verb"/>
                <clip pos="4" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="persona"/>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="3" side="tl" part="nbr"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="5" side="tl" part="whole"/>
              </lu>
            </out>
          </otherwise>
        </choose>
        <out>
          <b pos="4"/>
          <lu>
            <get-case-from pos="4">
              <lit v="de"/>
            </get-case-from>
            <lit-tag v="pr"/>
          </lu>
          <b pos="5"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 35: VERB (per a multiparaules sense enclítics)-->
      <pattern>
        <pattern-item n="verb"/>
      </pattern>
      <action>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <clip pos="1" side="tl" part="a_verb"/>
            <clip pos="1" side="tl" part="temps"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
            <clip pos="1" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: VERB + ENCLÍTIC-->
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </out>
          </when>
          <otherwise>
            <out>
              <mlu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="persona"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prnenc"/>
                  <clip pos="2" side="tl" part="persona"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    
    
	<rule v="pt_PT"> <!-- REGLA 36: prnpro VERB -->
		<pattern>
			<pattern-item n="prnpro"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="2" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="2" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<out>
						<mlu>
							<lu>
								<get-case-from pos="1" >
									<clip pos="2" side="tl" part="lemh"/>
								</get-case-from>
								<clip pos="2" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<get-case-from pos="2" >
									<clip pos="1" side="tl" part="lem"/>
								</get-case-from>
								<lit-tag v="prn.enc"/>
								<clip pos="1" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="2" side="tl" part="temps"/>
								<clip pos="2" side="tl" part="persona"/>
								<clip pos="2" side="tl" part="nbr"/>
							</lu>
						</mlu>
					</out>
					<call-macro n="f_bcond">
						<with-param pos="1"/>
					</call-macro>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="1" side="tl" part="whole"/>
								</lu>  
								<b pos="1"/>
								<lu>	
									<clip pos="2" side="tl" part="lemh"/>
									<clip pos="2" side="tl" part="a_verb"/>
									<clip pos="2" side="tl" part="temps"/>
									<clip pos="2" side="tl" part="persona"/>
									<clip pos="2" side="tl" part="gen"/>
									<clip pos="2" side="tl" part="nbr"/>
									<clip pos="2" side="tl" part="lemq"/>
								</lu>  
							</out>
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<get-case-from pos="1" >
											<clip pos="2" side="tl" part="lemh"/>
										</get-case-from>
										<clip pos="2" side="tl" part="a_verb"/>
										<clip pos="2" side="tl" part="temps"/>
										<clip pos="2" side="tl" part="persona"/>
										<clip pos="2" side="tl" part="gen"/>
										<clip pos="2" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="1" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="1" side="tl" part="tipoenc_pro"/>
										<clip pos="2" side="tl" part="lemq"/>
									</lu>  
								</mlu>
							</out>
							<call-macro n="f_bcond">
								<with-param pos="1"/>
							</call-macro>					
						</otherwise>
					</choose>
				</otherwise>
			</choose>
		</action>
	</rule>
	
    
    <rule v="pt_BR">
<!-- REGLA 36: prnpro VERB -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>  
      <call-macro n="f_proclise">
          <with-param pos="2"/>
        </call-macro>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="1" side="tl" part="whole"/>
                  </lu>
                  <b pos="1"/>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="persona"/>
                    <clip pos="2" side="tl" part="gen"/>
                    <clip pos="2" side="tl" part="nbr"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="persona"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                </call-macro>
              </otherwise>
            </choose>
      </action>
    </rule>
    <rule>
<!-- REGLA 37: VERB + ENCLÍTIC + ENCLÍTIC-->
      <pattern>
        <pattern-item n="verb"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="2" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.pro"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
              </lu>
              <b/>
              <lu>
                <get-case-from pos="3">
                  <clip pos="1" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </out>
          </when>
          <otherwise>
            <out>
              <mlu>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="persona"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prnenc"/>
                  <clip pos="2" side="tl" part="persona"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_prnenc"/>
                  <clip pos="3" side="tl" part="persona"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
    <rule v="pt_PT"> <!-- REGLA 38: prnpro prnpro VERB --> <!-- també de moment ens en carreguem un -->
		<pattern>
			<pattern-item n="prnpro"/>
			<pattern-item n="prnpro"/>
			<pattern-item n="verb"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="3" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="3" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<out>
						<mlu>
							<lu>
								<get-case-from pos="1" >
									<clip pos="3" side="tl" part="lemh"/>
								</get-case-from>
								<clip pos="3" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<get-case-from pos="2" >
									<clip pos="1" side="tl" part="lem"/>
								</get-case-from>
								<lit-tag v="prn.enc"/>
								<clip pos="1" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<clip pos="2" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="2" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="3" side="tl" part="temps"/>
								<clip pos="3" side="tl" part="persona"/>
								<clip pos="3" side="tl" part="nbr"/>
							</lu>
						</mlu>
					</out>
					<call-macro n="f_bcond">
						<with-param pos="1"/>
					</call-macro>
					<call-macro n="f_bcond">
						<with-param pos="2"/>
					</call-macro>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="1" side="tl" part="whole"/>
								</lu>  
								<b pos="1"/>
								<lu>
									<clip pos="2" side="tl" part="whole"/>
								</lu>  
								<b pos="2"/>
								<lu>	
									<clip pos="3" side="tl" part="lemh"/>
									<clip pos="3" side="tl" part="a_verb"/>
									<clip pos="3" side="tl" part="temps"/>
									<clip pos="3" side="tl" part="persona"/>
									<clip pos="3" side="tl" part="gen"/>
									<clip pos="3" side="tl" part="nbr"/>
									<clip pos="3" side="tl" part="lemq"/>
								</lu>  
							</out>		
						</when>
						<otherwise>
							<out>
								<mlu>
									<lu>
										<get-case-from pos="1" >
											<clip pos="3" side="tl" part="lemh"/>
										</get-case-from>
										<clip pos="3" side="tl" part="a_verb"/>
										<clip pos="3" side="tl" part="temps"/>
										<clip pos="3" side="tl" part="persona"/>
										<clip pos="3" side="tl" part="gen"/>
										<clip pos="3" side="tl" part="nbr"/>
									</lu>
									<lu>
										<clip pos="1" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="1" side="tl" part="tipoenc_pro"/>
										<clip pos="3" side="tl" part="lemq"/>
									</lu>  
									<lu>
										<clip pos="2" side="tl" part="lem"/>
										<lit-tag v="prn.enc"/>
										<clip pos="2" side="tl" part="tipoenc_pro"/>
										<clip pos="3" side="tl" part="lemq"/>
									</lu>  
								</mlu>
							</out>
							<call-macro n="f_bcond">
								<with-param pos="1"/>
							</call-macro>	
							<call-macro n="f_bcond">
								<with-param pos="2"/>
							</call-macro>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
		</action>
	</rule> 
	
    
    <rule v="pt_BR">
<!-- REGLA 38: prnpro prnpro VERB -->
<!-- també de moment ens en carreguem un -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>  
      <call-macro n="f_proclise">
          <with-param pos="3"/>
        </call-macro>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="1" side="tl" part="whole"/>
                  </lu>
                  <b pos="1"/>
                  <lu>
                    <clip pos="2" side="tl" part="whole"/>
                  </lu>
                  <b pos="2"/>
                  <lu>
                    <clip pos="3" side="tl" part="lemh"/>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <clip pos="3" side="tl" part="temps"/>
                    <clip pos="3" side="tl" part="persona"/>
                    <clip pos="3" side="tl" part="gen"/>
                    <clip pos="3" side="tl" part="nbr"/>
                    <clip pos="3" side="tl" part="lemq"/>
                  </lu>
                </out>
              </when>
              <otherwise>
                <out>
                  <mlu>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="persona"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <lit-tag v="prn.enc"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                </call-macro>
              </otherwise>
            </choose>
      </action>
    </rule>
    <rule>
<!-- REGLA 39: PRETERITO PERFECTO COMPUESTO -> PRETERITO PERFECTO SIMPLE <vbhaver><pri>+<part> -->
      <pattern>
        <pattern-item n="vbhaverpri"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="2" side="tl" part="lemh"/>
            </get-case-from>
            <clip pos="2" side="tl" part="a_verb"/>
            <lit-tag v="ifi"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="1" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 40: prnpro pret perf compost -> pret perf simple + pronom ben posadet -->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbhaverpri"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <clip pos="1" side="tl" part="whole"/>
              </lu>
              <b/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ifi"/>
                <clip pos="2" side="tl" part="persona"/>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </out>
          </when>
          <otherwise>
            <out>
              <mlu>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="ifi"/>
                  <clip pos="2" side="tl" part="persona"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.enc"/>
                  <clip pos="1" side="tl" part="tipoenc_pro"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
<!-- 	 					=·=estar gerundi=·=-->
	<rule v="pt_PT"> <!-- REGLA 35: estar ger -> estar a inf (sense enclítics)-->
		<pattern>
			<pattern-item n="estar"/>
			<pattern-item n="ger"/>
		</pattern>
		<action>
			<out>
				<lu>
					<clip pos="1" side="tl" part="lemh"/>
					<clip pos="1" side="tl" part="a_verb"/>
					<clip pos="1" side="tl" part="temps"/>
					<clip pos="1" side="tl" part="persona"/>
					<clip pos="1" side="tl" part="gen"/>
					<clip pos="1" side="tl" part="nbr"/>
					<clip pos="1" side="tl" part="lemq"/>
				</lu>	
				<b pos="1"/>
				<lu>
					<lit v="a"/>
					<lit-tag v="pr"/>
				</lu>
				<b/>
				<lu>
					<clip pos="2" side="tl" part="lemh"/>
					<clip pos="2" side="tl" part="a_verb"/>
					<lit-tag v="inf"/>
					<clip pos="2" side="tl" part="lemq"/>
				</lu>
			</out>		
		</action>
	</rule>
	
	<rule v="pt_PT"> <!-- REGLA 35: prnpro estar ger -> estar a inf (prn ben posat)-->
		<pattern>
			<pattern-item n="prnpro"/>
			<pattern-item n="estar"/>
			<pattern-item n="ger"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="2" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="2" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<out>
						<mlu>
							<lu>
								<clip pos="2" side="tl" part="lemh"/> 
								<clip pos="2" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="1" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="1" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="2" side="tl" part="temps"/>
								<clip pos="2" side="tl" part="persona"/>
								<clip pos="2" side="tl" part="nbr"/>
							</lu>
						</mlu>
						<b pos="1"/> 
						<lu>
							<lit v="a"/>
							<lit-tag v="pr"/>
						</lu>
						<b pos="2"/> 
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<lit-tag v="inf"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="1" side="tl" part="whole"/>
								</lu>  
								<b pos="1"/>  
								<lu>	
									<clip pos="2" side="tl" part="lemh"/>
									<clip pos="2" side="tl" part="a_verb"/>
									<clip pos="2" side="tl" part="temps"/>
									<clip pos="2" side="tl" part="persona"/>
									<clip pos="2" side="tl" part="gen"/>
									<clip pos="2" side="tl" part="nbr"/>
								</lu>	
								<b pos="2"/>
								<lu>
									<lit v="a"/>
									<lit-tag v="pr"/>
								</lu>
								<b/>
								<lu>
									<clip pos="3" side="tl" part="lemh"/>
									<clip pos="3" side="tl" part="a_verb"/>
									<lit-tag v="inf"/>
									<clip pos="3" side="tl" part="lemq"/>
								</lu>
							</out>		
						</when>
						<otherwise>
							<out>
								<lu>
									<get-case-from pos="1" >
										<clip pos="2" side="tl" part="lemh"/>
									</get-case-from>
									<clip pos="2" side="tl" part="a_verb"/>
									<clip pos="2" side="tl" part="temps"/>
									<clip pos="2" side="tl" part="persona"/>
									<clip pos="2" side="tl" part="gen"/>
									<clip pos="2" side="tl" part="nbr"/>
								</lu>
								<b pos="1"/>
								<lu>
									<lit v="a"/>
									<lit-tag v="pr"/>
								</lu>
								<b pos="2"/>
								<mlu>
									<lu>
										<clip pos="3" side="tl" part="lemh"/>
										<clip pos="3" side="tl" part="a_verb"/>
										<lit-tag v="inf"/>
									</lu>
									<lu>
										<get-case-from pos="2" >
											<clip pos="1" side="tl" part="lem"/>
										</get-case-from>
										<lit-tag v="prn.enc"/>
										<clip pos="1" side="tl" part="tipoenc_pro"/>
										<clip pos="3" side="tl" part="lemq"/>
									</lu>  
								</mlu>
							</out>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
		</action>
	</rule>
	
	<rule v="pt_PT"> <!-- REGLA 35: estar ger enc -> estar a inf (prn ben posat)-->
		<pattern>
			<pattern-item n="estar"/>
			<pattern-item n="ger"/>
			<pattern-item n="prnenc"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<equal>
							<var n="proclise"/>
							<lit v="true"/>
						</equal>
					</test>
					<out>
						<lu>
							<get-case-from pos="1" >
								<clip pos="3" side="tl" part="lem"/>
							</get-case-from>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="tipoenc_pro"/>
						</lu>  
						<b pos="1"/> 
						<lu>	
							<get-case-from pos="2" >
								<clip pos="1" side="tl" part="lemh"/>
							</get-case-from>
							<clip pos="1" side="tl" part="a_verb"/>
							<clip pos="1" side="tl" part="temps"/>
							<clip pos="1" side="tl" part="persona"/>
							<clip pos="1" side="tl" part="gen"/>
							<clip pos="1" side="tl" part="nbr"/>
							<clip pos="1" side="tl" part="lemq"/>
						</lu>  
						<b pos="2"/>
						<lu>
							<lit v="a"/>
							<lit-tag v="pr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="inf"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</out>		
				</when>
				<otherwise> <!-- el prn va entre la preposició i l'infinitiu? -->
					<out>
						<lu>
							<get-case-from pos="1" >
								<clip pos="1" side="tl" part="lemh"/>
							</get-case-from>
							<clip pos="1" side="tl" part="a_verb"/>
							<clip pos="1" side="tl" part="temps"/>
							<clip pos="1" side="tl" part="persona"/>
							<clip pos="1" side="tl" part="gen"/>
							<clip pos="1" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
							<lit v="a"/>
							<lit-tag v="pr"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="tipoenc_pro"/>
						</lu>  
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="inf"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</out>
				</otherwise>
			</choose>
		</action>
	</rule>

<!--  					=·=ir a infinitiu=·=-->
    <rule>
<!-- REGLA 35: ir a cantar -> ir cantar (sense enclítics)-->
      <pattern>
        <pattern-item n="vbir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <out>
          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <clip pos="1" side="tl" part="a_verb"/>
            <clip pos="1" side="tl" part="temps"/>
            <clip pos="1" side="tl" part="persona"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
            <clip pos="1" side="tl" part="lemq"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_verb"/>
            <clip pos="3" side="tl" part="temps"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    
    	<rule v="pt_PT"> <!-- REGLA 35: prnpro ir a inf -> ir inf (prn ben posat)-->
		<pattern>
			<pattern-item n="prnpro"/>
			<pattern-item n="vbir"/>
			<pattern-item n="a"/>
			<pattern-item n="inf"/>
		</pattern>
		<action>
			<choose>
				<when>
					<test>
						<or>
							<equal>
								<clip pos="2" side="tl" part="temps"/>
								<lit-tag v="cni"/>
							</equal>
							<equal>
								<clip pos="2" side="tl" part="temps"/>
								<lit-tag v="fti"/>
							</equal>
						</or>
					</test>
					<out>
						<mlu>
							<lu>
								<clip pos="2" side="tl" part="lemh"/> 
								<clip pos="2" side="tl" part="a_verb"/>
							</lu> 
							<lu>
								<clip pos="1" side="tl" part="lem"/>
								<lit-tag v="prn.enc"/>
								<clip pos="1" side="tl" part="tipoenc_pro"/>
							</lu> 
							<lu>
								<lit v="ar"/>
								<lit-tag v="cuavb"/>
								<clip pos="2" side="tl" part="temps"/>
								<clip pos="2" side="tl" part="persona"/>
								<clip pos="2" side="tl" part="nbr"/>
								<clip pos="2" side="tl" part="lemq"/>
							</lu>
						</mlu>
						<b pos="1"/> 
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</out>
					<call-macro n="f_bcond">
						<with-param pos="2"/>
					</call-macro>
					<call-macro n="f_bcond">
						<with-param pos="3"/>
					</call-macro>
				</when>
				<otherwise>
					<choose>
						
						<when>
							<test>
								<equal>
									<var n="proclise"/>
									<lit v="true"/>
								</equal>
							</test>
							<out>
								<lu>
									<clip pos="1" side="tl" part="whole"/>
								</lu>  
								<b pos="1"/>  
								<lu>	
									<clip pos="2" side="tl" part="lemh"/>
									<clip pos="2" side="tl" part="a_verb"/>
									<clip pos="2" side="tl" part="temps"/>
									<clip pos="2" side="tl" part="persona"/>
									<clip pos="2" side="tl" part="gen"/>
									<clip pos="2" side="tl" part="nbr"/>
									<clip pos="2" side="tl" part="lemq"/>
								</lu>	
								<b pos="2"/>
								<lu>
									<clip pos="4" side="tl" part="lemh"/>
									<clip pos="4" side="tl" part="a_verb"/>
									<clip pos="4" side="tl" part="temps"/>
									<clip pos="4" side="tl" part="lemq"/>
								</lu>
							</out>	
							<call-macro n="f_bcond">
								<with-param pos="3"/>
							</call-macro>
						</when>
						<otherwise>
							<out>
								<lu>
									<get-case-from pos="1" >
										<clip pos="2" side="tl" part="lemh"/>
									</get-case-from>
									<clip pos="2" side="tl" part="a_verb"/>
									<clip pos="2" side="tl" part="temps"/>
									<clip pos="2" side="tl" part="persona"/>
									<clip pos="2" side="tl" part="gen"/>
									<clip pos="2" side="tl" part="nbr"/>
									<clip pos="2" side="tl" part="lemq"/>
								</lu>
								<b pos="1"/>
								<mlu>
									<lu>
										<clip pos="4" side="tl" part="lemh"/>
										<clip pos="4" side="tl" part="a_verb"/>
										<clip pos="4" side="tl" part="temps"/>
									</lu>
									<lu>
										<get-case-from pos="2" >
											<clip pos="1" side="tl" part="lem"/>
										</get-case-from>
										<lit-tag v="prn.enc"/>
										<clip pos="1" side="tl" part="tipoenc_pro"/>
										<clip pos="4" side="tl" part="lemq"/>
									</lu>  
								</mlu>
							</out>
							<call-macro n="f_bcond">
								<with-param pos="2"/>
							</call-macro>
							<call-macro n="f_bcond">
								<with-param pos="3"/>
							</call-macro>
						</otherwise>
					</choose>
				</otherwise>
			</choose>
		</action>
	</rule>
    
    <rule v="pt_BR">
<!-- REGLA 35: prnpro ir a inf -> ir inf (prn ben posat)-->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action> 
      <call-macro n="f_proclise">
          <with-param pos="2"/>
        </call-macro>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="proclise"/>
                    <lit v="true"/>
                  </equal>
                </test>
                <out>
                  <lu>
                    <clip pos="1" side="tl" part="whole"/>
                  </lu>
                  <b pos="1"/>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="persona"/>
                    <clip pos="2" side="tl" part="gen"/>
                    <clip pos="2" side="tl" part="nbr"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                  <b pos="2"/>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <lu>
                    <get-case-from pos="1">
                      <clip pos="2" side="tl" part="lemh"/>
                    </get-case-from>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="persona"/>
                    <clip pos="2" side="tl" part="gen"/>
                    <clip pos="2" side="tl" part="nbr"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                  <b pos="1"/>
                  <mlu>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                    </lu>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.enc"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </mlu>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
      </action>
    </rule>
    <rule>
<!-- REGLA 35: ir a inf-enc -> ir inf (prn ben posat)-->
      <pattern>
        <pattern-item n="vbir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal>
                <var n="proclise"/>
                <lit v="true"/>
              </equal>
            </test>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="4" side="tl" part="lem"/>
                </get-case-from>
                <lit-tag v="prn.pro"/>
                <clip pos="4" side="tl" part="tipoenc_pro"/>
              </lu>
              <b pos="1"/>
              <lu>
                <get-case-from pos="2">
                  <clip pos="1" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="a_verb"/>
                <clip pos="3" side="tl" part="temps"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </out>
          </when>
          <otherwise>
            <out>
              <lu>
                <get-case-from pos="1">
                  <clip pos="1" side="tl" part="lemh"/>
                </get-case-from>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="persona"/>
                <clip pos="1" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <b pos="1"/>
              <mlu>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                </lu>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.enc"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </mlu>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>
<!-- REGLES DE MÁS/MENOS	 -->
    <rule>
<!-- REGLA: num más/menos num -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="mas_menos"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num más/menos -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="mas_menos"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="2" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="2" side="tl" part="a_adv"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num más/menos que -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="mas_menos"/>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num t-nom más/menos -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="tnom"/>
        <pattern-item n="mas_menos"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="3" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="3" side="tl" part="a_adv"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_tnom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num t-nom más/menos que-->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="tnom"/>
        <pattern-item n="mas_menos"/>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_tnom"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num nom adjec más/menos -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="mas_menos"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="4" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="4" side="tl" part="a_adv"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num nom adjec más/menos que-->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="mas_menos"/>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="lemh"/>
            <clip pos="3" side="tl" part="a_adjec"/>
            <clip pos="3" side="tl" part="gen"/>
            <clip pos="3" side="tl" part="nbr"/>
            <clip pos="3" side="tl" part="lemq"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num adjec nom más/menos -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="mas_menos"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <get-case-from pos="1">
              <clip pos="4" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="4" side="tl" part="a_adv"/>
          </lu>
          <b pos="1"/>
          <lu>
            <get-case-from pos="2">
              <clip pos="1" side="tl" part="lem"/>
            </get-case-from>
            <clip pos="1" side="tl" part="a_num"/>
            <clip pos="1" side="tl" part="gen"/>
            <clip pos="1" side="tl" part="nbr"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA: num adjec nom más/menos que-->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="mas_menos"/>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <clip pos="2" side="tl" part="a_adjec"/>
            <clip pos="2" side="tl" part="gen"/>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
          <b pos="3"/>
          <lu>
            <clip pos="4" side="tl" part="whole"/>
          </lu>
          <b pos="4"/>
          <lu>
            <clip pos="5" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
<!-- 	ALTRES -->
    <rule>
<!-- REGLA 41: reset variables-->
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <let>
          <var n="comparativa"/>
          <lit v="false"/>
        </let>
        <let>
          <var n="proclise"/>
          <lit v="false"/>
        </let>
        <let>
          <var n="gostar"/>
          <lit v="false"/>
        </let>
        <let>
          <var n="numero"/>
          <lit-tag v="sg"/>
        </let>
        <let>
          <var n="genero"/>
          <lit-tag v="m"/>
        </let>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule>
<!-- REGLA 42: del X% -> de X% -->
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="det"/>
        <pattern-item n="percent"/>
      </pattern>
      <action>
        <out>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="3" side="tl" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
  </section-rules>
</transfer>
